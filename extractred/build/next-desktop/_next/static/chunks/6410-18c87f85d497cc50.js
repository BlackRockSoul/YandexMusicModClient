(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6410],{7042:function(t,e,i){"use strict";i.d(e,{em:function(){return h},F8:function(){return D},nU:function(){return d},$H:function(){return l}});var a=i(99616),n=i(42503),r=i(84133);let l=t=>{let{entityType:e,isLegalRejected:i,isUnsafeLegal:l,entityId:s,callback:o}=t,{disclaimer:c,modals:{disclaimerModal:u}}=(0,r.oR)(),d=(0,a.useRef)(String((0,n.Z)())),m=(0,a.useRef)(!1),k=(0,r.uK)(),v=k.get(r.ce);return(0,a.useEffect)(()=>{c.isUnsafeDisclaimerConfirmed&&c.id===d.current&&!m.current&&(null==o||o(),m.current=!0)},[o,c.isUnsafeDisclaimerConfirmed,c.id]),(0,a.useCallback)(async t=>{if(s&&(i||l)){let i=v.get(r.BU.ExEx);if(l&&(null==i?void 0:i.includes("".concat(e,"_").concat(s)))){null==o||o();return}switch(t.preventDefault(),e){case r.co.ARTIST:await c.getArtistDisclaimer({artistId:String(s)});break;case r.co.ALBUM:case r.co.PODCAST:await c.getAlbumDisclaimer({albumId:Number(s)});break;case r.co.TRACK:await c.getTrackDisclaimer({trackId:String(s)})}l&&c.setType(r.Gq.UNSAFE),c.setId(d.current),c.setEntityId(s),c.setEntityType(e),m.current=!1,u.open();return}null==o||o()},[o,c,u,s,e,i,l,v])};var s=i(96555);let o=t=>t.details?(0,s.pj)({title:t.title,description:t.description,details:{text:t.details.text,url:t.details.url}}):(0,s.pj)({title:t.title,description:t.description}),c=s.V5.model("DisclaimerDetails",{text:s.V5.maybe(s.V5.string),url:s.V5.maybe(s.V5.string)}),u=s.V5.model("DisclaimerData",{title:s.V5.maybe(s.V5.string),description:s.V5.maybe(s.V5.string),details:s.V5.maybe(c)}),d=s.V5.model("Disclaimer",{loadingState:s.V5.enumeration(Object.values(r.Gu)),data:s.V5.maybeNull(u),type:s.V5.maybeNull(s.V5.enumeration(Object.values(r.Gq))),id:s.V5.maybeNull(s.V5.string),entityType:s.V5.maybeNull(s.V5.enumeration(Object.values(r.co))),entityId:s.V5.maybeNull(s.V5.union(s.V5.string,s.V5.number)),isUnsafeDisclaimerConfirmed:s.V5.optional(s.V5.boolean,!1),shouldHistoryBack:s.V5.optional(s.V5.boolean,!1)}).views(t=>({get isLoading(){return t.loadingState===r.Gu.IDLE||t.loadingState===r.Gu.PENDING},get isRejected(){return t.loadingState===r.Gu.REJECT}})).actions(t=>{let e={getArtistDisclaimer:(0,s.ls)(function*(e){let{artistId:i}=e,{artistsResource:a,logger:n}=(0,s.dU)(t);if(t.loadingState!==r.Gu.PENDING)try{t.loadingState=r.Gu.PENDING;let e=yield a.getDisclaimer({artistId:i});e.modal&&(t.data=o(e.modal)),t.loadingState!==r.Gu.IDLE&&(t.loadingState=r.Gu.RESOLVE)}catch(e){("string"==typeof e||e instanceof Error)&&n.error(e),t.loadingState!==r.Gu.IDLE&&(t.loadingState=r.Gu.REJECT)}}),getAlbumDisclaimer:(0,s.ls)(function*(e){let{albumId:i}=e,{albumResource:a,logger:n}=(0,s.dU)(t);if(t.loadingState!==r.Gu.PENDING)try{t.loadingState=r.Gu.PENDING;let e=yield a.getDisclaimer({albumId:i});e.modal&&(t.data=o(e.modal)),t.loadingState!==r.Gu.IDLE&&(t.loadingState=r.Gu.RESOLVE)}catch(e){("string"==typeof e||e instanceof Error)&&n.error(e),t.loadingState!==r.Gu.IDLE&&(t.loadingState=r.Gu.REJECT)}}),getTrackDisclaimer:(0,s.ls)(function*(e){let{trackId:i}=e,{tracksResource:a,logger:n}=(0,s.dU)(t);if(t.loadingState!==r.Gu.PENDING)try{t.loadingState=r.Gu.PENDING;let e=yield a.getDisclaimer({trackId:i});e.modal&&(t.data=o(e.modal)),t.loadingState!==r.Gu.IDLE&&(t.loadingState=r.Gu.RESOLVE)}catch(e){("string"==typeof e||e instanceof Error)&&n.error(e),t.loadingState!==r.Gu.IDLE&&(t.loadingState=r.Gu.REJECT)}}),setId(e){t.id=e},setType(e){t.type=e},setEntityType(e){t.entityType=e},setEntityId(e){t.entityId=e},setConfirmUnsafeDisclaimer(e){t.isUnsafeDisclaimerConfirmed=e},setShouldHistoryBack(e){t.shouldHistoryBack=e},reset(){t.loadingState=r.Gu.IDLE,t.data=null,t.id=null,t.type=null,t.entityType=null,t.entityId=null,t.isUnsafeDisclaimerConfirmed=!1,t.shouldHistoryBack=!1}};return e});var m=i(8759),k=i(35338),v=i(33423),_=i(2814),p=i(15527),x=i(12670),C=i(1918),y=i(44285),f=i(77263),b=i.n(f);let g={[r.co.ALBUM]:(0,m.jsx)(_.Z,{id:"extra-explicit.confirm-unsafe-album"}),[r.co.PODCAST]:(0,m.jsx)(_.Z,{id:"extra-explicit.confirm-unsafe-podcast"}),[r.co.ARTIST]:(0,m.jsx)(_.Z,{id:"extra-explicit.confirm-unsafe-artist"}),[r.co.TRACK]:(0,m.jsx)(_.Z,{id:"extra-explicit.confirm-unsafe-track"})},h=(0,v.Pi)(t=>{var e,i,n,l;let{disclaimer:s,onClose:o,className:c}=t,{data:u,isLoading:d}=null!=s?s:{},{href:v}=(0,r.zB)(null!==(l=null==s?void 0:null===(i=s.data)||void 0===i?void 0:null===(e=i.details)||void 0===e?void 0:e.url)&&void 0!==l?l:""),f=(0,r.k6)(),h=(0,r.s0)("/"),N=(0,r.uK)(),j=N.get(r.ce),T=(0,a.useCallback)(()=>{if(o)return o();f.canBack&&f.back(),h()},[o,f,h]),D=(null==u?void 0:null===(n=u.details)||void 0===n?void 0:n.url)&&u.details.text,E=(0,a.useCallback)(()=>{null==s||s.setConfirmUnsafeDisclaimer(!0);let t=j.get(r.BU.ExEx),e=new Date,i=e.setMinutes(e.getMinutes()+15);t?j.set(r.BU.ExEx,[...t,"".concat(null==s?void 0:s.entityType,"_").concat(null==s?void 0:s.entityId)],{expires:new Date(i)}):j.set(r.BU.ExEx,["".concat(null==s?void 0:s.entityType,"_").concat(null==s?void 0:s.entityId)],{expires:new Date(i)}),null==o||o()},[s,j,o]),S=(0,a.useCallback)(()=>{(null==s?void 0:s.shouldHistoryBack)?(null==o||o(),f.canBack&&f.back(),h()):null==o||o()},[null==s?void 0:s.shouldHistoryBack,f,h,o]);(0,a.useEffect)(()=>()=>{null==s||s.reset()},[s]);let L=(0,a.useMemo)(()=>{if(d)return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x.Shimmer,{radius:"l",width:200,height:24,className:b().shimmer}),(0,m.jsx)(x.Shimmer,{radius:"l",width:250,height:16,className:b().shimmer})]});if(u&&!d){var t;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(C.Heading,{variant:"h4",size:"l",className:(0,k.W)(b().title,b().text),children:u.title}),(0,m.jsx)(C.Caption,{variant:"div",size:"l",weight:"normal",className:b().text,children:u.description}),D&&(0,m.jsx)(y.rU,{href:v,className:b().link,children:(0,m.jsx)(C.Caption,{variant:"span",size:"l",weight:"normal",children:null===(t=u.details)||void 0===t?void 0:t.text})})]})}},[d,u,v,D]),A=(0,a.useMemo)(()=>d?(0,m.jsx)(x.Shimmer,{radius:"xl",width:190,height:50,className:b().shimmer}):(null==s?void 0:s.type)===r.Gq.UNSAFE?(0,m.jsxs)("div",{className:b().buttons,children:[(0,m.jsx)(p.z,{color:"primary",onClick:S,size:"l",radius:"xxxl",className:b().button,children:(0,m.jsx)(_.Z,{id:"extra-explicit.reject-unsafe-entity"})}),(0,m.jsx)(p.z,{color:"secondary",onClick:E,size:"l",radius:"xxxl",className:b().button,children:s.entityType&&g[s.entityType]})]}):(0,m.jsx)("div",{className:b().buttons,children:(0,m.jsx)(p.z,{color:"primary",onClick:T,size:"l",radius:"xxxl",className:b().button,children:(0,m.jsx)(_.Z,{id:"interface-actions.confirm"})})}),[E,null==s?void 0:s.entityType,null==s?void 0:s.type,T,d,S]);return(0,m.jsx)("div",{className:(0,k.W)(b().root,c),children:(0,m.jsxs)("div",{className:b().container,children:[L,A]})})});var N=i(31476),j=i(13327),T=i.n(j);let D=(0,v.Pi)(()=>{let{disclaimer:t,modals:{disclaimerModal:e}}=(0,r.oR)();return(0,m.jsx)(N.u,{size:"fitContent",placement:"center",open:e.isOpened,onOpenChange:e.onOpenChange,onClose:e.close,showHeader:!1,className:T().root,contentClassName:T().content,children:(0,m.jsx)(h,{disclaimer:t,onClose:e.close})})})},43310:function(t,e,i){"use strict";i.d(e,{yp:function(){return o},bP:function(){return _},Yc:function(){return v.Y},v$:function(){return c},Ni:function(){return d},jp:function(){return p},KX:function(){return m.useOnDislikeClick},SB:function(){return k.useOnLikeClick}});var a=i(96555),n=i(36019),r=i(33066),l=i(84133);let s=a.V5.model("TrackParameters",{bpm:a.V5.maybe(a.V5.number),energy:a.V5.maybe(a.V5.number),hue:a.V5.maybe(a.V5.number),userCollectionHue:a.V5.maybe(a.V5.number)}),o=a.V5.model("BaseTrack",{id:a.V5.string,isAvailable:a.V5.boolean,isRemoved:a.V5.boolean,title:a.V5.string,contentWarning:a.V5.maybe(a.V5.enumeration(Object.values(n.F1))),trackSource:a.V5.maybe(a.V5.enumeration(Object.values(n.zu))),version:a.V5.maybe(a.V5.string),durationMs:a.V5.maybe(a.V5.number),coverUri:a.V5.maybe(a.V5.string),averageColor:a.V5.maybe(a.V5.string),trackParameters:a.V5.maybe(s),albumId:a.V5.maybe(a.V5.number),disclaimers:a.V5.maybe(a.V5.array(a.V5.string)),type:a.V5.maybe(a.V5.enumeration(Object.values(n.Vc))),pubDate:a.V5.maybe(a.V5.string),hasSyncLyrics:a.V5.maybe(a.V5.boolean)}).views(t=>({get isLiked(){if((0,a.fh)(t)){let{library:e}=(0,a.yj)(t);return e.isTrackLiked(t.id)}return!1},get url(){if(t.albumId)return"/album/".concat(t.albumId,"/track/").concat(t.id);return"/track/".concat(t.id)},get isDisliked(){if((0,a.fh)(t)){let{library:e}=(0,a.yj)(t);return e.isTrackDisliked(t.id)}return!1},get isTrackPodcast(){if((0,a.fh)(t))return n.Vc.PODCAST===t.type;return!1},get explicitMarkVariant(){if(t.contentWarning===n.F1.EXPLICIT)return n.Vc.PODCAST===t.type?r.ExplicitMarkVariant.NUMERIC:r.ExplicitMarkVariant.E;return null},get isUGC(){if((0,a.fh)(t))return t.trackSource===n.zu.UGC;return},get seeds(){return["track:".concat(t.id)]},get isLegalRejected(){if(!(0,a.fh)(t))return!1;let{experiments:e}=(0,a.yj)(t),i=e.checkExperiment(l.pe.WebNextLegalRejectTrack,"on");if(t.disclaimers&&i)return!t.isAvailable&&t.disclaimers.includes(n.em.MODAL);return!1},get isUnsafeLegal(){if(!(0,a.fh)(t))return!1;let{experiments:e}=(0,a.yj)(t),i=e.checkExperiment(l.pe.WebNextLegalUnsafeTrack,"on");if(t.disclaimers&&i)return t.isAvailable&&t.disclaimers.includes(n.em.MODAL);return!1}})).actions(t=>{let e={toggleLike:(0,a.ls)(function*(){if(!(0,a.fh)(t))return;let{library:e,user:i}=(0,a.yj)(t);if(i.isAuthorized)return yield e.toggleTrackLike({entityId:t.id,albumId:t.albumId,userId:i.account.uid})}),toggleDislike:(0,a.ls)(function*(){if(!(0,a.fh)(t))return;let{library:e,user:i}=(0,a.yj)(t);if(i.isAuthorized)return yield e.toggleTrackDislike({entityId:t.id,albumId:t.albumId,userId:i.account.uid})})};return e}),c=a.V5.model("Ugc"),u=t=>(0,a.pj)({bpm:null==t?void 0:t.bpm,energy:null==t?void 0:t.energy,hue:null==t?void 0:t.hue,userCollectionHue:null==t?void 0:t.userCollectionHue}),d=t=>{var e,i,n,r,s,o,c,d,m,k,v,_,p,x;t=t||{};let C=(0,l.Us)(null===(e=t)||void 0===e?void 0:e.derivedColors);return(0,a.pj)({id:(t.id||0).toString(),isAvailable:!!(null===(i=t)||void 0===i?void 0:i.available),isRemoved:(null===(n=t)||void 0===n?void 0:n.error)==="not-found",title:null!==(x=null===(r=t)||void 0===r?void 0:r.title)&&void 0!==x?x:"",contentWarning:null===(s=t)||void 0===s?void 0:s.contentWarning,version:null===(o=t)||void 0===o?void 0:o.version,durationMs:null===(c=t)||void 0===c?void 0:c.durationMs,coverUri:null===(d=t)||void 0===d?void 0:d.coverUri,averageColor:C,trackParameters:u(null===(m=t)||void 0===m?void 0:m.trackParameters),trackSource:null===(k=t)||void 0===k?void 0:k.trackSource,albumId:null===(_=t.albums)||void 0===_?void 0:null===(v=_[0])||void 0===v?void 0:v.id,disclaimers:t.disclaimers,type:t.type,pubDate:t.pubDate,hasSyncLyrics:null===(p=t.lyricsInfo)||void 0===p?void 0:p.hasAvailableSyncLyrics})};var m=i(45431),k=i(50818),v=i(20766);i(5889);let _=a.V5.model("MajorModel",{id:a.V5.number,name:a.V5.string,prettyName:a.V5.maybe(a.V5.string)}),p=t=>(0,a.pj)({id:t.id,name:t.name,prettyName:t.prettyName})},45431:function(t,e,i){"use strict";i.r(e),i.d(e,{useOnDislikeClick:function(){return m}});var a=i(8759),n=i(93043),r=i(99616),l=i(65244),s=i(71440),o=i(36019),c=i(84133),u=i(44285),d=i(5889);let m=t=>{let{user:e,modals:{fullscreenPlayerModal:i}}=(0,c.oR)(),m=(0,c.R$)(),{notify:k}=(0,c.d$)(),[v,_]=(0,r.useState)(!1),{formatMessage:p}=(0,l.Z)();return(0,r.useCallback)(async()=>{if(t){let l=i.isOpened?c.W$.FULLSCREEN_INFO:c.W$.INFO,x=i.isOpened?c.W$.FULLSCREEN_ERROR:c.W$.ERROR;if(!e.isAuthorized){k((0,a.jsx)(u.Q,{error:p({id:"authorization-messages.need-to-authorizate"})}),{containerId:x});return}if(v)return;let C={...(0,n.ZN)(t),isDisliked:!t.isDisliked};_(!0);let y=await t.toggleDislike();if(_(!1),y===o.Bi.OK){var r;k((0,a.jsx)(d.NotificationDislike,{coverUri:C.coverUri,isDisliked:C.isDisliked,title:C.title}),{containerId:l});let t=C.isDisliked?o.C.DISLIKE:o.C.UNDISLIKE;m&&(0,s.xA)(m.state.currentContext.value)&&await m.state.currentContext.value.sendFeedback(m.state.playerState,m.state.queueState,t),C.isDisliked&&C.id===(null==m?void 0:null===(r=m.state.queueState.currentEntity.value)||void 0===r?void 0:r.entity.data.meta.id)&&(null==m||m.moveForward())}else k((0,a.jsx)(u.Q,{error:p({id:"error-messages.error-during-action"})}),{containerId:x})}},[p,i.isOpened,k,v,m,t,e.isAuthorized])}},50818:function(t,e,i){"use strict";i.r(e),i.d(e,{useOnLikeClick:function(){return m}});var a=i(8759),n=i(93043),r=i(99616),l=i(65244),s=i(71440),o=i(36019),c=i(84133),u=i(44285),d=i(20766);let m=t=>{let{user:e,modals:{fullscreenPlayerModal:i}}=(0,c.oR)(),{notify:m}=(0,c.d$)(),[k,v]=(0,r.useState)(!1),{formatMessage:_}=(0,l.Z)(),p=(0,c.R$)();return(0,r.useCallback)(async()=>{if(t){let r=i.isOpened?c.W$.FULLSCREEN_INFO:c.W$.INFO,l=i.isOpened?c.W$.FULLSCREEN_ERROR:c.W$.ERROR;if(!e.isAuthorized){m((0,a.jsx)(u.Q,{error:_({id:"authorization-messages.need-to-authorizate"})}),{containerId:l});return}if(k)return;let x={...(0,n.ZN)(t),isLiked:!t.isLiked};v(!0);let C=await t.toggleLike();if(v(!1),C===o.Bi.OK){m((0,a.jsx)(d.Y,{track:x}),{containerId:r});let t=x.isLiked?o.C.LIKE:o.C.UNLIKE;p&&(0,s.xA)(p.state.currentContext.value)&&p.state.currentContext.value.sendFeedback(p.state.playerState,p.state.queueState,t)}else m((0,a.jsx)(u.Q,{error:_({id:"error-messages.error-during-action"})}),{containerId:l})}},[_,i.isOpened,m,k,p,t,e.isAuthorized])}},5889:function(t,e,i){"use strict";i.r(e),i.d(e,{NotificationDislike:function(){return m}});var a=i(8759),n=i(35338),r=i(99616),l=i(2814),s=i(96437),o=i(1918),c=i(44285),u=i(85204),d=i.n(u);let m=t=>{let{coverUri:e,title:i,isDisliked:u,closeToast:m,className:k}=t,v=(0,r.useMemo)(()=>(0,a.jsx)(s.Paper,{className:d().cover,radius:"s",children:(0,a.jsx)(c.BE,{className:d().image,src:e,alt:i,size:100,fit:"cover",withAvatarReplace:!0})}),[e,i]),_=(0,r.useMemo)(()=>u?(0,a.jsx)(o.Caption,{className:d().text,variant:"div",type:"controls",size:"m",children:(0,a.jsx)(l.Z,{id:"notifications-info.track-unavailable-in-recommendations"})}):(0,a.jsx)(o.Caption,{className:d().text,variant:"div",type:"controls",size:"m",children:(0,a.jsx)(l.Z,{id:"notifications-info.track-available-in-recommendations"})}),[u]);return(0,a.jsx)(c.Yj,{className:(0,n.W)(d().root,k),closeToast:m,message:(0,a.jsxs)("div",{className:d().message,children:[v,_]})})}},20766:function(t,e,i){"use strict";i.d(e,{Y:function(){return r}});var a=i(8759),n=i(44285);let r=t=>{let{track:e,closeToast:i}=t;return(0,a.jsx)(n.AP,{closeToast:i,entityVariant:n.j9.TRACK,entityTitle:e.title,collectionUrl:"/collection",coverUri:e.coverUri,isLiked:e.isLiked})}},95539:function(t,e,i){"use strict";i.d(e,{jt:function(){return j.ControlsBar},Jx:function(){return b},wT:function(){return S.PodcastMeta},RJ:function(){return s.TrackAlbum},G7:function(){return h.TrackCard},_3:function(){return l.TrackChart},hz:function(){return T.TrackContextMenu},ko:function(){return E.TrackMeta},le:function(){return k},O2:function(){return a.TrackPlaylist},VZ:function(){return n.TrackPlaylistAddition},N6:function(){return r.TrackPodcast},bc:function(){return _},S7:function(){return g},Er:function(){return D},E5:function(){return A},Vt:function(){return f},Z2:function(){return N},Wc:function(){return I.W},nD:function(){return R.useTrackDisclaimer}});var a=i(8425),n=i(60362),r=i(17734),l=i(63402),s=i(48765),o=i(96555),c=i(21774),u=i(81446),d=i(16121),m=i(43310);let k=m.yp.props({artists:o.V5.array(u.Go),albums:o.V5.array(c.KX),chart:o.V5.maybe(d.BH)}).views(t=>({get artistsNames(){var e;return null===(e=t.artists)||void 0===e?void 0:e.map(t=>t.name).join(", ")},get mainAlbum(){var i,a;return null!==(a=null===(i=t.albums)||void 0===i?void 0:i[0])&&void 0!==a?a:null},get index(){var n,r,l;return null!==(l=null===(r=t.albums[0])||void 0===r?void 0:null===(n=r.trackPosition)||void 0===n?void 0:n.index)&&void 0!==l?l:null}})).named("Track"),v=o.V5.model("Credit",{title:o.V5.string,value:o.V5.string}),_=o.V5.compose(k,m.v$).named("UgcTrack");var p=i(96431),x=i(36019),C=i(33066),y=i(84133);let f=t=>{var e,i;let a=null===(e=t.artists)||void 0===e?void 0:e.map(u.d),n=null===(i=t.albums)||void 0===i?void 0:i.map(c.N);return(0,o.pj)({...(0,m.Ni)(t),artists:a,albums:n})},b=o.V5.model("CurrentTrackInfo",{id:o.V5.maybeNull(o.V5.union(o.V5.string,o.V5.number)),albumId:o.V5.maybeNull(o.V5.number),isUGC:o.V5.maybeNull(o.V5.boolean),trackLoadingState:o.V5.enumeration(Object.values(y.Gu)),fullTrack:o.V5.maybeNull(k),creditsLoadingState:o.V5.enumeration(Object.values(y.Gu)),credits:o.V5.maybeNull(o.V5.array(v))}).views(t=>({get isTrackIdle(){return t.trackLoadingState===y.Gu.IDLE},get isCreditsIdle(){return t.creditsLoadingState===y.Gu.IDLE},get isTrackLoading(){return t.trackLoadingState===y.Gu.PENDING||t.trackLoadingState===y.Gu.IDLE},get isTrackRejected(){return t.trackLoadingState===y.Gu.REJECT},get isCreditsLoading(){return t.creditsLoadingState===y.Gu.PENDING||t.creditsLoadingState===y.Gu.IDLE},get isCreditsRejected(){return t.creditsLoadingState===y.Gu.REJECT},get isRejected(){return t.creditsLoadingState===y.Gu.REJECT&&t.trackLoadingState===y.Gu.REJECT},get explicitMarkVariant(){var e;if((null===(e=t.fullTrack)||void 0===e?void 0:e.contentWarning)===x.F1.EXPLICIT)return x.Vc.PODCAST===t.fullTrack.type?C.ExplicitMarkVariant.NUMERIC:C.ExplicitMarkVariant.E;return null}})).actions(t=>{let e={setTrack(e){let{id:i,albumId:a,isUGC:n}=e;t.id=i,t.albumId=a,t.isUGC=n},getFullTrack:(0,o.ls)(function*(){let{tracksResource:e,logger:i}=(0,o.dU)(t);if(!t.id||t.trackLoadingState===y.Gu.PENDING)return null;try{t.trackLoadingState=y.Gu.PENDING;let i=yield e.getFullInfoTrack({trackId:t.id,albumId:t.albumId});if(!i)return null;t.fullTrack=(0,o.pj)(f(i.track)),t.trackLoadingState=y.Gu.RESOLVE}catch(e){!(e instanceof p.eY)&&(e instanceof Error||"string"==typeof e)&&i.error(e),t.trackLoadingState=y.Gu.REJECT}return null}),getTrackMeta:(0,o.ls)(function*(){let{tracksResource:e,logger:i}=(0,o.dU)(t);if(!t.id||t.trackLoadingState===y.Gu.PENDING)return null;try{t.trackLoadingState=y.Gu.PENDING;let i=yield e.getTracksMeta({trackIds:[t.id],removeDuplicates:!0});if(!i||!i.length)return null;i[0]&&(t.fullTrack=(0,o.pj)(f(i[0])),t.trackLoadingState=y.Gu.RESOLVE)}catch(e){!(e instanceof p.eY)&&(e instanceof Error||"string"==typeof e)&&i.error(e),t.trackLoadingState=y.Gu.REJECT}return null}),getCreditsInfo:(0,o.ls)(function*(){let{tracksResource:e,logger:i}=(0,o.dU)(t);if(!t.id||t.creditsLoadingState===y.Gu.PENDING)return null;try{t.creditsLoadingState=y.Gu.PENDING;let i=yield e.getCredits({trackId:t.id});t.credits=(0,o.pj)(null==i?void 0:i.credits),t.creditsLoadingState=y.Gu.RESOLVE}catch(e){!(e instanceof p.eY)&&(e instanceof Error||"string"==typeof e)&&i.error(e),t.creditsLoadingState=y.Gu.REJECT}return null}),reset(){t.id=null,t.albumId=null,t.isUGC=null,t.trackLoadingState=y.Gu.IDLE,t.creditsLoadingState=y.Gu.IDLE,t.fullTrack=null,t.credits=null}};return e}),g=(t,e)=>(0,o.pj)({...f(t),chart:e&&(0,d.W5)(e)});var h=i(84270);let N=t=>{var e,i;return(0,o.pj)({...f(t),artists:null!==(i=null==t?void 0:null===(e=t.artists)||void 0===e?void 0:e.map(u.d))&&void 0!==i?i:[]})};var j=i(59741),T=i(50429);let D=(t,e)=>{if(!e)return;let{h:i,s:a}=(0,y.sE)(e);return"hsl(".concat(i,", ").concat(a,"%, ").concat(t===y.Q2.Light?60:20,"%)")};var E=i(81360),S=i(19708),L=i(86502);let A=t=>({type:L.RX.Unloaded,meta:{id:t.albumId?"".concat(t.id,":").concat(t.albumId):t.id}});var I=i(54272),R=i(5658)},54272:function(t,e,i){"use strict";i.d(e,{W:function(){return s}});var a=i(8759),n=i(99616),r=i(3515),l=i(84133);let s=()=>{let{notify:t}=(0,l.d$)(),{playlist:e,modals:{fullscreenPlayerModal:i}}=(0,l.oR)(),s=(0,n.useCallback)(n=>{var s,o;let{withSuccessNotification:c,withPageRefresh:u,playlist:d,track:m}=n;c&&t((0,a.jsx)(r.XD,{entityTitle:m.title,entityCoverUri:null!==(o=m.coverUri)&&void 0!==o?o:"",playlist:d}),{containerId:i.isOpened?l.W$.FULLSCREEN_INFO:l.W$.INFO}),u&&d.uuid===(null===(s=e.meta)||void 0===s?void 0:s.uuid)&&e.refresh()},[i.isOpened,t,e]),o=(0,n.useCallback)(e=>{let{withFailNotification:n}=e;n&&t((0,a.jsx)(r.wi,{}),{containerId:i.isOpened?l.W$.FULLSCREEN_ERROR:l.W$.ERROR})},[i.isOpened,t]);return(0,n.useCallback)(async t=>{var e;let{playlist:i,track:a,withSuccessNotification:n=!0,withFailNotification:l=!0,withPageRefresh:c=!0}=t,u=await i.changePlaylist((0,r.PG)({operation:r.aL.INSERT,position:0,tracks:[{id:a.id,albumId:null===(e=a.mainAlbum)||void 0===e?void 0:e.id}]}));return u===r.pX.OK?s({withSuccessNotification:n,withPageRefresh:c,playlist:i,track:a}):o({withFailNotification:l}),u},[s,o])}},5658:function(t,e,i){"use strict";i.r(e),i.d(e,{useTrackDisclaimer:function(){return l}});var a=i(99616),n=i(42503),r=i(84133);let l=t=>{let{track:e,callback:i}=t,{disclaimer:l,modals:{disclaimerModal:s}}=(0,r.oR)(),o=(0,a.useRef)(String((0,n.Z)())),c=(0,a.useRef)(!1),u=(0,r.uK)(),d=u.get(r.ce);return(0,a.useEffect)(()=>{l.isUnsafeDisclaimerConfirmed&&l.id===o.current&&!c.current&&(null==i||i(),c.current=!0)},[i,l.isUnsafeDisclaimerConfirmed,l.id]),(0,a.useCallback)(async t=>{if(e.isLegalRejected||e.isUnsafeLegal){let a=d.get(r.BU.ExEx);if(e.isUnsafeLegal&&(null==a?void 0:a.includes("".concat(r.co.TRACK,"_").concat(e.id)))){null==i||i();return}null==t||t.preventDefault(),await l.getTrackDisclaimer({trackId:e.id}),e.isUnsafeLegal&&l.setType(r.Gq.UNSAFE),l.setId(o.current),l.setEntityId(e.id),l.setEntityType(r.co.TRACK),c.current=!1,s.open();return}null==i||i()},[i,l,s,d,e.id,e.isLegalRejected,e.isUnsafeLegal])}},59741:function(t,e,i){"use strict";i.r(e),i.d(e,{ControlsBar:function(){return C}});var a=i(8759),n=i(35338),r=i(33423),l=i(99616),s=i(65244),o=i(15527),c=i(33066),u=i(14581),d=i(1918),m=i(43310),k=i(84133),v=i(44285),_=i(50429),p=i(59781),x=i.n(p);let C=(0,r.Pi)(t=>{let{className:e,track:i,withLightning:r}=t,{user:p}=(0,k.oR)(),{formatMessage:C}=(0,s.Z)(),{sendLikeSearchFeedback:y}=(0,k.sA)(),[f,b]=(0,l.useState)(!1),[g,h]=(0,l.useState)(!1),N=(0,m.SB)(i),j=(0,m.KX)(i),T=(0,l.useMemo)(()=>{let t=Math.round((i.durationMs||0)/1e3);return(0,k.gf)(t)},[i.durationMs]),D=(0,l.useCallback)(()=>{f||i.isLiked||(b(!0),null==y||y()),N()},[N,f,y,i.isLiked]),E=(0,l.useCallback)(t=>{t.stopPropagation()},[]),S=(0,l.useMemo)(()=>{if(p.isAuthorized&&!i.isRemoved&&i.isAvailable)return(0,a.jsx)(_.TrackContextMenu,{track:i,open:g,onOpenChange:h,placement:"bottom",reference:(0,a.jsx)(o.z,{onClick:E,variant:"text",size:"xs",withRipple:!1,radius:"round",className:(0,n.W)(x().contextMenu,{[x().contextMenu_visible]:g}),"aria-label":C({id:"interface-actions.context-menu"}),icon:(0,a.jsx)(u.J,{variant:"more",size:"xxs"})})})},[C,E,g,i,p.isAuthorized]);return(0,a.jsxs)("div",{className:(0,n.W)(x().root,x().controls,e,{[x().controls_disliked]:i.isDisliked,[x().controls_disabled]:!i.isAvailable}),children:[(i.explicitMarkVariant||r)&&(0,a.jsxs)("div",{className:x().icons,children:[r&&(0,a.jsx)(u.J,{size:"xxs",className:x().lightning,variant:"lightning"}),i.explicitMarkVariant&&(0,a.jsx)(c.ExplicitMark,{variant:i.explicitMarkVariant,className:x().explicitMark,iconSize:i.isTrackPodcast?"xs":"xxxs"})]}),p.isAuthorized&&!i.isRemoved&&i.isAvailable&&(0,a.jsx)(v.dJ,{size:"xs",iconSize:"xxs",className:(0,n.W)(x().item,x().likeIcon),isLiked:i.isLiked,onClick:D}),p.isAuthorized&&!i.isRemoved&&i.isAvailable&&(0,a.jsx)(v.Q1,{size:"xs",iconSize:"xxs",className:(0,n.W)(x().item,x().dislikeIcon),isDisliked:i.isDisliked,onClick:j}),(0,a.jsxs)("div",{className:(0,n.W)(x().item,x().contextMenuWrapper),children:["number"==typeof i.durationMs&&(0,a.jsx)(d.Caption,{variant:"span",className:(0,n.W)(x().duration,{[x().duration_hidden]:g}),type:"entity",size:"m",weight:"medium",children:T}),S]})]})})},19708:function(t,e,i){"use strict";i.r(e),i.d(e,{PodcastMeta:function(){return y}});var a=i(8759),n=i(35338),r=i(33423),l=i(99616),s=i(65244),o=i(2814),c=i(54064),u=i(33066),d=i(1918),m=i(7042),k=i(84133),v=i(44285),_=i(73473),p=i.n(_),x=i(70434),C=i.n(x);let y=(0,r.Pi)(t=>{let{track:e,className:i,withPodcastName:r=!1,withDate:_=!0,withSecondaryColor:x=!1,captionSize:y="m",explicitSize:f="xs",withExplicitMark:b,titleContainerClassName:g}=t,{modals:{fullscreenPlayerModal:h}}=(0,k.oR)(),{formatMessage:N}=(0,s.Z)(),j=e.mainAlbum,T=j&&r,D=e.pubDate?new Date(e.pubDate):new Date,E=(0,k.u9)(D),S=!1,L=(0,k.s0)("/album/".concat(null==j?void 0:j.id)),A=(0,m.$H)({entityType:k.co.PODCAST,entityId:null==j?void 0:j.id,isLegalRejected:!!(null==j?void 0:j.isLegalRejected),isUnsafeLegal:!!(null==j?void 0:j.isUnsafeLegal),callback:L}),I=(0,l.useCallback)(()=>{switch(E){case k.Uv.TODAY:return(0,a.jsx)(o.Z,{id:"interface-actions.date-today"});case k.Uv.YESTERDAY:return(0,a.jsx)(o.Z,{id:"interface-actions.date-yesterday"});case k.Uv.DATE_WITH_YEAR:return(0,a.jsx)(c.Ji,{value:e.pubDate,month:"long",day:"numeric",year:"numeric"});default:return(0,a.jsx)(c.Ji,{value:e.pubDate,month:"long",day:"numeric"})}},[e.pubDate,E]);e.pubDate&&_&&(S=[k.Uv.TODAY,k.Uv.YESTERDAY].includes(E));let R=(0,l.useCallback)(t=>{h.isOpened&&h.close(),A(t)},[h,A]),M=(0,l.useMemo)(()=>e.isRemoved?(0,a.jsx)(o.Z,{id:"track-title.podcast-not-found"}):(0,a.jsx)(d.Caption,{className:p().title,type:"entity",size:y,variant:"div",children:e.title}),[e.isRemoved,e.title,y]);return(0,a.jsx)("div",{className:(0,n.W)(p().root,{[p().root_disabled]:!e.isAvailable,[p().root_disliked]:e.isDisliked,[p().root_withSecondaryColor]:x},i),children:(0,a.jsxs)("div",{className:p().metaContainer,children:[(0,a.jsxs)("div",{className:(0,n.W)(p().titleContainer,g),children:[(0,a.jsx)(d.Caption,{className:p().text,type:"entity",size:y,variant:"div",lineClamp:1,children:M}),e.explicitMarkVariant&&b&&(0,a.jsx)(u.ExplicitMark,{variant:u.ExplicitMarkVariant.NUMERIC,className:(0,n.W)(p().explicitMark,C().explicitMark),iconSize:f})]}),(0,a.jsxs)(d.Caption,{type:"entity",size:y,variant:"div",lineClamp:1,className:(0,n.W)(p().text,C().podcastName),children:[T&&(0,a.jsx)(v.rU,{"aria-label":N({id:"entity-names.podcast-name"},{podcastName:j.title}),className:p().link,href:"/album/".concat(j.id),title:j.title,onClick:R,children:(0,a.jsx)(d.Caption,{variant:"span",type:"entity",size:y,className:p().albumTitle,children:j.title})}),e.pubDate&&_&&(0,a.jsx)(d.Caption,{variant:"span",type:"entity",size:y,className:(0,n.W)({[C().dateWithName]:T,[C().soonDate]:S,[C().dateDisabled]:!e.isAvailable,[C().dateDisliked]:e.isDisliked}),children:I()})]})]})})})},81360:function(t,e,i){"use strict";i.r(e),i.d(e,{TrackMeta:function(){return b}});var a=i(8759),n=i(35338),r=i(33423),l=i(99616),s=i(65244),o=i(2814),c=i(36019),u=i(33066),d=i(1918),m=i(53433),k=i(81446),v=i(84133),_=i(44285),p=i(14616);let x=function(){var t,e;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null===(e=i[0])||void 0===e?void 0:null===(t=e.decomposed)||void 0===t?void 0:t.length)return i;let n=a.map(t=>t.id).sort(),r=i.map(t=>t.id).sort();return(0,p.Z)(n,r)?[]:i.filter(t=>!t.various)};var C=i(5658),y=i(73473),f=i.n(y);let b=(0,r.Pi)(t=>{let{className:e,titleContainerClassName:i,track:r,albumArtists:p,withExplicitMark:y,withSecondaryColor:b,captionSize:g="m",explicitSize:h,withAlbumLink:N,withAllArtistsTitle:j}=t,{formatMessage:T}=(0,s.Z)(),{modals:{fullscreenPlayerModal:D}}=(0,v.oR)(),E=(0,v.s0)("/album/".concat(r.albumId)),S=(0,l.useMemo)(()=>{var t;let e=T({id:"entity-names.track-name"},{trackName:r.title});return"".concat(e," ").concat(null!==(t=r.version)&&void 0!==t?t:"")},[T,r.title,r.version]),L=(0,C.useTrackDisclaimer)({track:r,callback:E}),A=(0,l.useCallback)(t=>{D.isOpened&&D.close(),L(t)},[D,L]),I=(0,l.useMemo)(()=>r.isRemoved?(0,a.jsx)(d.Caption,{className:(0,n.W)(f().text,f().title),type:"entity",size:g,weight:"medium",variant:"div",children:(0,a.jsx)(o.Z,{id:"track-title.error-not-found"})}):r.albumId&&N&&r.trackSource===c.zu.OWN&&r.isAvailable?(0,a.jsx)(_.rU,{onClick:A,className:f().albumLink,href:"/album/".concat(r.albumId),"aria-label":S,...(0,m.BA)(m.bG.track.TRACK_TITLE),children:(0,a.jsx)(d.Caption,{className:(0,n.W)(f().text,f().title),type:"entity",size:g,weight:"medium",variant:"div",children:r.title})}):(0,a.jsx)(d.Caption,{className:(0,n.W)(f().text,f().title),type:"entity",size:g,weight:"medium",variant:"div",...(0,m.BA)(m.bG.track.TRACK_TITLE_WITHOUT_LINK),children:r.title}),[g,A,r.albumId,r.isAvailable,r.isRemoved,r.title,r.trackSource,S,N]),R=(0,l.useMemo)(()=>x(r.artists,p),[r.artists,p,r.id]);return(0,a.jsx)("div",{className:(0,n.W)(f().root,{[f().root_disabled]:!r.isAvailable,[f().root_disliked]:r.isDisliked,[f().root_withSecondaryColor]:b},e),children:(0,a.jsxs)("div",{className:f().metaContainer,children:[(0,a.jsxs)("div",{className:(0,n.W)(f().titleContainer,{[f().titleContainer_withVersion]:r.version},i),children:[(0,a.jsxs)(d.Caption,{className:f().text,type:"entity",size:g,weight:"medium",variant:"div",lineClamp:1,children:[I,!r.isRemoved&&r.version&&(0,a.jsx)(d.Caption,{className:(0,n.W)(f().text,f().version),type:"entity",size:g,weight:"medium",variant:"div",children:" ".concat(r.version)})]}),r.explicitMarkVariant&&y&&(0,a.jsx)(u.ExplicitMark,{iconSize:h,variant:r.explicitMarkVariant,className:f().explicitMark})]}),R.length>0&&(0,a.jsx)(k.jO,{className:(0,n.W)(f().text,f().artists),linkClassName:(0,n.W)(f().text,f().link),captionClassName:(0,n.W)(f().text,f().artistCaption),artists:R,withLink:!r.isUGC,lineClamp:1,captionSize:g,withAllArtistsTitle:j})]})})})},50429:function(t,e,i){"use strict";i.r(e),i.d(e,{TrackContextMenu:function(){return E}});var a=i(8759),n=i(33423),r=i(99616),l=i(2814),s=i(36019),o=i(14581),c=i(52317),u=i(21774),d=i(43310),m=i(84133),k=i(44285),v=i(65244),_=i(3515);let p=()=>{let{playlist:t,trackIndex:e}=(0,r.useContext)(_.jK)||{},{notify:i}=(0,m.d$)(),{playlist:n}=(0,m.oR)(),{formatMessage:l}=(0,v.Z)(),s=(0,r.useCallback)(async()=>{let r=!1;if(t&&"number"==typeof e){let i=await t.changePlaylist((0,_.PG)({operation:_.aL.DELETE,startPosition:e,endPosition:e+1}));i===_.pX.OK&&(r=!0)}if(r){if(t&&"number"==typeof e){var s;t.uuid===(null===(s=n.meta)||void 0===s?void 0:s.uuid)&&n.removeTracksFromItems(e,1)}}else i((0,a.jsx)(k.Q,{error:l({id:"playlist-errors.failed-to-remove-track"})}),{containerId:m.W$.ERROR})},[t,e,n,i,l]);return{canRemoveTrackFromPlaylist:!!(null==t?void 0:t.canUserChange),removeTrackFromPlaylist:s}};var x=i(35338),C=i(12670),y=i(11769),f=i(54272);let b=t=>{let{createPlaylist:e,modals:{fullscreenPlayerModal:i}}=(0,m.oR)(),{notify:n}=(0,m.d$)(),l=(0,y.useRouter)(),{formatMessage:o}=(0,v.Z)(),c=(0,f.W)(),u=(0,r.useCallback)(async t=>{var i;if(await e.create({title:o({id:"entity-names.new-playlist"}),visibility:s.we.PUBLIC}),!(null==e?void 0:null===(i=e.meta)||void 0===i?void 0:i.uuid))return null;let a=await c({playlist:e.meta,track:t,withPageRefresh:!1,withFailNotification:!1,withSuccessNotification:!1});if(a===_.pX.OK){let t=(0,m.SZ)("/playlist/".concat(e.meta.uuid));return e.reset(),t}return null},[c,e,o]);return(0,r.useCallback)(async()=>{let e=await u(t);e?(i.isOpened&&i.close(),l.push(e)):n((0,a.jsx)(_.wi,{}),{containerId:i.isOpened?m.W$.FULLSCREEN_ERROR:m.W$.ERROR})},[u,i,n,l,t])};var g=i(1918);let h=t=>{let{playlist:e,track:i}=t,n=(0,f.W)(),l=(0,r.useCallback)(()=>{n({playlist:e,track:i})},[n,e,i]);return(0,a.jsx)(c.sN,{onClick:l,children:(0,a.jsx)(g.Caption,{variant:"div",lineClamp:1,children:e.title})})};var N=i(77124),j=i.n(N);let T=()=>(0,a.jsx)(c.sN,{children:(0,a.jsx)(C.Shimmer,{className:j().shimmer})}),D=(0,n.Pi)(t=>{var e;let{track:i}=t,{user:n,contextMenuPlaylists:s,modals:{fullscreenPlayerModal:u}}=(0,m.oR)(),v=(0,d.SB)(i),{notify:_}=(0,m.d$)(),p=b(i),C=(0,r.useCallback)(()=>{if(!i.isLiked){v();return}_((0,a.jsx)(d.Yc,{track:i}),{containerId:u.isOpened?m.W$.FULLSCREEN_INFO:m.W$.INFO})},[u.isOpened,v,_,i]),y=(0,r.useCallback)(t=>{n.account.uid&&s.getData({userId:n.account.uid,page:t,pageSize:20})},[s,n.account.uid]),f=(0,r.useCallback)(async()=>{n.account.uid&&await s.getData({userId:n.account.uid,page:0,pageSize:20})},[s,n.account.uid]);(0,r.useEffect)(()=>()=>{s.reset()},[s]);let g=t=>{var e;let n=null==s?void 0:null===(e=s.items)||void 0===e?void 0:e[t];return n?(0,a.jsx)(h,{track:i,playlist:n},n.uuid):(0,a.jsx)(T,{})},N=(0,r.useMemo)(()=>{var t,e,i;return s.isLoaded?(0,a.jsx)(k.Wv,{className:(0,x.W)(j().virtualScroll,j().important),listClassName:j().content,customComponents:{Header:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.sN,{onClick:p,icon:(0,a.jsx)(o.J,{variant:"add"}),children:(0,a.jsx)(l.Z,{id:"playlist-actions.create-playlist"})}),(0,a.jsx)(c.sN,{onClick:C,children:(0,a.jsx)(l.Z,{id:"entity-names.liked-playlist"})})]})},itemContentCallback:g,totalCount:null!==(e=null==s?void 0:null===(t=s.pager)||void 0===t?void 0:t.total)&&void 0!==e?e:0,onGetDataByPage:y,pageSize:20,withFooter:!1,totalRequests:null!==(i=s.requests)&&void 0!==i?i:0,alwaysShowScrollbar:!0}):[...Array(7)].map((t,e)=>(0,a.jsx)(T,{},e))},[s.loadingState,null==s?void 0:null===(e=s.pager)||void 0===e?void 0:e.total,s.requests,y,v,p]);return(0,a.jsx)(c.v2,{offsetOptions:3,onShow:f,reference:(0,a.jsx)(c.sN,{isSubMenu:!0,icon:(0,a.jsx)(o.J,{variant:"addToPlaylist"}),children:(0,a.jsx)(l.Z,{id:"playlist-actions.add-track-to-playlist"})}),children:(0,a.jsx)("div",{className:j().root,children:N})})}),E=(0,n.Pi)(t=>{var e,i,n,v;let{track:_,reference:x,onOpenChange:C,open:y,placement:f,returnFocus:b}=t,{settings:g,currentTrackInfo:h,experiments:N,modals:{trackModal:j}}=(0,m.oR)(),T=(0,d.SB)(_),E=(0,d.KX)(_),S=(0,u.SB)(_.mainAlbum),L="".concat(m.aU.TRACK,"-").concat(_.id),A=g.layout===m.t8.Mobile,{href:I}=(0,m.qK)(_.url),{canRemoveTrackFromPlaylist:R,removeTrackFromPlaylist:M}=p(),{isPlaying:P,togglePlay:B}=(0,m.Qh)({seeds:null!==(v=null==_?void 0:_.seeds)&&void 0!==v?v:[],pageIdForFrom:m.Rh.RADIO,blockIdForFrom:L}),V=(0,r.useCallback)(()=>{P||B()},[P,B]),G=(0,r.useCallback)(()=>{var t;h.setTrack({id:_.id,albumId:(null===(t=_.mainAlbum)||void 0===t?void 0:t.id)||null,isUGC:_.isUGC||null}),j.open()},[h,_.id,_.isUGC,null===(e=_.mainAlbum)||void 0===e?void 0:e.id,j]);(0,m.ZP)(y);let U=null===(i=_.mainAlbum)||void 0===i?void 0:i.isPodcast,O=!_.isUGC&&!U,W=N.checkExperiment(m.pe.WebNextTrackAboutModal,"on")&&!A;return(0,a.jsxs)(c.v2,{reference:x,isMobile:A,title:_.title,description:_.artistsNames,placement:f,offsetOptions:10,open:y,onOpenChange:C,returnFocus:b,children:[!U&&(0,a.jsx)(k.xZ,{onClick:T,isLiked:_.isLiked}),O&&(0,a.jsx)(k.GQ,{onClick:V,variant:"track",disabled:!_.isAvailable}),!U&&(0,a.jsx)(k.ZL,{onClick:E,isDisliked:_.isDisliked}),!A&&(0,a.jsx)(D,{track:_}),(0,a.jsx)(k.zq,{disabled:_.isUGC||_.trackSource===s.zu.OWN_REPLACED_TO_UGC,shareLink:I,entityVariant:"track",entityTitle:_.title}),U&&S&&(0,a.jsx)(k.qq,{onClick:S,isLiked:null===(n=_.mainAlbum)||void 0===n?void 0:n.isLiked}),R&&(0,a.jsx)(c.sN,{onClick:M,icon:(0,a.jsx)(o.J,{variant:"bucket"}),children:(0,a.jsx)(l.Z,{id:"playlist-actions.remove-from-playlist"})}),W&&(0,a.jsx)(c.sN,{onClick:G,icon:(0,a.jsx)(o.J,{variant:"info"}),children:(0,a.jsx)(l.Z,{id:"track-modal.title"})})]})})},84563:function(t,e,i){"use strict";i.d(e,{f:function(){return v}});var a=i(8759),n=i(35338),r=i(33423),l=i(99616),s=i(65244),o=i(96213),c=i(84133),u=i(44285),d=i(5658),m=i(56805),k=i.n(m);let v=(0,r.Pi)(t=>{let{className:e,track:i,meta:r,chart:m,controls:v,playButtonCellRender:_,playContextParams:p,withLightning:x,...C}=t,{formatMessage:y}=(0,s.Z)(),{ref:f,intersectionPropertyId:b}=(0,c.Vf)(),{sonataState:{status:g}}=(0,c.oR)(),{isPlaying:h,isCurrent:N,togglePlay:j,restartPlay:T}=(0,c.qm)({playContextParams:p,entityId:i.albumId?"".concat(i.id,":").concat(i.albumId):i.id,sonataStatus:g}),D=(0,d.useTrackDisclaimer)({track:i,callback:j}),{sendPlaySearchFeedback:E}=(0,c.sA)(),[S,L]=(0,l.useState)(!1),A=(0,l.useCallback)(()=>{S||h||(L(!0),null==E||E()),D()},[D,h,S,E]),I=(0,l.useCallback)(()=>{h?T():A()},[h,T,A]),R=(0,l.useCallback)(t=>{2===t.detail?I():(0,o.m)(t,k().ripple)},[I]),M=null==_?void 0:_({onPlayButtonClick:A,isPlaying:h,isCurrent:N}),P=(0,l.useMemo)(()=>{var t;if(!i.isAvailable)return"".concat(y({id:"extra-explicit.play-unavailable"})," ").concat(i.artistsNames," ").concat(i.title);let e=x?y({id:"entity-names.popular-among-users"}):"";return"".concat(i.artistsNames," ").concat(i.title," ").concat(null!==(t=i.version)&&void 0!==t?t:""," ").concat(e)},[y,i.artistsNames,i.isAvailable,i.title,i.version,x]);return(0,a.jsxs)(u.Md,{ref:f,"aria-label":P,"data-intersection-property-id":b,onClick:R,className:(0,n.W)(k().root,{[k().root_disabled]:!i.isAvailable},e),...C,children:[m,M,r,v]})})},84270:function(t,e,i){"use strict";i.r(e),i.d(e,{TrackCard:function(){return N}});var a=i(8759),n=i(35338),r=i(33423),l=i(99616),s=i(65244),o=i(2814),c=i(71440),u=i(15527),d=i(14077),m=i(14581),k=i(96437),v=i(1918),_=i(53433),p=i(81446),x=i(43310),C=i(84133),y=i(44285),f=i(5658),b=i(50429),g=i(27462),h=i.n(g);let N=(0,r.Pi)(t=>{let{className:e,children:i,track:r,contentLinesCount:g,overrideContextType:N}=t,j=(0,C.x5)(),{formatMessage:T}=(0,s.Z)(),[D,E]=(0,l.useState)(!1),[S,L]=(0,l.useState)(!1),[A,I]=(0,l.useState)(!1),{sendLikeSearchFeedback:R,sendPlaySearchFeedback:M}=(0,C.sA)(),P=(0,x.SB)(r),{sonataState:{status:B}}=(0,C.oR)(),[V,G]=(0,l.useState)(!1),U=(0,l.useMemo)(()=>{var t;let e=T({id:"entity-names.track-name"},{trackName:r.title}),i=r.isLiked?T({id:"entity-names.has-your-like"}):"";return"".concat(e," ").concat(null!==(t=r.version)&&void 0!==t?t:""," ").concat(i)},[T,r.title,r.isLiked,r.version]),O=r.albumId?"".concat(r.id,":").concat(r.albumId):r.id,{isPlaying:W,togglePlay:w}=(0,C.qm)({playContextParams:{contextData:{type:c.Ak.Various,meta:{id:O},from:j,overrideContextType:N},queueParams:{index:0},loadContextMeta:!0},entityId:O,sonataStatus:B}),z=(0,f.useTrackDisclaimer)({track:r}),F=(0,f.useTrackDisclaimer)({track:r,callback:w}),Z=(0,l.useCallback)(t=>{z(t)},[z]),Y=(0,l.useCallback)(()=>{D||W||(E(!0),null==M||M()),F()},[W,D,M,F]),K=(0,l.useCallback)(()=>{S||r.isLiked||(L(!0),null==R||R()),P()},[P,S,R,r.isLiked]),H=(0,l.useCallback)(t=>{t.preventDefault(),t.stopPropagation()},[]),J=(0,l.useCallback)(()=>{I(!A),G(!A)},[A]),$=(0,l.useMemo)(()=>(0,a.jsxs)(v.Caption,{className:(0,n.W)(h().titleContainer,{[h().titleContainer_withVersion]:r.version}),variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,children:[(0,a.jsx)(v.Caption,{className:h().title,variant:"span",children:r.title}),r.version&&(0,a.jsx)(v.Caption,{className:h().version,variant:"span",children:" ".concat(r.version)})]}),[r.title,r.version]),q=(0,l.useMemo)(()=>(0,a.jsx)(b.TrackContextMenu,{placement:"bottom",track:r,onOpenChange:J,open:A,returnFocus:!1,reference:(0,a.jsx)(u.z,{onClick:H,className:(0,n.W)(h().menuButton,h().control),"aria-label":T({id:"interface-actions.context-menu"}),icon:(0,a.jsx)(m.J,{size:"xxs",variant:"more"}),size:"s",radius:"round",...(0,_.BA)(_.bG.track.TRACK_CONTEXT_MENU_BUTTON)})}),[T,H,J,A,r]),X=(0,l.useMemo)(()=>{if(r.isAvailable)return(0,a.jsx)(d.kk,{isVisible:A||V,className:h().controls,labelText:(0,a.jsx)(o.Z,{id:"entity-names.track"}),playControl:(0,a.jsx)(y.JM,{className:(0,n.W)(h().playButton,h().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",isPlaying:W,onClick:Y}),likeControl:(0,a.jsx)(y.dJ,{className:(0,n.W)(h().likeButton,h().control),isLiked:r.isLiked,onClick:K,variant:"default",size:"s",iconSize:"xxs"}),menuControl:q})},[q,K,Y,A,V,W,r.isAvailable,r.isLiked]),Q=(0,l.useMemo)(()=>(0,a.jsx)(k.Paper,{className:h().cover,radius:"l",withShadow:!0,onClick:Z,children:(0,a.jsxs)("div",{className:h().coverBlock,children:[(0,a.jsx)(y.BE,{className:h().image,src:r.coverUri,size:200,fit:"cover",alt:U,withAvatarReplace:!0,isAvailable:r.isAvailable,"aria-hidden":!0}),X]})}),[X,Z,r.coverUri,r.isAvailable,U]);return(0,a.jsx)(d.m7,{className:(0,n.W)(h().root,e),"aria-label":U,explicitMark:r.explicitMarkVariant,title:$,contentLinesCount:g,view:Q,description:(0,a.jsx)(p.jO,{className:h().artists,artists:r.artists,lineClamp:1,linkClassName:h().artistLink,captionSize:"s",withLink:!r.isUGC}),children:i})})},48765:function(t,e,i){"use strict";i.r(e),i.d(e,{TrackAlbum:function(){return C}});var a=i(8759),n=i(33423),r=i(99616),l=i(53433),s=i(59741),o=i(81360),c=i(35338),u=i(1918),d=i(44285),m=i(38993),k=i.n(m);let v=(0,n.Pi)(t=>{let{className:e,track:i,position:n,onPlayButtonClick:r,isPlaying:l,isCurrent:s}=t;return(0,a.jsxs)("div",{className:(0,c.W)(e,k().root,{[k().root_disabled]:!i.isAvailable,[k().root_playing]:l,[k().root_disliked]:i.isDisliked,[k().root_current]:s}),children:[i.isAvailable&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Up,{className:k().playingAnimation}),(0,a.jsx)(d.JM,{variant:"filled",className:k().playButton,iconClassName:k().playButtonIcon,isPlaying:l,onClick:r,iconSize:"xs"})]}),n&&(0,a.jsx)(u.Caption,{variant:"div",className:k().position,weight:"normal",type:"entity",size:"m",children:n})]})});var _=i(84563),p=i(31040),x=i.n(p);let C=(0,n.Pi)(t=>{let{track:e,albumArtists:i,position:n,playContextParams:c,withLightning:u}=t,d=(0,r.useCallback)(t=>(0,a.jsx)(v,{track:e,position:n,className:x().playButtonCell,...t}),[e,n]);return(0,a.jsx)(_.f,{track:e,withLightning:u,meta:(0,a.jsx)(o.TrackMeta,{albumArtists:i,track:e}),playButtonCellRender:d,controls:(0,a.jsx)(s.ControlsBar,{withLightning:u,track:e,className:x().controlsBarCell}),playContextParams:c,...(0,l.BA)(l.bG.track.TRACK_ALBUM)})})},63402:function(t,e,i){"use strict";i.r(e),i.d(e,{TrackChart:function(){return v}});var a=i(8759),n=i(33423),r=i(99616),l=i(53433),s=i(16121),o=i(44285),c=i(59741),u=i(81360),d=i(84563),m=i(72734),k=i.n(m);let v=(0,n.Pi)(t=>{var e,i;let{track:n,playContextParams:m}=t,v=(0,r.useCallback)(t=>(0,a.jsx)(o.Df,{isAvailable:n.isAvailable,isDisliked:n.isDisliked,coverUri:n.coverUri,title:n.title,className:k().playButtonCell,...t}),[n]);return(0,a.jsx)(d.f,{track:n,meta:(0,a.jsx)(u.TrackMeta,{track:n}),chart:(0,a.jsx)(s.kL,{className:k().chartCell,progress:null===(e=n.chart)||void 0===e?void 0:e.progress,position:null===(i=n.chart)||void 0===i?void 0:i.position,isDisliked:n.isDisliked,isDisabled:!n.isAvailable}),playButtonCellRender:v,controls:(0,a.jsx)(c.ControlsBar,{track:n,className:k().controlsBarCell}),playContextParams:m,...(0,l.BA)(l.bG.track.TRACK_CHART)})})},8425:function(t,e,i){"use strict";i.r(e),i.d(e,{TrackPlaylist:function(){return k}});var a=i(8759),n=i(33423),r=i(99616),l=i(53433),s=i(44285),o=i(59741),c=i(81360),u=i(84563),d=i(7525),m=i.n(d);let k=(0,n.Pi)(t=>{let{track:e,playContextParams:i,hasDuplicatesBefore:n,shouldCheckSelfIndex:d=!0,className:k=""}=t,v=(0,r.useCallback)(t=>(0,a.jsx)(s.Df,{isAvailable:e.isAvailable,isDisliked:e.isDisliked,coverUri:e.coverUri,title:e.title,className:m().playButtonCell,...t}),[e]);return(0,a.jsx)(u.f,{className:k,track:e,meta:(0,a.jsx)(c.TrackMeta,{track:e}),playButtonCellRender:v,hasDuplicatesBefore:n,controls:(0,a.jsx)(o.ControlsBar,{track:e,className:m().controlsBarCell}),playContextParams:i,shouldCheckSelfIndex:d,...(0,l.BA)(l.bG.track.TRACK_PLAYLIST)})})},60362:function(t,e,i){"use strict";i.r(e),i.d(e,{TrackPlaylistAddition:function(){return _}});var a=i(8759),n=i(33423),r=i(99616),l=i(65244),s=i(15527),o=i(14581),c=i(53433),u=i(44285),d=i(81360),m=i(84563),k=i(96580),v=i.n(k);let _=(0,n.Pi)(t=>{let{className:e,track:i,playContextParams:n,hasDuplicatesBefore:k,shouldCheckSelfIndex:_=!0,onClick:p}=t,{formatMessage:x}=(0,l.Z)(),C=(0,r.useCallback)(t=>(0,a.jsx)(u.Df,{isAvailable:i.isAvailable,isDisliked:i.isDisliked,coverUri:i.coverUri,title:i.title,className:v().playButtonCell,...t}),[i]),y=(0,r.useCallback)(()=>{null==p||p(i)},[i,p]),f=(0,r.useMemo)(()=>(0,a.jsx)("div",{className:v().controls,children:(0,a.jsx)(s.z,{className:v().button,variant:"text",size:"xs",radius:"xxxl","aria-label":x({id:"interface-actions.add-track-to-playlist"}),onClick:y,icon:(0,a.jsx)(o.J,{size:"xxs",variant:"add"})})}),[x,y]);return(0,a.jsx)(m.f,{className:e,track:i,meta:(0,a.jsx)(d.TrackMeta,{track:i}),playButtonCellRender:C,hasDuplicatesBefore:k,controls:f,playContextParams:n,shouldCheckSelfIndex:_,...(0,c.BA)(c.bG.track.TRACK_PLAYLIST_ADDITION)})})},17734:function(t,e,i){"use strict";i.r(e),i.d(e,{TrackPodcast:function(){return k}});var a=i(8759),n=i(33423),r=i(99616),l=i(53433),s=i(44285),o=i(59741),c=i(19708),u=i(84563),d=i(39206),m=i.n(d);let k=(0,n.Pi)(t=>{let{track:e,playContextParams:i,hasDuplicatesBefore:n,shouldCheckSelfIndex:d=!0,withPodcastName:k=!1}=t,v=(0,r.useCallback)(t=>(0,a.jsx)(s.Df,{isAvailable:e.isAvailable,isDisliked:e.isDisliked,coverUri:e.coverUri,title:e.title,className:m().playButtonCell,...t}),[e]);return(0,a.jsx)(u.f,{track:e,meta:(0,a.jsx)(c.PodcastMeta,{track:e,withPodcastName:k}),playButtonCellRender:v,hasDuplicatesBefore:n,controls:(0,a.jsx)(o.ControlsBar,{track:e,className:m().controlsBarCell}),playContextParams:i,shouldCheckSelfIndex:d,...(0,l.BA)(l.bG.track.TRACK_PODCAST)})})},77263:function(t){t.exports={root:"Disclaimer_root___gYw4",container:"Disclaimer_container__Tnsjy",title:"Disclaimer_title__9wHWb",text:"Disclaimer_text__bg6L1",link:"Disclaimer_link__iGciq",buttons:"Disclaimer_buttons__5idgM",button:"Disclaimer_button__OmGNo",shimmer:"Disclaimer_shimmer__vg_D2"}},13327:function(t){t.exports={root:"DisclaimerModal_root__sidbk",content:"DisclaimerModal_content___tRvp"}},85204:function(t){t.exports={message:"NotificationDislike_message__R2jfZ",text:"NotificationDislike_text__xmrnn",cover:"NotificationDislike_cover__bvqFM",image:"NotificationDislike_image__h0_EO"}},59781:function(t){t.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"ControlsBar_root__5HK2B",item:"ControlsBar_item__I_p99",contextMenu:"ControlsBar_contextMenu__8AFkQ",contextMenu_visible:"ControlsBar_contextMenu_visible__PYW8h",contextMenuWrapper:"ControlsBar_contextMenuWrapper__NHkn_",explicitMark:"ControlsBar_explicitMark__w9l80",lightning:"ControlsBar_lightning__GBl7O",icons:"ControlsBar_icons__yXi8q",duration:"ControlsBar_duration__RawSk",duration_hidden:"ControlsBar_duration_hidden__szTkk",controls:"ControlsBar_controls__3nXlz",dislikeIcon:"ControlsBar_dislikeIcon__ENXh_",controls_disabled:"ControlsBar_controls_disabled__5KRgJ",controls_disliked:"ControlsBar_controls_disliked__BT2of",likeIcon:"ControlsBar_likeIcon__mrNiz",popover:"ControlsBar_popover__WrYMt"}},73473:function(t){t.exports={card_root:"HorizontalCardContainer_root__YoAAP",artistCaption:"Meta_artistCaption__JESZi",link:"Meta_link__IFDBA",albumTitle:"Meta_albumTitle__mHeOs",root:"Meta_root__R8n1h",root_withSecondaryColor:"Meta_root_withSecondaryColor___uENY",root_disabled:"Meta_root_disabled__Dpx_M",albumLink:"Meta_albumLink__gASh6",artists:"Meta_artists__VnR52",explicitMark:"Meta_explicitMark__ocnCV",title:"Meta_title__GGBnH",titleContainer:"Meta_titleContainer__gDuXr",version:"Meta_version__c2sHU",root_disliked:"Meta_root_disliked__DrZ7_",text:"Meta_text__Y5uYH",metaContainer:"Meta_metaContainer__7i2dp",titleContainer_withVersion:"Meta_titleContainer_withVersion__n7MdY"}},70434:function(t){t.exports={card_root:"HorizontalCardContainer_root__YoAAP",explicitMark:"PodcastMeta_explicitMark__IstkP",dateWithName:"PodcastMeta_dateWithName__cKy0o",podcastName:"PodcastMeta_podcastName__iQeNK",soonDate:"PodcastMeta_soonDate__zGuG9",dateDisabled:"PodcastMeta_dateDisabled__DxjtJ",dateDisliked:"PodcastMeta_dateDisliked__95MlL"}},38993:function(t){t.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"PlayButtonWithPosition_root__H5FYg",playButton:"PlayButtonWithPosition_playButton__7cfDQ",playButtonIcon:"PlayButtonWithPosition_playButtonIcon___cLAL",playingAnimation:"PlayButtonWithPosition_playingAnimation__Hy5rC",position:"PlayButtonWithPosition_position__wk3OT",root_current:"PlayButtonWithPosition_root_current__FCDLJ",root_playing:"PlayButtonWithPosition_root_playing__RpnYU",root_disliked:"PlayButtonWithPosition_root_disliked__NIZzA",root_disabled:"PlayButtonWithPosition_root_disabled__PMV24"}},77124:function(t){t.exports={root:"ContextSubMenuAddToPlaylist_root__ZGm6z",content:"ContextSubMenuAddToPlaylist_content__isTx4",virtualScroll:"ContextSubMenuAddToPlaylist_virtualScroll__SJG3e",important:"ContextSubMenuAddToPlaylist_important__OUL53",shimmer:"ContextSubMenuAddToPlaylist_shimmer__uQHAL"}},56805:function(t){t.exports={root:"Track_root__dbDjD",root_disabled:"Track_root_disabled__53T42",ripple:"Track_ripple__f8iBh"}},27462:function(t){t.exports={root:"TrackCard_root__kIpe1",controls:"TrackCard_controls__E7Y3L",cover:"TrackCard_cover__tkVPB",coverBlock:"TrackCard_coverBlock__WdvvQ",image:"TrackCard_image__KsOFF",artists:"TrackCard_artists__wH48n",artistLink:"TrackCard_artistLink__aqLl7",titleContainer:"TrackCard_titleContainer__YCcZk",titleContainer_withVersion:"TrackCard_titleContainer_withVersion__fTRGu",title:"TrackCard_title__BVLuv",version:"TrackCard_version__7iPuj",playButton:"TrackCard_playButton__ukJDd",likeButton:"TrackCard_likeButton__Hejrk",menuButton:"TrackCard_menuButton__XtYLf",control:"TrackCard_control___huPc"}},31040:function(t){t.exports={playButtonCell:"TrackAlbum_playButtonCell__pLJte",controlsBarCell:"TrackAlbum_controlsBarCell__XUUCc"}},72734:function(t){t.exports={playButtonCell:"TrackChart_playButtonCell__cvY7u",controlsBarCell:"TrackChart_controlsBarCell__Xd5pn",chartCell:"TrackChart_chartCell__33_al"}},7525:function(t){t.exports={playButtonCell:"TrackPlaylist_playButtonCell__Q6YT_",controlsBarCell:"TrackPlaylist_controlsBarCell__6clda"}},96580:function(t){t.exports={playButtonCell:"TrackPlaylistAddition_playButtonCell__Ocnhq",controls:"TrackPlaylistAddition_controls__S346Y",button:"TrackPlaylistAddition_button__fsY9k"}},39206:function(t){t.exports={playButtonCell:"TrackPodcast_playButtonCell___b_gp",controlsBarCell:"TrackPodcast_controlsBarCell__dwTYj"}},96213:function(t,e,i){"use strict";i.d(e,{m:function(){return n}});var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.createRipple=void 0,a.createRipple=function(t,e,i){let a=i??t.currentTarget,n=document.createElement("span"),r=Math.max(a.clientWidth,a.clientHeight),l=r/2,s=a.getBoundingClientRect(),o=0===t.clientX?Math.round(s.width/2):t.clientX-s.left,c=0===t.clientY?Math.round(s.height/2):t.clientY-s.top;n.style.width=`${r}px`,n.style.height=`${r}px`,n.style.left=0===t.clientX?"0px":`${o-l}px`,n.style.top=`${c-l}px`,n.classList.add(e);let u=a.getElementsByClassName(e)[0];u&&u.remove(),a.insertBefore(n,a.firstChild)},a.__esModule;var n=a.createRipple}}]);