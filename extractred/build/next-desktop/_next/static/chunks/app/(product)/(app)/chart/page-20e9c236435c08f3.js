(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5117],{95130:function(t,e,n){Promise.resolve().then(n.bind(n,96393))},96393:function(t,e,n){"use strict";n.r(e);var r=n(8759),a=n(69658);e.default=()=>(0,r.jsx)(a.D,{})},13236:function(t,e,n){"use strict";n.d(e,{I7:function(){return _},b4:function(){return l},at:function(){return p},zU:function(){return h}});var r=n(8759),a=n(99616),o=n.t(a,2),i=n(44285);let l=t=>{let{children:e,title:n,className:o}=t,{setTitleElement:l,setTitle:s}=(0,a.useContext)(i.pI),u=(0,a.useRef)(null);return(0,a.useEffect)(()=>{(null==u?void 0:u.current)&&l(u),n&&s(n)},[u,n,l,s]),(0,a.useEffect)(()=>()=>{s("")},[s]),(0,r.jsx)("div",{ref:u,className:o,children:e})};var s=n(33423),u={810:t=>{t.exports=o}},c={},m={};(()=>{Object.defineProperty(m,"__esModule",{value:!0}),m.useScroll=void 0;let t=function t(e){var n=c[e];if(void 0!==n)return n.exports;var r=c[e]={exports:{}};return u[e](r,r.exports,t),r.exports}(810);m.useScroll=e=>{(0,t.useEffect)(()=>(window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e)}),[e])}})(),m.__esModule;var d=m.useScroll,f=n(84133);let g=t=>{let{element:e,scrollTop:n,isMobile:r}=t,a=.4*e.clientHeight;return n+(r?56:72)>=e.offsetTop+a},_=(0,s.Pi)(t=>{let{children:e,scrollElement:n,outerTitle:o="",headerElement:l,headerThreshold:s}=t,[u,c]=(0,a.useState)(o),[m,_]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1),{settings:C}=(0,f.oR)(),N=C.layout===f.t8.Mobile;(0,a.useLayoutEffect)(()=>{c(o)},[o]);let y=(0,a.useCallback)(()=>{if(!n)return;let t=null!=s?s:10,e=l?Number(l.offsetTop)-t:t;e<0&&(e=0),x(n.scrollTop>e),(null==m?void 0:m.current)&&p(g({element:null==m?void 0:m.current,scrollTop:n.scrollTop,isMobile:N}))},[n,s,l,m,N]);(0,a.useEffect)(()=>{(null==n?void 0:n.scrollTop)===0&&x(!1)},[null==n?void 0:n.scrollTop]),d(y);let S=(0,a.useMemo)(()=>({title:u,setTitle:c,titleElement:m,scrollElement:n,setTitleElement:_,isScrolledTitle:h,isScrolling:v}),[u,h,m,n,v]);return(0,r.jsx)(i.pI.Provider,{value:S,children:e})});n(41197);let h=()=>{let[t,e]=(0,a.useState)(null),n=(0,a.useCallback)(n=>{t!==n&&e(n)},[t]);return[t,n]},p=(t,e)=>{let n=(0,f.uK)();n.get(f.Xt);let r=(0,a.useMemo)(()=>{if(void 0!==e){let n=e-17;return{"--average-color-background":t,transform:"translateY(".concat(e>=17?0:n,"px)"),opacity:1}}return{}},[e,!1,t]),o=(0,a.useMemo)(()=>({"--average-color-background":t}),[t]);return[r,o]}},42769:function(t,e,n){"use strict";n.d(e,{h:function(){return a.h},n:function(){return r.n}});var r=n(22008),a=n(38828)},69658:function(t,e,n){"use strict";n.d(e,{D:function(){return v},_:function(){return y}});var r=n(8759),a=n(35338),o=n(33423),i=n(99616),l=n(65244),s=n(71440),u=n(12670),c=n(1918),m=n(70579),d=n(13236),f=n(95539),g=n(84133),_=n(44285),h=n(63049),p=n.n(h);let v=(0,o.Pi)(()=>{let{formatMessage:t}=(0,l.Z)(),{chart:e}=(0,g.oR)(),n=(0,g.k6)(),[o,h]=(0,d.zU)(),v=(0,g.x5)({pageId:g.Rh.CHART});e.loadingState===g.Gu.IDLE&&(0,i.use)(e.getTracks()),(0,g.NO)(e.loadingState===g.Gu.RESOLVE);let x=(0,i.useCallback)(t=>{let n=e.items[t];return n&&!e.isLoading&&e.playlistMeta?(0,r.jsx)(f._3,{track:n,playContextParams:{contextData:{type:s.Ak.Playlist,meta:{id:"".concat(e.playlistMeta.uid,":").concat(e.playlistMeta.kind)},from:v},queueParams:{index:t},loadContextMeta:!0}}):(0,r.jsx)(_.DX,{className:p().shimmerItem,variant:g.Lx.PLAYLIST})},[v,e.items,e.isLoading,e.playlistMeta]),C=(0,i.useMemo)(()=>({Footer:()=>(0,r.jsx)(_.$_,{className:p().footer})}),[]),N=(0,i.useMemo)(()=>e.title?(0,r.jsx)(c.Heading,{id:"collection-artists-header",variant:"h2",weight:"bold",size:"xl",lineClamp:1,children:e.title}):(0,r.jsx)(u.Shimmer,{className:p().shimmerTitle,radius:"l"}),[e.title]);return e.loadingState===g.Gu.REJECT?(0,r.jsx)(m.D,{}):(0,r.jsx)(g.Lh,{pageId:g.Rh.CHART,children:(0,r.jsx)(d.I7,{scrollElement:o,...e.title&&{outerTitle:e.title},children:(0,r.jsxs)("div",{className:p().root,children:[(0,r.jsx)(_.h4,{variant:"text",withForwardControl:!1,withBackwardControl:n.canBack,children:N}),(0,r.jsx)(_.Wv,{className:(0,a.W)(p().scrollContainer,p().important),listClassName:p().content,customComponents:C,totalCount:e.items.length,itemContentCallback:x,debounceDurationInMs:300,handleRef:h,context:{listAriaLabel:t({id:"entity-names.chart-tracks-list"})}})]})})})});var x=n(96555),C=n(96431);let N=x.V5.model("ChartPagePlaylistModel",{uuid:x.V5.string,uid:x.V5.number,kind:x.V5.number}),y=x.V5.model("ChartPageModel",{title:x.V5.maybeNull(x.V5.string),playlistMeta:x.V5.maybeNull(N),items:x.V5.array(f.le),loadingState:x.V5.enumeration(Object.values(g.Gu))}).actions(t=>({getTracks:(0,x.ls)(function*(){let{chartResource:e,logger:n}=(0,x.dU)(t);if(t.loadingState!==g.Gu.PENDING)try{t.loadingState=g.Gu.PENDING;let n=yield e.getChart();t.title=n.title,t.playlistMeta=(0,x.pj)({uuid:n.playContext.playlistUuid,uid:n.playContext.uid,kind:n.playContext.kind}),t.items=(0,x.pj)(n.chartPositions.map(t=>(0,f.S7)(t.track,t.chartPosition))),t.loadingState!==g.Gu.IDLE&&(t.loadingState=g.Gu.RESOLVE)}catch(e){!(e instanceof C.eY)&&(e instanceof Error||"string"==typeof e)&&n.error(e),t.loadingState!==g.Gu.IDLE&&(t.loadingState=g.Gu.REJECT)}})})).views(t=>({get isLoading(){return t.loadingState===g.Gu.PENDING||t.loadingState===g.Gu.IDLE},get isLoadingError(){return t.loadingState===g.Gu.REJECT}}))},70579:function(t,e,n){"use strict";n.d(e,{D:function(){return r.SomethingWentWrong}});var r=n(48471)},48471:function(t,e,n){"use strict";n.r(e),n.d(e,{SomethingWentWrong:function(){return _}});var r=n(8759),a=n(35338),o=n(33423),i=n(99616),l=n(2814),s=n(15527),u=n(14581),c=n(1918),m=n(42769),d=n(84133),f=n(29847),g=n.n(f);let _=(0,o.Pi)(t=>{let{className:e,withBackwardControl:n=!0}=t,o=(0,i.useCallback)(()=>{window.location.reload()},[]),{contentRef:f}=(0,d.$Y)();return(0,r.jsxs)("div",{className:(0,a.W)(g().root,e),children:[n&&(0,r.jsx)(m.n,{withBackwardFallback:"/",className:(0,a.W)(g().navigation,{[g().navigation_desktop]:!f}),withForwardControl:!1}),(0,r.jsxs)("div",{className:(0,a.W)(g().content,{[g().content_shrink]:!n}),children:[(0,r.jsx)(u.J,{className:g().icon,variant:"attention",size:"xxl"}),(0,r.jsx)(c.Heading,{className:(0,a.W)(g().title,g().important),variant:"h3",size:"xs",children:(0,r.jsx)(l.Z,{id:"error-messages.something-went-wrong"})}),(0,r.jsxs)(c.Caption,{className:(0,a.W)(g().text,g().important),variant:"span",type:"text",size:"l",weight:"normal",children:[!1,(0,r.jsx)(l.Z,{id:"page-error.try-to-restart-app"})]}),(0,r.jsx)(s.z,{onClick:o,className:g().button,role:"link",color:"secondary",size:"l",radius:"xxxl",children:(0,r.jsxs)(c.Caption,{type:"controls",variant:"span",size:"m",children:[!1,(0,r.jsx)(l.Z,{id:"page-error.restart-app-button"})]})})]})]})})},63049:function(t){t.exports={root:"ChartPage_root__JwQua",container:"ChartPage_container__mdNLA",scrollContent:"ChartPage_scrollContent__Hz3LW",scrollContainer:"ChartPage_scrollContainer__VJzA3",important:"ChartPage_important__HCgQ4",content:"ChartPage_content__adrCP",footer:"ChartPage_footer__JyfRg",shimmerItem:"ChartPage_shimmerItem__n3Z_s"}},29847:function(t){t.exports={root:"SomethingWentWrong_root__d77VJ",content:"SomethingWentWrong_content__8_YkJ",content_shrink:"SomethingWentWrong_content_shrink__GOR_7",navigation:"SomethingWentWrong_navigation__a8eMG",navigation_desktop:"SomethingWentWrong_navigation_desktop__WGGBX",icon:"SomethingWentWrong_icon__f15_y",title:"SomethingWentWrong_title__Kn89B",important:"SomethingWentWrong_important__namIb",text:"SomethingWentWrong_text__KEfGc",button:"SomethingWentWrong_button__dmh7t"}},54064:function(t,e,n){"use strict";n.d(e,{Ji:function(){return f}});var r,a,o,i,l=n(26688),s=n(99616),u=n(65244);(r=o||(o={})).formatDate="FormattedDate",r.formatTime="FormattedTime",r.formatNumber="FormattedNumber",r.formatList="FormattedList",r.formatDisplayName="FormattedDisplayName",(a=i||(i={})).formatDate="FormattedDateParts",a.formatTime="FormattedTimeParts",a.formatNumber="FormattedNumberParts",a.formatList="FormattedListParts";var c=function(t){var e=(0,u.Z)(),n=t.value,r=t.children,a=(0,l.__rest)(t,["value","children"]);return r(e.formatNumberToParts(n,a))};function m(t){var e=function(e){var n=(0,u.Z)(),r=e.value,a=e.children,o=(0,l.__rest)(e,["value","children"]),i="string"==typeof r?new Date(r||0):r;return a("formatDate"===t?n.formatDateToParts(i,o):n.formatTimeToParts(i,o))};return e.displayName=i[t],e}function d(t){var e=function(e){var n=(0,u.Z)(),r=e.value,a=e.children,o=(0,l.__rest)(e,["value","children"]),i=n[t](r,o);if("function"==typeof a)return a(i);var c=n.textComponent||s.Fragment;return s.createElement(c,null,i)};return e.displayName=o[t],e}c.displayName="FormattedNumberParts",c.displayName="FormattedNumberParts";var f=d("formatDate");d("formatTime"),d("formatNumber"),d("formatList"),d("formatDisplayName"),m("formatDate"),m("formatTime")}},function(t){t.O(0,[2498,7873,5455,8628,2008,6217,2015,3263,1476,6410,4025,4164,1744],function(){return t(t.s=95130)}),_N_E=t.O()}]);