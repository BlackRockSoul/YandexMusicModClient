(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4709],{48896:function(e,t,i){"use strict";i.d(t,{wV:function(){return v.AlbumEntityNameConsumer},KX:function(){return x},gI:function(){return P},lf:function(){return a},N:function(){return u},hh:function(){return c},Vt:function(){return d.useAlbumAnalyticsAppScreenName},jV:function(){return m.useAlbumDisclaimer},H0:function(){return v.useAlbumEntityName},ap:function(){return b.useMarkAlbumListenedClick},SB:function(){return p.useOnLikeClick},BV:function(){return A.useOnPinClick},IK:function(){return C.useOnPresaveClick}});var r,n,a,s,l=i(2685),o=i(58997);let u=e=>{let t=(0,o.GFX)(e.trailer);return(0,l.pj)({id:e.id,title:e.title,coverUri:e.coverUri,type:e.type,year:e.year,version:e.version,contentWarning:e.contentWarning,genre:e.genre,likesCount:e.likesCount,averageColor:(0,o.Usz)(e.derivedColors),isAvailable:!!e.available,trackPosition:e.trackPosition,disclaimers:e.disclaimers,trackCount:e.trackCount,availableForPremiumUsers:e.availableForPremiumUsers,availableForOptions:e.availableForOptions||[],bestAlbumTracks:e.bests,durationSec:e.durationSec,trailer:t,listeningFinished:!!e.listeningFinished})},c=e=>{let t=!1;e.presaveDate?t=!0:e.presaved&&(t=e.presaved);let{disclaimers:i}=(0,o.NuW)(e);return(0,l.pj)({id:e.id,contentWarning:e.contentWarning,disclaimers:i,isPresave:t,title:e.title,type:e.type,coverUri:e.coverUri,releaseDate:e.releaseDate})};(r=a||(a={})).TRACK="track",r.TEXT="text";var d=i(56307),m=i(17983),v=i(13508),b=i(23096),p=i(54323),A=i(65826),C=i(57134),h=i(52416);(n=s||(s={})).KIDS="kids",n.BOOKMATE="bookmate";var g=i(27980),_=i(19522),f=i(83768),k=i(91694);let y=l.V5.model("TrackPosition",{volume:l.V5.number,index:l.V5.number}),x=l.V5.compose(l.V5.model({id:l.V5.number,title:l.V5.string,type:l.V5.maybe(l.V5.enumeration(Object.values(h.V))),coverUri:l.V5.maybe(l.V5.string),averageColor:l.V5.maybe(l.V5.string),year:l.V5.maybe(l.V5.number),version:l.V5.maybe(l.V5.string),isAvailable:l.V5.optional(l.V5.boolean,!0),availableForOptions:l.V5.maybe(l.V5.array(l.V5.enumeration(Object.values(s)))),availableForPremiumUsers:l.V5.maybe(l.V5.boolean),bookmateOptionRequired:l.V5.maybe(l.V5.boolean),genre:l.V5.maybe(l.V5.string),trackPosition:l.V5.maybe(y),disclaimers:l.V5.maybe(l.V5.array(l.V5.string)),trackCount:l.V5.maybe(l.V5.number),bestAlbumTracks:l.V5.maybe(l.V5.array(l.V5.number)),trailer:l.V5.maybe(k.K8),durationSec:l.V5.maybe(l.V5.number),listeningFinished:l.V5.maybe(l.V5.boolean)}),k.fE,k.ie).views(e=>({get url(){return"/album/".concat(e.id)},get isLiked(){if(!(0,l.fh)(e))return!1;let{library:t}=(0,l.yj)(e);return null==t?void 0:t.isAlbumLiked(e.id)},get pinId(){return"".concat(g.Q.ALBUM_ITEM).concat(e.id)},get seeds(){return["album:".concat(e.id)]},get isAlbum(){return e.type===h.V.ALBUM||e.type===h.V.SINGLE},get isPodcast(){return e.type===h.V.PODCAST},get isAudiobook(){return e.type===h.V.AUDIOBOOK},get isFairyTale(){return e.type===h.V.FAIRY_TALE},get isNonMusic(){return this.isAudiobook||this.isPodcast||this.isFairyTale},get isPinned(){if(!(0,l.fh)(e))return!1;let{pinsCollection:t}=(0,l.yj)(e);return t.isPinned(this.pinId)},get newModalDisclaimerId(){if(e.disclaimers){var t;let i=null===(t=(0,o.V4d)(e.disclaimers,_.e.MODAL))||void 0===t?void 0:t[0];if(i){let{id:e}=i;return e}}return null},get isForeignAgent(){var i,r;if(!(0,l.fh)(e))return!1;let{experiments:t}=(0,l.yj)(e),n=t.checkExperiment(o.peG.WebNextNewExplicitApiModalFA,"on"),a=!!(null===(i=e.disclaimers)||void 0===i?void 0:i.includes(_.e.FOREIGN_AGENT));if(n&&e.disclaimers){let t=null===(r=(0,o.V4d)(e.disclaimers,_.e.FOREIGN_AGENT))||void 0===r?void 0:r[0];a=(null==t?void 0:t.type)===_.e.FOREIGN_AGENT}return a&&t.checkExperiment(o.peG.WebNextAgentPodcast,"on")},get isLegalRejected(){if(!(0,l.fh)(e))return!1;let{experiments:t}=(0,l.yj)(e),i=t.checkExperiment(o.peG.WebNextNewExplicitApiModalFA,"on");if(e.disclaimers){var n;let t=null===(n=(0,o.V4d)(e.disclaimers,_.e.MODAL))||void 0===n?void 0:n[0],r=i&&(null==t?void 0:t.type)===_.e.MODAL;return!e.isAvailable&&(r||e.disclaimers.includes(_.e.MODAL))}return!1},get isUnsafeLegal(){if(!(0,l.fh)(e))return!1;let{experiments:t}=(0,l.yj)(e),i=t.checkExperiment(o.peG.WebNextLegalUnsafeAlbum,"on"),r=t.checkExperiment(o.peG.WebNextNewExplicitApiModalFA,"on");if(e.disclaimers&&r){var a;let t=null===(a=(0,o.V4d)(e.disclaimers,_.e.MODAL))||void 0===a?void 0:a[0];return e.isAvailable&&(null==t?void 0:t.type)===_.e.MODAL}if(e.disclaimers&&i)return e.isAvailable&&e.disclaimers.includes(_.e.MODAL);return!1},get isAvailableOnlyForPlus(){var u;return!e.isAvailable&&(e.availableForPremiumUsers||!!(null===(u=e.availableForOptions)||void 0===u?void 0:u.includes(s.BOOKMATE)))},get shouldShowBooksBadge(){var c;return!!(e.bookmateOptionRequired||!e.availableForPremiumUsers&&(null===(c=e.availableForOptions)||void 0===c?void 0:c.includes(s.BOOKMATE)))}})).actions(e=>({toggleLike:(0,l.ls)(function*(){if(!(0,l.fh)(e))return;let{library:t,user:i}=(0,l.yj)(e);if(i.isAuthorized){let r=yield t.toggleAlbumLike({entityId:e.id,userId:i.account.uid});return(0,l.fh)(e)&&r===f.B.OK&&(e.isLiked?e.likePending():e.unlikePending()),r}}),togglePin:(0,l.ls)(function*(){if(!(0,l.fh)(e))return;let{pinsCollection:t,user:i}=(0,l.yj)(e);if(i.isAuthorized)return yield t.toggleAlbumPin({id:e.id},e.pinId)}),getKey:t=>"".concat(t,"_").concat(e.id),updateFinished:t=>{e.listeningFinished=t}})).named("BaseAlbum");var V=i(81891);let P=l.V5.compose(l.V5.model("BaseUpcomingAlbum",{id:l.V5.number,isPresave:l.V5.boolean,title:l.V5.maybe(l.V5.string),type:l.V5.maybe(l.V5.enumeration(Object.values(h.V))),coverUri:l.V5.maybe(l.V5.string),releaseDate:l.V5.maybe(l.V5.string)}),k.ie).actions(e=>{let t={presaveAlbum:(0,l.ls)(function*(t){let{usersResource:i,modelActionsLogger:r}=(0,l.dU)(e);try{e.isPresave=!0;let r=yield i.presaveAlbum(t);return r===V.Z.ERROR&&(e.isPresave=!1),r}catch(t){return e.isPresave=!1,r.error(t),V.Z.ERROR}}),removePresaveAlbum:(0,l.ls)(function*(t){let{usersResource:i,modelActionsLogger:r}=(0,l.dU)(e);try{e.isPresave=!1;let r=yield i.removePresaveAlbum(t);return r===V.Z.ERROR&&(e.isPresave=!0),r}catch(t){return e.isPresave=!0,r.error(t),V.Z.ERROR}}),toggleLike:(0,l.ls)(function*(){let i;if(!(0,l.fh)(e))return;let{user:r}=(0,l.yj)(e);if(r.account.uid)return i=e.isPresave?yield t.removePresaveAlbum({albumId:e.id,userId:r.account.uid}):yield t.presaveAlbum({albumId:e.id,userId:r.account.uid,likeAfterRelease:!0}),(0,l.fh)(e),i}),getKey:t=>"".concat(t,"_").concat(e.id)};return t})},56307:function(e,t,i){"use strict";i.d(t,{useAlbumAnalyticsAppScreenName:function(){return l}});var r=i(91207),n=i(3283),a=i(52416),s=i(58997);let l=e=>{let t=(0,s.RVp)();return(0,r.useMemo)(()=>{if(!t)return n.qU.AlbumScreen;switch(e){case a.V.PODCAST:return n.qU.PodcastScreen;case a.V.AUDIOBOOK:return n.qU.AudiobookScreen;default:return n.qU.AlbumScreen}},[e,t])}},17983:function(e,t,i){"use strict";i.d(t,{useAlbumDisclaimer:function(){return s}});var r=i(91207),n=i(10231),a=i(58997);let s=e=>{let{album:t,callback:i,shouldHistoryBack:s}=e,{disclaimer:l,modals:{disclaimerModal:o}}=(0,a.oR4)(),u=(0,r.useRef)(String((0,n.Z)())),c=(0,r.useRef)(!1),d=(0,a.uK4)().get(a.ceh);return(0,r.useEffect)(()=>{l.isUnsafeDisclaimerConfirmed&&l.id===u.current&&!c.current&&(null==i||i(),c.current=!0)},[i,l.isUnsafeDisclaimerConfirmed,l.id]),(0,r.useCallback)(async e=>{let r=d.get(a.BUb.ExEx),n=(null==t?void 0:t.isPodcast)?null==r?void 0:r.includes("".concat(a.coP.PODCAST,"_").concat(t.id)):null==r?void 0:r.includes("".concat(a.coP.ALBUM,"_").concat(null==t?void 0:t.id));if((null==t?void 0:t.isUnsafeLegal)&&n){null==i||i();return}if((null==t?void 0:t.isLegalRejected)||(null==t?void 0:t.isUnsafeLegal)){null==e||e.preventDefault(),await l.getDisclaimerData({entityId:t.id,entityType:t.isPodcast?a.coP.PODCAST:a.coP.ALBUM,newDisclaimerId:t.newModalDisclaimerId}),t.isUnsafeLegal&&l.setType(a.Gq.UNSAFE),l.setId(u.current),l.setEntityId(t.id),t.isPodcast?l.setEntityType(a.coP.PODCAST):l.setEntityType(a.coP.ALBUM),l.setShouldHistoryBack(!!s),c.current=!1,o.open();return}null==e||e.preventDefault(),null==i||i()},[null==t?void 0:t.id,null==t?void 0:t.isLegalRejected,null==t?void 0:t.isPodcast,null==t?void 0:t.isUnsafeLegal,null==t?void 0:t.newModalDisclaimerId,i,l,o,d,s])}},13508:function(e,t,i){"use strict";i.d(t,{AlbumEntityNameConsumer:function(){return r},useAlbumEntityName:function(){return o}});var r,n=i(91207),a=i(37184),s=i(52416),l=i(58997);(r||(r={})).PIN="pin";let o=(e,t)=>{let{formatMessage:i}=(0,a.Z)(),r=(0,l.RVp)();return(0,n.useMemo)(()=>{if(!r)return e===s.V.SINGLE?i({id:"entity-names.single"}):i({id:"entity-names.album"});switch(e){case s.V.SINGLE:return i({id:"entity-names.single"});case s.V.PODCAST:return i({id:"entity-names.podcast"});case s.V.AUDIOBOOK:if("pin"===t)return i({id:"entity-names.book"});return i({id:"entity-names.audio"});case s.V.FAIRY_TALE:return i({id:"entity-names.fairy-tale"});default:return i({id:"entity-names.album"})}},[e,i,r,t])}},23096:function(e,t,i){"use strict";i.d(t,{useMarkAlbumListenedClick:function(){return u}});var r=i(65301),n=i(91207),a=i(37184),s=i(26157),l=i(58997),o=i(29778);let u=()=>{let{user:e,album:t,fullscreenPlayer:i}=(0,l.oR4)(),{notify:u}=(0,l.d$W)(),{formatMessage:c}=(0,a.Z)();return(0,n.useCallback)(async()=>{var n,a;if(!t)return;let d=i.modal.isOpened?l.W$x.FULLSCREEN_ERROR:l.W$x.ERROR;if(!e.isAuthorized){u((0,r.jsx)(o.Q,{error:c({id:"authorization-messages.need-to-authorizate"})}),{containerId:d});return}if(await t.setListeningFinishedStatus()!==s.P.OK){u((0,r.jsx)(o.Q,{error:c({id:"error-messages.error-during-action"})}),{containerId:d});return}null===(a=t.meta)||void 0===a||a.updateFinished(!(null===(n=t.meta)||void 0===n?void 0:n.listeningFinished))},[c,u,t,e.isAuthorized,i.modal.isOpened])}},49283:function(e,t,i){"use strict";i.d(t,{C:function(){return s}});var r=i(52416),n=i(58997),a=i(29778);let s=e=>{if(!(0,n.RVp)())return a.j9.ALBUM;switch(e.type){case r.V.PODCAST:return a.j9.PODCAST;case r.V.AUDIOBOOK:return a.j9.AUDIOBOOK;case r.V.FAIRY_TALE:return a.j9.FAIRY_TALE;default:return a.j9.ALBUM}}},54323:function(e,t,i){"use strict";i.d(t,{useOnLikeClick:function(){return A}});var r=i(65301),n=i(79491),a=i(91207),s=i(37184),l=i(83768),o=i(58997),u=i(29778),c=i(96233),d=i(49283),m=i(52416);let v="/collection/albums",b=e=>{if(!(0,o.RVp)())return v;switch(e.type){case m.V.PODCAST:case m.V.AUDIOBOOK:return"/collection/non-music/liked";default:return v}},p=(0,c.Pi)(e=>{let{album:t,closeToast:i}=e,n=b(t),a=(0,d.C)(t);return(0,r.jsx)(u.AP,{closeToast:i,entityVariant:a,coverUri:t.coverUri,entityUrl:"/album/".concat(t.id),collectionUrl:n,entityTitle:t.title,isLiked:t.isLiked})}),A=e=>{let{user:t}=(0,o.oR4)(),{notify:i}=(0,o.d$W)(),[c,d]=(0,a.useState)(!1),{formatMessage:m}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!e)return;if(!t.isAuthorized){i((0,r.jsx)(u.Q,{error:m({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isLiked:!e.isLiked};d(!0);let s=await e.toggleLike();d(!1),s===l.B.OK?i((0,r.jsx)(p,{album:a}),{containerId:o.W$x.INFO}):i((0,r.jsx)(u.Q,{error:m({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[t.isAuthorized,c,e,m,i])}},65826:function(e,t,i){"use strict";i.d(t,{useOnPinClick:function(){return m}});var r=i(65301),n=i(79491),a=i(91207),s=i(37184),l=i(58997),o=i(29778),u=i(96233),c=i(49283);let d=(0,u.Pi)(e=>{let{album:t,closeToast:i}=e,n=(0,c.C)(t);return(0,r.jsx)(o.K1,{closeToast:i,entityVariant:n,coverUri:t.coverUri,entityUrl:"/album/".concat(t.id),entityTitle:t.title,isPinned:t.isPinned})}),m=e=>{let{user:t}=(0,l.oR4)(),{notify:i}=(0,l.d$W)(),{formatMessage:u}=(0,s.Z)(),[c,m]=(0,a.useState)(!1);return(0,a.useCallback)(async()=>{if(!t.isAuthorized){i((0,r.jsx)(o.Q,{error:u({id:"authorization-messages.need-to-authorizate"})}),{containerId:l.W$x.ERROR});return}if(c)return;let a={...(0,n.ZN)(e),isPinned:!e.isPinned};m(!0);let s=await e.togglePin();m(!1),s?i((0,r.jsx)(d,{album:a}),{containerId:l.W$x.INFO}):i((0,r.jsx)(o.Q,{error:u({id:"error-messages.error-during-action"})}),{containerId:l.W$x.ERROR})},[e,u,i,c,t.isAuthorized])}},57134:function(e,t,i){"use strict";i.d(t,{useOnPresaveClick:function(){return d}});var r=i(65301),n=i(79491),a=i(91207),s=i(37184),l=i(81891),o=i(58997),u=i(29778);let c=e=>{let{upcomingAlbum:t,closeToast:i}=e;return(0,r.jsx)(u.V1,{closeToast:i,albumTitle:t.title,coverUri:t.coverUri,entityTitle:t.title,isPresave:t.isPresave})},d=e=>{let{user:t}=(0,o.oR4)(),{notify:i}=(0,o.d$W)(),[d,m]=(0,a.useState)(!1),{formatMessage:v}=(0,s.Z)();return(0,a.useCallback)(async()=>{if(!t.isAuthorized){i((0,r.jsx)(u.Q,{error:v({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$x.ERROR});return}if(d)return;let a={...(0,n.ZN)(e),isPresave:!e.isPresave};m(!0);let s=await e.toggleLike();m(!1),s===l.Z.OK?i((0,r.jsx)(c,{upcomingAlbum:a}),{containerId:o.W$x.INFO}):i((0,r.jsx)(u.Q,{error:v({id:"error-messages.error-during-action"})}),{containerId:o.W$x.ERROR})},[t.isAuthorized,d,e,i,v])}},49724:function(e,t,i){"use strict";i.d(t,{kL:function(){return l.Chart},BH:function(){return s},W5:function(){return n}});var r=i(2685);let n=e=>(0,r.pj)({position:e.position,progress:e.progress});var a=i(43068);let s=r.V5.model("Chart",{position:r.V5.maybe(r.V5.number),progress:r.V5.maybe(r.V5.enumeration(Object.values(a.h)))});var l=i(74539)},74539:function(e,t,i){"use strict";i.d(t,{Chart:function(){return b}});var r=i(65301),n=i(9695),a=i(96233),s=i(91207),l=i(37184),o=i(55975),u=i(43068),c=i(82036),d=i(81437),m=i(82605),v=i.n(m);let b=(0,a.Pi)(e=>{let{progress:t,withIcon:i,position:a,weight:m="normal",isDisliked:b,isDisabled:p,className:A,positionClassName:C}=e,{formatMessage:h}=(0,l.Z)(),g=t||i,_=(0,s.useMemo)(()=>{switch(t){case u.h.UP:return"chartUp";case u.h.DOWN:return"chartDown";case u.h.NEW:return"chartNew";default:return"chartSame"}},[t]),f=(0,s.useMemo)(()=>{switch(t){case u.h.UP:return h({id:"entity-names.chart-up"});case u.h.DOWN:return h({id:"entity-names.chart-down"});case u.h.NEW:return h({id:"entity-names.chart-new"});default:return h({id:"entity-names.chart-same"})}},[h,t]);return(0,r.jsxs)("div",{className:(0,n.W)(v().root,A),...(0,o.BA)(o.FK.chart.CHART_PROGRESS),children:[(0,r.jsx)(d.Caption,{variant:"div",weight:m,type:"entity",size:"m",className:(0,n.W)(v().position,C,{[v().position_disliked]:b,[v().position_disabled]:p}),children:a}),g&&(0,r.jsx)(c.Icon,{variant:_,size:"xxs","aria-label":f,className:(0,n.W)(v().progress,v()["progress_".concat(t)],{[v().progress_disliked]:b,[v().progress_disabled]:p}),...(0,o.BA)(o.FK.chart.CHART_PROGRESS_ICON)})]})})},54709:function(e,t,i){"use strict";i.d(t,{rf:function(){return h.AlbumCard},oK:function(){return g.AlbumContextMenu},y2:function(){return r.y},ug:function(){return A},wk:function(){return y},ZA:function(){return x.SearchAlbumCard},vK:function(){return V.UpcomingAlbumCard},W9:function(){return C},ym:function(){return l},re:function(){return u},cO:function(){return d},wJ:function(){return m},wq:function(){return p}});var r=i(15808),n=i(2685),a=i(48896),s=i(9096);let l=e=>{let t=e.artists.map(e=>(0,s.d)(e));return(0,n.pj)({...(0,a.N)(e),artists:t})};var o=i(49724);let u=(e,t)=>(0,n.pj)({...l(e),chart:t&&(0,o.W5)(t)});var c=i(58997);let d=e=>{var t,i;let{album:r,artists:a,bookmateOptionRequired:l,chart:o,likesCount:u,trailer:d}=e,{available:m,disclaimers:v}=(0,c.NuW)(r);return(0,n.pj)({id:r.id,title:r.title,coverUri:null===(t=r.cover)||void 0===t?void 0:t.uri,type:r.albumType,contentWarning:r.contentWarning,disclaimers:v,artists:null==a?void 0:a.map(e=>(0,s.tR)({artist:e})),averageColor:null===(i=r.cover)||void 0===i?void 0:i.color,isAvailable:m,likesCount:u,bookmateOptionRequired:l,chart:o,trailer:(0,c.GFX)(d),listeningFinished:r.listeningFinished})},m=e=>{let{album:t,artists:i,likesCount:r,chart:a}=e;return(0,n.pj)({...d({album:t,artists:i,likesCount:r}),chart:a&&(0,o.W5)(a)})};var v=i(99678),b=i(91207);(0,b.cache)(async e=>{try{let{container:t,backendHostTld:i,locale:r,host:n,fullUrl:a,requestUrl:s}=await (0,c.rbP)(),l=t.get(c.qV$),o=await l.getAlbumWithTracksIds({albumId:Number(e),resumeStream:!1});return"not-found"===o.error&&(0,v.notFound)(),{album:o,backendHostTld:i,locale:r,host:n,fullUrl:a,requestUrl:s}}catch(e){return{album:void 0,backendHostTld:"",locale:null,host:"",fullUrl:null,requestUrl:null}}});let p=e=>{var t;let i=null===(t=e.artists)||void 0===t?void 0:t.map(e=>(0,s.tR)({artist:e}));return(0,n.pj)({...(0,a.hh)(e),artists:i})},A=a.KX.props({artists:n.V5.maybe(n.V5.array(s.Go)),chart:n.V5.maybe(o.BH)}).views(e=>({get artistNames(){var t;return null===(t=e.artists)||void 0===t?void 0:t.map(e=>e.name).join(", ")},get artistIds(){var i;return null===(i=e.artists)||void 0===i?void 0:i.map(e=>e.id)},get artistName(){var r,n,a,s;if(null===(n=e.artists)||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.various)return;return null===(s=e.artists)||void 0===s?void 0:null===(a=s[0])||void 0===a?void 0:a.name}})),C=a.gI.props({artists:n.V5.maybe(n.V5.array(s.Go))}).views(e=>({get artistNames(){var t;return null===(t=e.artists)||void 0===t?void 0:t.map(e=>e.name).join(", ")}}));var h=i(75318),g=i(68768),_=i(65301),f=i(29778);let k=e=>{let{forwardRef:t,isShimmerVisible:i,isShimmerActive:r,title:n,description:a,albums:s,className:l,containerClassName:o,headerClassName:u,viewAllActionLink:c,headingRef:d,headingVariant:m,...v}=e;return(0,_.jsx)(f.HY,{isShimmerVisible:i,isShimmerActive:r,className:l,headerClassName:u,containerClassName:o,ref:t,title:n,description:a,viewAllActionLink:c,headingRef:d,headingVariant:m,...v,children:null==s?void 0:s.map(e=>(0,_.jsx)(h.AlbumCard,{album:e,contentLinesCount:3},e.id))})},y=(0,b.forwardRef)((e,t)=>(0,_.jsx)(k,{forwardRef:t,...e}));var x=i(87582),V=i(51986)},15808:function(e,t,i){"use strict";var r,n;i.d(t,{y:function(){return r}}),(n=r||(r={})).PAGE="PAGE",n.CARD="CARD"},75318:function(e,t,i){"use strict";i.r(t),i.d(t,{AlbumCard:function(){return N}});var r=i(65301),n=i(9695),a=i(96233),s=i(91207),l=i(37184),o=i(3283),u=i(55975),c=i(19489),d=i(52416),m=i(28257),v=i(82036),b=i(43998),p=i(81437),A=i(48896),C=i(9096),h=i(49724),g=i(58997),_=i(29778),f=i(15808);let k={mainAxis:-26,alignmentAxis:-16},y={isEnabled:!0,width:20,height:8,tipRadius:2,fill:"var(--ym-background-color-primary-enabled-tooltip)"};var x=i(68768),V=i(29664),P=i.n(V);let N=(0,a.Pi)(e=>{let{className:t,children:i,album:a,contentLinesCount:V,withLikesCount:N,withChart:j,withAddition:O=!0,withArtistName:L=!0}=e,{ref:B,intersectionPropertyId:U}=(0,g.VfV)(),{trailer:R,advert:M,settings:{isMobile:I},experiments:E}=(0,g.oR4)(),{from:w,utmLink:T}=(0,g.MhG)({contextId:a.id,contextType:c.A.Album,utmForPageIds:a.artistIds}),{notify:S}=(0,g.d$W)(),{formatMessage:D}=(0,l.Z)(),{sendLikeSearchFeedback:W,sendNavigateSearchFeedback:F,sendPlaySearchFeedback:z}=(0,g.sAF)(),[K,G]=(0,s.useState)(!1),[$,Z]=(0,s.useState)(!1),[q,H]=(0,s.useState)(!1),Q=(0,g.zxW)(),Y=(0,A.SB)(a),X=(0,A.BV)(a),J=(0,g.s0h)(a.url),ee=(0,g.s0h)(a.url,!0),[et,ei]=(0,s.useState)(!1),er=(0,g.FTC)(),[en,ea]=(0,s.useState)(!1),es=a.isAvailableOnlyForPlus&&!a.isUnsafeLegal&&!a.isLegalRejected,el=E.checkExperiment(g.peG.WebNextBookmatePlusPaywall,"on"),eo=es&&!I&&el,eu=E.checkExperiment(g.peG.WebNextShowAudiobookCoverForFreemium,"on"),ec=a.isAvailable||eo||eu&&a.isAudiobook,ed=(0,s.useCallback)(e=>{if(e.stopPropagation(),M.isAdvertShown){e.preventDefault(),S((0,r.jsx)(_.vd,{}),{containerId:g.W$x.INFO});return}R.openAlbumTrailer(a.id),er(o.OB.Album,String(a.id))},[a.id,er,R,M.isAdvertShown,S]),em=a.type===d.V.SINGLE?D({id:"entity-names.single"}):void 0,ev=(0,g.tNA)([a.year,em]),eb=(0,A.H0)(a.type),ep=(0,s.useMemo)(()=>{var e;let t=a.isLiked?D({id:"entity-names.has-your-like"}):"";return"".concat(eb," ").concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:""," ").concat(t)},[eb,D,a.title,a.isLiked,a.version]),{isPlaying:eA,togglePlay:eC}=(0,g.qmq)({playContextParams:{contextData:{type:c.A.Album,meta:{id:a.id},from:w,utmLink:T},loadContextMeta:!0}}),eh=(0,A.jV)({album:a,callback:J}),eg=(0,A.jV)({album:a,callback:ee}),e_=(0,A.jV)({album:a,callback:eC}),ef=(0,C.ik)(eg,eh),ek=(0,s.useCallback)(e=>{Q({to:o.qU.AlbumScreen}),null==F||F(),ef(e)},[Q,F,ef]),ey=(0,s.useCallback)(e=>{ek(e)},[ek]),ex=(0,s.useCallback)(()=>{$||eA||(Z(!0),null==z||z()),e_()},[eA,$,z,e_]),eV=(0,s.useCallback)(()=>{K||a.isLiked||(G(!0),null==W||W()),Y()},[a.isLiked,Y,K,W]),eP=(0,s.useCallback)(()=>{H(!q),ei(!q)},[q]),eN=(0,s.useMemo)(()=>{var e;return(0,r.jsxs)(p.Caption,{className:(0,n.W)(P().title,{[P().title_withVersion]:a.version,[P().title_withChart]:j}),variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,...(0,u.BA)(u.bG.album.ALBUM_TITLE),children:[(0,r.jsx)(_.rU,{"aria-label":"".concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:""),className:P().titleLink,href:a.url,onClick:ek,...(0,u.BA)(u.bG.album.ALBUM_TITLE_LINK),children:a.title}),a.version&&(0,r.jsx)(p.Caption,{className:P().version,variant:"span",...(0,u.BA)(u.bG.album.ALBUM_VERSION),children:" ".concat(a.version)})]})},[a.title,a.url,a.version,ek,j]),ej=(0,s.useMemo)(()=>{var e;return(0,r.jsx)(_.rU,{href:a.url,onClick:ek,children:"".concat(a.title," ").concat(null!==(e=a.version)&&void 0!==e?e:"")})},[a.title,a.url,a.version,ek]),eO=(0,s.useMemo)(()=>{var e;if(null==a?void 0:null===(e=a.trailer)||void 0===e?void 0:e.isAvailable)return(0,r.jsx)(_.xf,{children:(0,r.jsx)(_.eP,{className:(0,n.W)(P().trailerButton,P().control),radius:"round",size:"s",iconSize:"xxs",onClick:ed},a.getKey("TrailerButton"))},a.getKey("AlbumCardTrailerTooltip"))},[a,ed]),eL=(0,s.useMemo)(()=>(0,r.jsx)(x.AlbumContextMenu,{album:a,onOpenChange:eP,open:q,className:(0,n.W)(P().menuButton,P().control),icon:(0,r.jsx)(v.Icon,{size:"xxs",variant:"more"}),size:"s",variant:f.y.CARD,...(0,u.BA)(u.bG.album.ALBUM_CONTEXT_MENU_BUTTON)},a.getKey("AlbumContextMenu")),[a,eP,q]),eB=(0,s.useCallback)(()=>(0,r.jsx)(_.JM,{className:(0,n.W)(P().playButton,P().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",onClick:ex,isPlaying:eA,disabled:eo},a.getKey("PlayButton")),[eo,a,eA,ex]),eU=(0,s.useMemo)(()=>eo?(0,r.jsx)(_.pl,{className:P().buyPlusPopover,buttonText:D({id:"interface-actions.more-details"}),isNested:!0,placement:"top-start",isOpened:en,onOpenChange:ea,textVariant:"album",albumTextVariant:a.type,arrowProps:y,offsetOptions:k,renderChildren:eB}):eB(),[eo,en,ea,D,eB,a.type]),eR=(0,s.useMemo)(()=>{if(!eo)return(0,r.jsx)(_.dJ,{className:(0,n.W)(P().likeButton,P().control),isLiked:a.isLiked,onClick:eV,variant:"default",size:"s",iconSize:"xxs"},a.getKey("LikeButton"))},[a,eo,eV]),eM=(0,s.useMemo)(()=>{if(!eo)return(0,r.jsx)(_.RT,{onClick:X,isPinned:a.isPinned,className:(0,n.W)(P().pinButton,P().control),withRipple:!1,isDisabled:eo},a.getKey("PinButton"))},[a,eo,X]),eI=(0,s.useMemo)(()=>{if(a.isAvailable||eo)return(0,r.jsx)(m.kk,{isVisible:q||et||en,className:P().controls,playControl:eU,likeControl:eR,menuControl:eL,pinControl:eM,trailerControl:eO})},[a,q,et,eL,eO,en,eU,eR,eM,eo]),eE=(0,s.useMemo)(()=>(0,r.jsx)(b.Paper,{className:P().cover,radius:"s",withShadow:!0,...(0,u.BA)(u.bG.album.ALBUM_CARD),children:(0,r.jsxs)("div",{className:P().coverBlock,onClick:ey,children:[(0,r.jsx)(_.BE,{className:P().image,src:a.coverUri,size:200,fit:"cover",alt:ep,withAvatarReplace:!0,isAvailable:ec,"aria-hidden":!0}),es&&(0,r.jsx)(v.Icon,{variant:"plusBadge",className:P().plusBadge}),eI]})}),[ey,a.coverUri,ec,ep,eI,es]);return(0,r.jsxs)(m.m7,{ref:B,className:(0,n.W)(P().root,{[P().root_withChart]:j},t),"aria-label":ep,explicitMarkComponent:a.albumExplicitMark&&(0,r.jsx)(_.$i,{className:P().explicitMark,getDescriptionTexts:a.getDescriptionTexts,variant:a.albumExplicitMark},a.getKey("AlbumCardExplicitMarkIcon")),title:eN,srTitle:ej,"data-intersection-property-id":U,contentLinesCount:V,view:eE,description:L&&(0,r.jsx)(C.jO,{className:P().artists,artists:a.artists,lineClamp:1,linkClassName:P().artistLink,captionSize:"s"},a.getKey("description")),chart:j&&a.chart&&(0,r.jsx)(h.kL,{withIcon:!0,className:P().chart,position:a.chart.position,progress:a.chart.progress},a.getKey("chart")),...(0,u.BA)(u.bG.album.ALBUM_ITEM),children:[O&&ev&&(0,r.jsx)(p.Caption,{className:P().addition,variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:1,children:ev}),N&&!!a.actualLikesCount&&(0,r.jsx)(_.DB,{className:P().likeTextButton,ariaLabel:D({id:"entity-names.likes-counter"},{counter:a.actualLikesCount}),likesCount:a.actualLikesCount,isLiked:a.isLiked,handleLikeClick:Y}),i]})})},68768:function(e,t,i){"use strict";i.d(t,{AlbumContextMenu:function(){return p}});var r=i(65301),n=i(96233),a=i(91207),s=i(37184),l=i(3283),o=i(55975),u=i(19489),c=i(92154),d=i(48896),m=i(58997),v=i(29778),b=i(15808);let p=(0,n.Pi)(e=>{var t,i;let{album:n,onOpenChange:p,open:A,wrapperClassName:C,variant:h,...g}=e,{shouldShowBuySubscriptionModal:_,showBuySubscriptionModal:f}=(0,m.vLf)(),{settings:{isMobile:k},trailer:y,advert:x,user:V}=(0,m.oR4)(),P=(0,d.SB)(n),N=(0,d.BV)(n),{notify:j}=(0,m.d$W)(),O=(0,m.FTC)(),L="".concat(m.aUg.ALBUM,"-").concat(n.id),B=(0,m.RVp)()&&n.isNonMusic,U=B&&h===b.y.PAGE,{formatMessage:R}=(0,s.Z)(),M=(0,d.ap)(),{href:I}=(0,m.qKB)(n.url),{isPlaying:E,togglePlay:w}=(0,m.QhE)({seeds:null!==(i=null==n?void 0:n.seeds)&&void 0!==i?i:[],pageIdForFrom:m.Rhz.RADIO,blockIdForFrom:L}),{utmLink:T}=(0,m.MhG)({blockId:m.aUg.ALBUM,contextType:u.A.Album,contextId:null==n?void 0:n.id}),S=(0,a.useCallback)(()=>{if(_&&V.isAuthorized){f();return}if(x.isAdvertShown){j((0,r.jsx)(v.vd,{}),{containerId:m.W$x.INFO});return}E||w()},[_,V.isAuthorized,x.isAdvertShown,E,f,j,w]),D=(0,a.useCallback)(()=>{if(_){f();return}if(x.isAdvertShown){j((0,r.jsx)(v.vd,{}),{containerId:m.W$x.INFO});return}y.setUtmLink(T),y.openAlbumTrailer(n.id),O(l.OB.Album,String(n.id))},[_,x.isAdvertShown,y,T,n.id,O,f,j]);(0,m.ZP4)(A);let W=(0,a.useMemo)(()=>{if(!k)return(0,r.jsx)(v.Zd,{onClick:N,isPinned:n.isPinned,disabled:!n.isAvailable})},[n.isAvailable,n.isPinned,N,k]),F=(0,a.useMemo)(()=>B?(0,r.jsx)(v.qq,{onClick:P,isLiked:null==n?void 0:n.isLiked,disabled:!n.isAvailable,albumType:n.type}):(0,r.jsx)(v.xZ,{onClick:P,isLiked:null==n?void 0:n.isLiked,disabled:!n.isAvailable}),[n.isAvailable,null==n?void 0:n.isLiked,n.type,P,B]),z=(0,a.useMemo)(()=>{var e;if(!B&&(null===(e=n.trailer)||void 0===e?void 0:e.isAvailable))return(0,r.jsx)(v.NB,{onClick:D,disabled:!n.isAvailable})},[n.isAvailable,null===(t=n.trailer)||void 0===t?void 0:t.isAvailable,D,B]),K=(0,a.useMemo)(()=>{if(!B)return(0,r.jsx)(v.GQ,{onClick:S,disabled:!n.isAvailable,variant:m.xIL.ALBUM,onOpenMenuChange:p})},[n.isAvailable,S,B,p]),G={variant:m.GGO.ALBUM,id:n.id,title:n.title,path:n.url,albumArtistName:n.artistName};return(0,r.jsxs)(c.v2,{isMobile:k,offsetOptions:10,open:A,onOpenChange:p,ariaLabel:R({id:"interface-actions.context-menu"}),wrapperClassName:C,containerProps:(0,o.BA)(o.bG.album.ALBUM_CONTEXT_MENU),...g,children:[k&&(0,r.jsx)(v.TF,{getDescriptionTexts:n.getDescriptionTexts,entityId:n.id}),W,F,z,K,U&&(0,r.jsx)(v.RY,{onClick:M,isFinished:n.listeningFinished}),(0,r.jsx)(v.zq,{shareLink:I,entityMeta:G})]})})},87582:function(e,t,i){"use strict";i.d(t,{SearchAlbumCard:function(){return A}});var r=i(65301),n=i(9695),a=i(96233),s=i(91207),l=i(55975),o=i(19489),u=i(60383),c=i(82036),d=i(81437),m=i(48896),v=i(9096),b=i(58997),p=i(29778);let A=(0,a.Pi)(e=>{var t;let{className:i,album:a,pageId:A}=e,{ref:C,intersectionPropertyId:h}=(0,b.VfV)(),{from:g}=(0,b.MhG)({pageId:A}),_=(0,b.s0h)(a.url),{isPlaying:f,isCurrent:k,togglePlay:y}=(0,b.qmq)({playContextParams:{contextData:{type:o.A.Album,meta:{id:a.id},from:g},loadContextMeta:!0}}),x=(0,m.jV)({album:a,callback:_}),V=(0,m.jV)({album:a,callback:y}),P=(0,s.useCallback)(e=>{(0,u.m)(e,p.$C.ripple),x(e)},[x]),N=(0,s.useCallback)(e=>{x(e)},[x]),j=(0,s.useCallback)(e=>(0,r.jsx)(p.Df,{isAvailable:a.isAvailable,isDisliked:!1,coverUri:a.coverUri,title:a.title,className:p.$C.playButtonCell,...e}),[a]),O=null==j?void 0:j({onPlayButtonClick:V,isPlaying:f,isCurrent:k}),L=(0,s.useMemo)(()=>a.url&&a.isAvailable?(0,r.jsx)(p.rU,{className:(0,n.W)(p.$C.text,p.$C.titleLink),href:a.url,onClick:N,children:a.title}):(0,r.jsx)(d.Caption,{className:(0,n.W)(p.$C.text,p.$C.titleText),size:"m",variant:"div",type:"text",children:a.title}),[a.isAvailable,a.title,a.url,N]),B=(0,s.useCallback)((e,t)=>{var i;return(null===(i=a.artists)||void 0===i?void 0:i.length)?(0,r.jsx)(v.jO,{linkClassName:e,captionClassName:t,artists:a.artists,lineClamp:1,withLink:a.isAvailable}):null},[a.artists,a.isAvailable]);return(0,r.jsxs)(p.Md,{ref:C,"data-intersection-property-id":h,className:(0,n.W)(p.$C.root,{[p.$C.root_disabled]:!a.isAvailable},i),"aria-label":"".concat(a.artistNames," ").concat(a.title," ").concat(null!==(t=a.version)&&void 0!==t?t:""),onClick:P,...(0,l.BA)(l.bG.album.SEARCH_ALBUM_CARD),children:[O,(0,r.jsx)(p.u,{isDisabled:!a.isAvailable,version:a.version,title:L,artistsComponent:B,getDescriptionTexts:a.getDescriptionTexts,explicitMarkVariant:a.albumExplicitMark}),(0,r.jsx)("div",{className:p.$C.controlsBarCell,children:(0,r.jsx)(c.Icon,{className:p.$C.buttonArrow,variant:"arrowRight",size:"xs"})})]})})},51986:function(e,t,i){"use strict";i.d(t,{UpcomingAlbumCard:function(){return _}});var r=i(65301),n=i(9695),a=i(96233),s=i(91207),l=i(37184),o=i(44729),u=i(78372),c=i(28257),d=i(82036),m=i(43998),v=i(81437),b=i(48896),p=i(9096),A=i(58997),C=i(29778),h=i(25629),g=i.n(h);let _=(0,a.Pi)(e=>{let{className:t,children:i,upcomingAlbum:a,contentLinesCount:h}=e,{ref:_,intersectionPropertyId:f}=(0,A.VfV)(),{formatMessage:k,formatDate:y}=(0,l.Z)(),x=(0,b.IK)(a),V=a.getKey("PlayButton"),P=a.getKey("LikeButton"),N=(0,s.useMemo)(()=>{let e=k({id:"entity-names.upcoming-album-name"},{upcomingAlbumName:a.title}),t=a.isPresave?k({id:"entity-names.has-your-like"}):"";return"".concat(e," ").concat(t)},[k,a.title,a.isPresave]),j=(0,s.useMemo)(()=>(0,r.jsxs)(m.Paper,{className:g().cover,radius:"s",withShadow:!0,children:[(0,r.jsx)(C.BE,{className:g().image,src:a.coverUri,size:200,fit:"cover",alt:N,withAvatarReplace:!0}),(0,r.jsx)(c.kk,{className:g().controls,playControl:(0,r.jsx)(u.z,{className:g().lockButton,disabled:!0,radius:"xxxl",variant:"default",size:"s",icon:(0,r.jsx)(d.Icon,{variant:"lock",size:"xxs",className:g().lockIcon}),"aria-label":k({id:"entity-names.upcoming-album-play-disabled"})},V),likeControl:(0,r.jsx)(C.dJ,{className:(0,n.W)(g().control,g().presaveButton),isLiked:a.isPresave,onClick:x,variant:"default",size:"s",iconSize:"xxs"},P)})]}),[k,x,a.coverUri,a.isPresave,N,V,P]);return(0,r.jsxs)(c.m7,{ref:_,className:(0,n.W)(g().root,t),"aria-label":N,explicitMarkComponent:a.albumExplicitMark&&(0,r.jsx)(C.$i,{getDescriptionTexts:a.getDescriptionTexts,variant:a.albumExplicitMark}),title:(0,r.jsx)(v.Caption,{variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,children:a.title}),"data-intersection-property-id":f,contentLinesCount:h,view:j,description:(0,r.jsx)(p.jO,{className:g().artists,artists:a.artists,lineClamp:1,linkClassName:g().artistLink,captionSize:"s"}),children:[(0,r.jsx)(v.Caption,{className:g().releaseDate,variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:1,children:(0,r.jsx)(o.Z,{id:"entity-names.upcoming-album-date",values:{releaseDate:y(a.releaseDate,(0,A.YTW)())}})}),i]})})},82605:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"Chart_root__ODed_",position:"Chart_position__7UNY9",position_disliked:"Chart_position_disliked__HzjC7",position_disabled:"Chart_position_disabled__poZzD",progress:"Chart_progress__sGj4s",progress_up:"Chart_progress_up__y083c",progress_same:"Chart_progress_same__Cnbdb",progress_down:"Chart_progress_down__lv_ae",progress_new:"Chart_progress_new__7DobI",progress_disliked:"Chart_progress_disliked__maVAk",progress_disabled:"Chart_progress_disabled__JoFqG"}},29664:function(e){e.exports={root:"AlbumCard_root__vP6k4",root_withChart:"AlbumCard_root_withChart__J2SZv",artists:"AlbumCard_artists__phKco",likeTextButton:"AlbumCard_likeTextButton__2AQd9",controls:"AlbumCard_controls__yuO40",cover:"AlbumCard_cover__zXmdl",coverBlock:"AlbumCard_coverBlock__94ZzY",image:"AlbumCard_image__Mm55s",titleLink:"AlbumCard_titleLink__u_WLG",title:"AlbumCard_title__8YvhT",title_withVersion:"AlbumCard_title_withVersion__NClAp",title_withChart:"AlbumCard_title_withChart__PVOiJ",chart:"AlbumCard_chart__gASdj",version:"AlbumCard_version__h2aJz",artistLink:"AlbumCard_artistLink__uPR_2",playButton:"AlbumCard_playButton__mYK9R",likeButton:"AlbumCard_likeButton__9B9C0",menuButton:"AlbumCard_menuButton__pxkA6",pinButton:"AlbumCard_pinButton__Mdi_E",trailerButton:"AlbumCard_trailerButton__typHh",control:"AlbumCard_control__qx7Xh",plusBadge:"AlbumCard_plusBadge__i0FkP",buyPlusPopover:"AlbumCard_buyPlusPopover__Kb79C"}},25629:function(e){e.exports={root:"UpcomingAlbumCard_root__lSZ5l",controls:"UpcomingAlbumCard_controls__fQ50f",cover:"UpcomingAlbumCard_cover__qvU1m",image:"UpcomingAlbumCard_image__WKtGR",releaseDate:"UpcomingAlbumCard_releaseDate__EvDzB",artists:"UpcomingAlbumCard_artists__Jp1OE",artistLink:"UpcomingAlbumCard_artistLink__RSqXw",control:"UpcomingAlbumCard_control__pSMdI",presaveButton:"UpcomingAlbumCard_presaveButton__ixwy_",lockButton:"UpcomingAlbumCard_lockButton__9_qyp",lockIcon:"UpcomingAlbumCard_lockIcon__wtvkP"}},81891:function(e,t,i){"use strict";var r,n;i.d(t,{Z:function(){return r}}),(n=r||(r={})).OK="ok",n.ERROR="error"},43068:function(e,t,i){"use strict";var r,n;i.d(t,{h:function(){return r}}),(n=r||(r={})).UP="up",n.DOWN="down",n.SAME="same",n.NEW="new"}}]);