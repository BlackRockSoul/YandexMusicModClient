(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9651],{96169:function(e,r,t){"use strict";t.d(r,{KX:function(){return c},gI:function(){return d},lf:function(){return n},N:function(){return m},hh:function(){return b},H0:function(){return g.useAlbumEntityName},SB:function(){return p.useOnLikeClick},BV:function(){return f.useOnPinClick},IK:function(){return v.useOnPresaveClick},TL:function(){return y}});var i,n,s=t(96555),a=t(34603),o=t(5674),u=t(65704);let l=s.V5.model("TrackPosition",{volume:s.V5.number,index:s.V5.number}),c=s.V5.compose(s.V5.model({id:s.V5.number,title:s.V5.string,type:s.V5.maybe(s.V5.enumeration(Object.values(a.VZ))),coverUri:s.V5.maybe(s.V5.string),averageColor:s.V5.maybe(s.V5.string),hslAverageColor:s.V5.maybe(s.V5.string),year:s.V5.maybe(s.V5.number),version:s.V5.maybe(s.V5.string),isAvailable:s.V5.optional(s.V5.boolean,!0),availableForOptions:s.V5.maybe(s.V5.array(s.V5.enumeration(Object.values(a.Yk)))),availableForPremiumUsers:s.V5.maybe(s.V5.boolean),genre:s.V5.maybe(s.V5.string),trackPosition:s.V5.maybe(l),disclaimers:s.V5.maybe(s.V5.array(s.V5.string)),trackCount:s.V5.maybe(s.V5.number),bestAlbumTracks:s.V5.maybe(s.V5.array(s.V5.number))}),u.fE,u.ie).views(e=>({get url(){return"/album/".concat(e.id)},get isLiked(){if(!(0,s.fh)(e))return!1;let{library:r}=(0,s.yj)(e);return r.isAlbumLiked(e.id)},get pinId(){return"".concat(a.Qm.ALBUM).concat(e.id)},get seeds(){return["album:".concat(e.id)]},get isPodcast(){return e.type===a.VZ.PODCAST},get isPinned(){if(!(0,s.fh)(e))return!1;let{pinsCollection:r}=(0,s.yj)(e);return r.isPinned(this.pinId)},get isLegalRejected(){if(!(0,s.fh)(e))return!1;let{experiments:r}=(0,s.yj)(e),t=r.checkExperiment(o.pe.WebNextLegalRejectAlbum,"on");if(e.disclaimers&&t)return!e.isAvailable&&e.disclaimers.includes(a.em.MODAL);return!1},get isUnsafeLegal(){if(!(0,s.fh)(e))return!1;let{experiments:r}=(0,s.yj)(e),t=r.checkExperiment(o.pe.WebNextLegalUnsafeAlbum,"on");if(e.disclaimers&&t)return e.isAvailable&&e.disclaimers.includes(a.em.MODAL);return!1}})).actions(e=>{let r={toggleLike:(0,s.ls)(function*(){if(!(0,s.fh)(e))return;let{library:r,user:t}=(0,s.yj)(e);if(t.isAuthorized){let i=yield r.toggleAlbumLike({entityId:e.id,userId:t.account.uid});return(0,s.fh)(e)&&i===a.Bi.OK&&(e.isLiked?e.likePending():e.unlikePending()),i}}),togglePin:(0,s.ls)(function*(){if(!(0,s.fh)(e))return;let{pinsCollection:r,user:t}=(0,s.yj)(e);if(t.isAuthorized)return yield r.toggleAlbumPin({id:e.id},e.pinId)})};return r}).named("BaseAlbum"),d=s.V5.compose(s.V5.model("BaseUpcomingAlbum",{id:s.V5.number,isPresave:s.V5.boolean,title:s.V5.maybe(s.V5.string),type:s.V5.maybe(s.V5.enumeration(Object.values(a.VZ))),coverUri:s.V5.maybe(s.V5.string),releaseDate:s.V5.maybe(s.V5.string)}),u.ie).actions(e=>{let r={presaveAlbum:(0,s.ls)(function*(r){let{usersResource:t,modelActionsLogger:i}=(0,s.dU)(e);try{e.isPresave=!0;let i=yield t.presaveAlbum(r);return i===a.ZW.ERROR&&(e.isPresave=!1),i}catch(r){return e.isPresave=!1,i.error(r),a.ZW.ERROR}}),removePresaveAlbum:(0,s.ls)(function*(r){let{usersResource:t,modelActionsLogger:i}=(0,s.dU)(e);try{e.isPresave=!1;let i=yield t.removePresaveAlbum(r);return i===a.ZW.ERROR&&(e.isPresave=!0),i}catch(r){return e.isPresave=!0,i.error(r),a.ZW.ERROR}}),toggleLike:(0,s.ls)(function*(){let t;if(!(0,s.fh)(e))return;let{user:i}=(0,s.yj)(e);if(i.account.uid)return t=e.isPresave?yield r.removePresaveAlbum({albumId:e.id,userId:i.account.uid}):yield r.presaveAlbum({albumId:e.id,userId:i.account.uid,likeAfterRelease:!0}),(0,s.fh)(e),t})};return r});(i=n||(n={})).TRACK="track",i.TEXT="text";let m=e=>(0,s.pj)({id:e.id,title:e.title,coverUri:e.coverUri,type:e.type,year:e.year,version:e.version,contentWarning:e.contentWarning,genre:e.genre,likesCount:e.likesCount,averageColor:(0,o.Us)(e.derivedColors),isAvailable:!!e.available,trackPosition:e.trackPosition,disclaimers:e.disclaimers,trackCount:e.trackCount,availableForPremiumUsers:e.availableForPremiumUsers,availableForOptions:e.availableForOptions||[],bestAlbumTracks:e.bests}),b=e=>{let r=!1;return e.presaveDate?r=!0:e.presaved&&(r=e.presaved),(0,s.pj)({id:e.id,contentWarning:e.contentWarning,disclaimers:e.disclaimers,isPresave:r,title:e.title,type:e.type,coverUri:e.coverUri,releaseDate:e.releaseDate})};var g=t(57218),p=t(50449),v=t(3724),f=t(36494);let y=e=>{let{experiments:r}=(0,o.oR)(),t=(0,o.uK)(),i=t.get(o.U5),n=r.checkExperiment(o.pe.WebNextPodcastPage,"on");if(!(i.features.nonMusic&&n))return!1;let{availableForOptions:s,availableForPremiumUsers:u}=e;return!!(!u&&(null==s?void 0:s.includes(a.Yk.BOOKMATE)))}},57218:function(e,r,t){"use strict";t.r(r),t.d(r,{useAlbumEntityName:function(){return a}});var i=t(99616),n=t(65244),s=t(34603);let a=e=>{let{formatMessage:r}=(0,n.Z)(),t=(0,i.useMemo)(()=>{switch(e){case s.VZ.SINGLE:return r({id:"entity-names.single"});case s.VZ.PODCAST:return r({id:"entity-names.podcast"});case s.VZ.AUDIOBOOK:return r({id:"entity-names.audiobook"});case s.VZ.FAIRY_TALE:return r({id:"entity-names.fairy-tale"});default:return r({id:"entity-names.album"})}},[e,r]);return t}},50449:function(e,r,t){"use strict";t.r(r),t.d(r,{useOnLikeClick:function(){return m}});var i=t(8759),n=t(93043),s=t(99616),a=t(65244),o=t(34603),u=t(5674),l=t(44285),c=t(33423);let d=(0,c.Pi)(e=>{let{album:r,closeToast:t}=e,n=(0,u.uK)(),s=n.get(u.U5),a=s.features.nonMusic&&r.isPodcast,o=a?l.j9.PODCAST:l.j9.ALBUM;return(0,i.jsx)(l.AP,{closeToast:t,entityVariant:o,coverUri:r.coverUri,entityUrl:"/album/".concat(r.id),collectionUrl:a?"/collection/non-music/liked":"/collection/albums",entityTitle:r.title,isLiked:r.isLiked})}),m=e=>{let{user:r}=(0,u.oR)(),{notify:t}=(0,u.d$)(),[c,m]=(0,s.useState)(!1),{formatMessage:b}=(0,a.Z)();return(0,s.useCallback)(async()=>{if(!e)return;if(!r.isAuthorized){t((0,i.jsx)(l.Q,{error:b({id:"authorization-messages.need-to-authorizate"})}),{containerId:u.W$.ERROR});return}if(c)return;let s={...(0,n.ZN)(e),isLiked:!e.isLiked,isPodcast:e.isPodcast};m(!0);let a=await e.toggleLike();m(!1),a===o.Bi.OK?t((0,i.jsx)(d,{album:s}),{containerId:u.W$.INFO}):t((0,i.jsx)(l.Q,{error:b({id:"error-messages.error-during-action"})}),{containerId:u.W$.ERROR})},[r.isAuthorized,c,e,b,t])}},36494:function(e,r,t){"use strict";t.r(r),t.d(r,{useOnPinClick:function(){return d}});var i=t(8759),n=t(93043),s=t(99616),a=t(65244),o=t(5674),u=t(44285),l=t(33423);let c=(0,l.Pi)(e=>{let{album:r,closeToast:t}=e,n=(0,o.uK)(),s=n.get(o.U5),a=s.features.nonMusic&&r.isPodcast,l=a?u.j9.PODCAST:u.j9.ALBUM;return(0,i.jsx)(u.K1,{closeToast:t,entityVariant:l,coverUri:r.coverUri,entityUrl:"/album/".concat(r.id),entityTitle:r.title,isPinned:r.isPinned})}),d=e=>{let{user:r}=(0,o.oR)(),{notify:t}=(0,o.d$)(),{formatMessage:l}=(0,a.Z)(),[d,m]=(0,s.useState)(!1);return(0,s.useCallback)(async()=>{if(!r.isAuthorized){t((0,i.jsx)(u.Q,{error:l({id:"authorization-messages.need-to-authorizate"})}),{containerId:o.W$.ERROR});return}if(d)return;let s={...(0,n.ZN)(e),isPinned:!e.isPinned,isPodcast:e.isPodcast};m(!0);let a=await e.togglePin();m(!1),a?t((0,i.jsx)(c,{album:s}),{containerId:o.W$.INFO}):t((0,i.jsx)(u.Q,{error:l({id:"error-messages.error-during-action"})}),{containerId:o.W$.ERROR})},[e,l,t,d,r.isAuthorized])}},3724:function(e,r,t){"use strict";t.r(r),t.d(r,{useOnPresaveClick:function(){return d}});var i=t(8759),n=t(93043),s=t(99616),a=t(65244),o=t(34603),u=t(5674),l=t(44285);let c=e=>{let{upcomingAlbum:r,closeToast:t}=e;return(0,i.jsx)(l.V1,{closeToast:t,albumTitle:r.title,coverUri:r.coverUri,entityTitle:r.title,isPresave:r.isPresave})},d=e=>{let{user:r}=(0,u.oR)(),{notify:t}=(0,u.d$)(),[d,m]=(0,s.useState)(!1),{formatMessage:b}=(0,a.Z)();return(0,s.useCallback)(async()=>{if(!r.isAuthorized){t((0,i.jsx)(l.Q,{error:b({id:"authorization-messages.need-to-authorizate"})}),{containerId:u.W$.ERROR});return}if(d)return;let s={...(0,n.ZN)(e),isPresave:!e.isPresave};m(!0);let a=await e.toggleLike();m(!1),a===o.ZW.OK?t((0,i.jsx)(c,{upcomingAlbum:s}),{containerId:u.W$.INFO}):t((0,i.jsx)(l.Q,{error:b({id:"error-messages.error-during-action"})}),{containerId:u.W$.ERROR})},[r.isAuthorized,d,e,t,b])}},16121:function(e,r,t){"use strict";t.d(r,{kL:function(){return a.Chart},BH:function(){return s},W5:function(){return o}});var i=t(96555),n=t(34603);let s=i.V5.model("Chart",{position:i.V5.maybe(i.V5.number),progress:i.V5.maybe(i.V5.enumeration(Object.values(n.h9)))});var a=t(26258);let o=e=>(0,i.pj)({position:e.position,progress:e.progress})},26258:function(e,r,t){"use strict";t.r(r),t.d(r,{Chart:function(){return m}});var i=t(8759),n=t(35338),s=t(33423),a=t(99616),o=t(34603),u=t(14581),l=t(1918),c=t(32304),d=t.n(c);let m=(0,s.Pi)(e=>{let{progress:r,position:t,isDisliked:s,isDisabled:c,className:m}=e,b=(0,a.useMemo)(()=>{switch(r){case o.h9.UP:return"chartUp";case o.h9.DOWN:return"chartDown";case o.h9.NEW:return"chartNew";default:return"chartSame"}},[r]);return(0,i.jsxs)("div",{className:(0,n.W)(d().root,m),children:[(0,i.jsx)(l.Caption,{variant:"div",weight:"normal",type:"entity",size:"m",className:(0,n.W)(d().position,{[d().position_disliked]:s,[d().position_disabled]:c}),children:t}),(0,i.jsx)(u.J,{variant:b,size:"xxs",className:(0,n.W)(d().progress,d()["progress_".concat(r)],{[d().progress_disliked]:s,[d().progress_disabled]:c})})]})})},32304:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"Chart_root__ODed_",position:"Chart_position__7UNY9",position_disliked:"Chart_position_disliked__HzjC7",position_disabled:"Chart_position_disabled__poZzD",progress:"Chart_progress__sGj4s",progress_up:"Chart_progress_up__y083c",progress_same:"Chart_progress_same__Cnbdb",progress_down:"Chart_progress_down__lv_ae",progress_new:"Chart_progress_new__7DobI",progress_disliked:"Chart_progress_disliked__maVAk",progress_disabled:"Chart_progress_disabled__JoFqG"}}}]);