(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3532],{69559:function(e,t,i){"use strict";i.d(t,{y5:function(){return o},iX:function(){return p},Cx:function(){return C}});var a=i(99616);let o=(0,a.createContext)(null);var n=i(8759),l=i(33423),s=i(454),r=i(57413),c=i(66936),d=i(86502),u=i(66026),m=i(5674);let h=e=>{var t,i;let[o,n]=(0,a.useState)({}),{sonataState:l}=(0,m.oR)();(0,a.useEffect)(()=>{if(l.contextType===r.Ak.Vibe){var t,i,a,s;o.id===(null===(t=l.entityMeta)||void 0===t?void 0:t.id)&&!o.isLiked&&(null===(s=l.entityMeta)||void 0===s?void 0:s.isLiked)&&e(),n({id:null===(i=l.entityMeta)||void 0===i?void 0:i.id,isLiked:null===(a=l.entityMeta)||void 0===a?void 0:a.isLiked})}},[l.contextType,null===(t=l.entityMeta)||void 0===t?void 0:t.id,null===(i=l.entityMeta)||void 0===i?void 0:i.isLiked,o.id,o.isLiked,e])};var _=i(42781),v=i.n(_);let x="vibe-animation",p=(0,l.Pi)(e=>{var t,i,l,_,p,C,b;let{className:f}=e,g=(0,a.useRef)(null),y=(0,a.useRef)(null),S=(0,c.S1)([g]),{isIntersecting:k}=null!==(b=S[x])&&void 0!==b?b:{},{sonataState:j,user:N}=(0,m.oR)(),{theme:P}=(0,m.Fg)(),A=(0,a.useContext)(o),E=j.status===d.Xz.PLAYING&&j.contextType===r.Ak.Vibe;(0,a.useEffect)(()=>{if(g.current&&A){var e,t;let i=null===(t=j.entityMeta)||void 0===t?void 0:null===(e=t.trackParameters)||void 0===e?void 0:e.hue,a=N.collectionHue;y.current=new u.dr(g.current,A,a),y.current.applySettings({hue:i,collectionHue:a}),g.current.classList.add(v().root_visible)}return()=>{var e;null===(e=y.current)||void 0===e||e.destroy()}},[]),(0,a.useEffect)(()=>{var e,t,i,a,o,n,l,s;let r=null===(t=j.entityMeta)||void 0===t?void 0:null===(e=t.trackParameters)||void 0===e?void 0:e.hue,c=null===(a=j.entityMeta)||void 0===a?void 0:null===(i=a.trackParameters)||void 0===i?void 0:i.energy,d=null===(n=j.entityMeta)||void 0===n?void 0:null===(o=n.trackParameters)||void 0===o?void 0:o.userCollectionHue;d&&N.setUserCollectionHue(d),E?null===(l=y.current)||void 0===l||l.playAnimation({hue:r,collectionHue:d,energy:c}):null===(s=y.current)||void 0===s||s.idleAnimation()},[N,E,null===(i=j.entityMeta)||void 0===i?void 0:null===(t=i.trackParameters)||void 0===t?void 0:t.hue,null===(_=j.entityMeta)||void 0===_?void 0:null===(l=_.trackParameters)||void 0===l?void 0:l.energy,null===(C=j.entityMeta)||void 0===C?void 0:null===(p=C.trackParameters)||void 0===p?void 0:p.userCollectionHue]),(0,a.useEffect)(()=>{var e;let t=P===m.Q2.Dark?.0705:.9607;null===(e=y.current)||void 0===e||e.applySettings({backgroundColor:t})},[P]),(0,a.useEffect)(()=>{if(y.current){var e,t;k?null===(e=y.current)||void 0===e||e.enableRender(u.nT.BLOCK_VISIBILITY):null===(t=y.current)||void 0===t||t.disableRender(u.nT.BLOCK_VISIBILITY)}},[k]);let L=(0,a.useCallback)(()=>{var e;null===(e=y.current)||void 0===e||e.likeAnimation()},[]);return h(L),(0,n.jsx)("div",{className:f,"data-intersection-property-id":x,ref:g,...(0,s.BA)(s.bG.vibeAnimation.VIBE_ANIMATION)})}),C=e=>{let t=(0,u.wX)((0,u.kB)(e),u.UE,u.TP),i=Math.round(255*t[0]),a=Math.round(255*t[1]),o=Math.round(255*t[2]);return"rgb(".concat(i,", ").concat(a,", ").concat(o,")")}},52539:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionAlbumsPage:function(){return D}});var a,o,n=i(8759),l=i(33423),s=i(11769),r=i(99616),c=i(26265),d=i(13236),u=i(5674);(a=o||(o={}))[a.LIKED_ALBUMS=0]="LIKED_ALBUMS",a[a.UPCOMING_ALBUMS=1]="UPCOMING_ALBUMS";var m=i(68585),h=i.n(m),_=i(35338),v=i(65244),x=i(96911),p=i(44285),C=i(2814),b=i(1918),f=i(42769);let g=e=>{let t=(0,u.m5)();return(0,r.useCallback)(i=>{var a;switch(null===(a=e.onTabChange)||void 0===a||a.call(e,i),i){case o.LIKED_ALBUMS:t("/collection/albums?tab=".concat(u.Gr.LIKED_ALBUMS));break;case o.UPCOMING_ALBUMS:t("/collection/albums?tab=".concat(u.Gr.UPCOMING_ALBUMS))}},[t,e])};var y=i(915),S=i.n(y),k=i(12670);let j=()=>(0,n.jsxs)("div",{className:S().tabsShimmer,children:[(0,n.jsx)(k.Shimmer,{className:S().tabShimmer}),(0,n.jsx)(k.Shimmer,{className:S().tabShimmer})]}),N=(0,l.Pi)(e=>{var t,i,a;let{tabsState:l,tabElementId:s}=e,{collection:c,experiments:d}=(0,u.oR)(),{formatMessage:m}=(0,v.Z)(),h=(0,u.k6)(),{isScrolling:_}=(0,r.useContext)(p.pI),x=d.checkExperiment(u.pe.WebPresave,"on"),y=g(l),k=(0,r.useMemo)(()=>c.albums.items.length?"".concat(m({id:"entity-names.albums"})," • ").concat(c.albums.items.length):m({id:"entity-names.albums"}),[c.albums.items.length,m]),N=(0,r.useMemo)(()=>{var e,t;return(null===(e=c.albums.upcomingAlbums)||void 0===e?void 0:e.length)?"".concat(m({id:"entity-names.upcoming-albums"})," • ").concat(null===(t=c.albums.upcomingAlbums)||void 0===t?void 0:t.length):m({id:"entity-names.upcoming-albums"})},[null===(t=c.albums.upcomingAlbums)||void 0===t?void 0:t.length,m]);return(0,n.jsxs)("header",{className:S().root,"aria-hidden":_,children:[(0,n.jsxs)("div",{className:S().container,children:[h.canBack&&(0,n.jsx)(f.n,{withForwardControl:!1,withBackwardControl:h.canBack}),(0,n.jsx)(b.Heading,{variant:"h2",weight:"bold",size:"xl",lineClamp:1,className:S().title,children:(0,n.jsx)(C.Z,{id:"entity-names.favourite-albums"})})]}),x&&(0,n.jsxs)(p.no,{isShimmerVisible:c.albums.isLoading,shimmer:(0,n.jsx)(j,{}),className:S().tabs,elementId:s,...l,onTabChange:y,children:[(0,n.jsx)(p.OK,{className:S().tab,value:o.LIKED_ALBUMS,title:k,"aria-label":m({id:"entity-names.albums-count"},{value:c.albums.items.length}),"aria-hidden":_,tabIndex:_?-1:0}),(0,n.jsx)(p.OK,{className:S().tab,value:o.UPCOMING_ALBUMS,title:N,"aria-label":m({id:"entity-names.upcoming-albums-count"},{value:null!==(a=null===(i=c.albums.upcomingAlbums)||void 0===i?void 0:i.length)&&void 0!==a?a:0}),"aria-hidden":_,tabIndex:_?-1:0})]})]})});var P=i(21017),A=i.n(P);let E=(0,l.Pi)(e=>{var t,i,a;let{forwardRef:l,tabsState:s,tabElementId:d}=e,{user:m,collection:h}=(0,u.oR)(),{formatMessage:C}=(0,v.Z)(),b=(0,r.useCallback)(e=>{m.account.uid&&h.albums.getData({userId:m.account.uid,metaType:"music",page:e,pageSize:20})},[h.albums,m.account.uid]),f=(0,r.useMemo)(()=>({Header:()=>(0,n.jsx)(N,{tabsState:s,tabElementId:d}),Footer:()=>(0,n.jsx)(p.$_,{className:A().footer})}),[d,s]);return(0,n.jsx)("div",{className:A().root,children:(0,n.jsx)(c.TabPanel,{value:s.value,name:o.LIKED_ALBUMS,elementId:d,className:A().tabPanel,children:(0,n.jsx)(p.Wv,{className:(0,_.W)(A().scrollContainer,A().important),customComponents:f,itemContentCallback:e=>{var t;let i=null===(t=h.albums.items)||void 0===t?void 0:t[e],a=C({id:"loading-messages.entity-is-loading"},{entityName:C({id:"entity-names.album"})});return i?(0,n.jsx)(x.rf,{album:i,contentLinesCount:4},i.id):(0,n.jsx)(p.hi,{"aria-label":a})},totalCount:null!==(i=null===(t=h.albums.pager)||void 0===t?void 0:t.total)&&void 0!==i?i:0,onGetDataByPage:b,pageSize:20,totalRequests:null!==(a=h.albums.requestsCount)&&void 0!==a?a:0,listClassName:A().content,itemClassName:A().item,handleRef:l,context:{listAriaLabel:C({id:"collection.liked-albums-list"})}})})})});var L=i(71716);let I=(0,l.Pi)(e=>{let{forwardRef:t,tabsState:i,tabElementId:a}=e,{collection:l}=(0,u.oR)(),{formatMessage:s}=(0,v.Z)(),d=(0,r.useMemo)(()=>{var e;let t=s({id:"loading-messages.entity-is-loading"},{entityName:s({id:"entity-names.album"})});return l.albums.isUpcomingAlbumsLoading?(0,n.jsx)(p.Wm,{isActive:!0,"aria-label":t}):null===(e=l.albums.upcomingAlbums)||void 0===e?void 0:e.map(e=>(0,n.jsx)(x.vK,{upcomingAlbum:e},e.id))},[l.albums.isUpcomingAlbumsLoading,l.albums.upcomingAlbums,s]);return(0,n.jsxs)(L.t,{className:A().root,containerClassName:(0,_.W)(A().scrollContainer,A().important),ref:t,children:[(0,n.jsx)(N,{tabsState:i,tabElementId:a}),(0,n.jsx)(c.TabPanel,{value:i.value,name:o.UPCOMING_ALBUMS,elementId:a,className:A().content,children:d}),(0,n.jsx)(p.$_,{className:A().footer})]})});var T=i(14581),R=i(91036),M=i.n(R);let w=(0,l.Pi)(e=>{let{tabsState:t,tabElementId:i}=e,a=(0,r.useMemo)(()=>{switch(t.value){case o.LIKED_ALBUMS:return(0,n.jsx)(C.Z,{id:"error-messages.empty-collection-albums-title"});case o.UPCOMING_ALBUMS:return(0,n.jsx)(C.Z,{id:"error-messages.empty-collection-upcoming-albums-title"})}},[t.value]),l=(0,r.useMemo)(()=>{switch(t.value){case o.LIKED_ALBUMS:return(0,n.jsx)(C.Z,{id:"error-messages.empty-collection-albums-description"});case o.UPCOMING_ALBUMS:return(0,n.jsx)(C.Z,{id:"error-messages.empty-collection-upcoming-albums-description"})}},[t.value]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(N,{tabsState:t,tabElementId:i}),(0,n.jsxs)(c.TabPanel,{value:t.value,name:t.value,elementId:i,className:M().root,children:[(0,n.jsx)(T.J,{className:M().icon,size:"l",variant:"album"}),(0,n.jsx)(b.Heading,{className:M().title,variant:"h3",size:"xs",children:a}),(0,n.jsx)(b.Caption,{className:M().text,variant:"span",type:"controls",size:"l",weight:"normal",children:l})]})]})}),B=(0,l.Pi)(e=>{var t,i;let{tabsState:a,tabElementId:l}=e,{collection:s,experiments:c}=(0,u.oR)(),{formatMessage:d}=(0,v.Z)(),{isScrolling:m}=(0,r.useContext)(p.pI),h=(0,u.k6)(),x=g(a),y=c.checkExperiment(u.pe.WebPresave,"on"),k=(0,r.useMemo)(()=>s.albums.items.length?"".concat(d({id:"entity-names.albums"})," • ").concat(s.albums.items.length):d({id:"entity-names.albums"}),[s.albums.items.length,d]),N=(0,r.useMemo)(()=>{var e,t;return(null===(e=s.albums.upcomingAlbums)||void 0===e?void 0:e.length)?"".concat(d({id:"entity-names.upcoming-albums"})," • ").concat(null===(t=s.albums.upcomingAlbums)||void 0===t?void 0:t.length):d({id:"entity-names.upcoming-albums"})},[null===(t=s.albums.upcomingAlbums)||void 0===t?void 0:t.length,d]),P=(0,r.useMemo)(()=>{if(y){var e,t;return(0,n.jsxs)(p.no,{isShimmerVisible:s.albums.isLoading,shimmer:(0,n.jsx)(j,{}),className:S().tabs,elementId:l,...a,onTabChange:x,children:[(0,n.jsx)(p.OK,{className:S().tab,value:o.LIKED_ALBUMS,title:k,"aria-label":d({id:"entity-names.albums-count"},{value:s.albums.items.length}),"aria-hidden":!m,tabIndex:m?0:-1}),(0,n.jsx)(p.OK,{className:S().tab,value:o.UPCOMING_ALBUMS,title:N,"aria-label":d({id:"entity-names.upcoming-albums-count"},{value:null!==(t=null===(e=s.albums.upcomingAlbums)||void 0===e?void 0:e.length)&&void 0!==t?t:0}),"aria-hidden":!m,tabIndex:m?0:-1})]})}return(0,n.jsx)(b.Heading,{variant:"h2",weight:"bold",size:"s",lineClamp:1,className:S().title,children:(0,n.jsx)(C.Z,{id:"entity-names.favourite-albums"})})},[k,s.albums.isLoading,s.albums.items.length,null===(i=s.albums.upcomingAlbums)||void 0===i?void 0:i.length,d,y,m,x,l,a,N]);return(0,n.jsx)(p.h4,{variant:"composite",staticClassName:(0,_.W)(S().staticHeader,S().important),"aria-hidden":!m,stickyClassName:(0,_.W)(S().stickyHeader,S().important),stickyChild:(0,n.jsxs)("div",{className:S().container,children:[h.canBack&&(0,n.jsx)(f.n,{withForwardControl:!1,withBackwardControl:h.canBack,buttonSize:"xs"}),P]})})}),D=(0,l.Pi)(()=>{let e=(0,s.useSearchParams)(),{user:t,collection:i,experiments:a}=(0,u.oR)(),[l,m]=(0,d.zU)(),_=a.checkExperiment(u.pe.WebNextDisableCollectionAlbums,"on"),v=a.checkExperiment(u.pe.WebNextDisableCollection,"on"),x=a.checkExperiment(u.pe.WebPresave,"on"),p=(0,r.useId)(),C=(0,u.m5)(),b=(0,r.useMemo)(()=>{let t=e.get(u.wx.TAB);if(!x)return C("/collection/albums"),o.LIKED_ALBUMS;switch(t){case u.Gr.LIKED_ALBUMS:break;case u.Gr.UPCOMING_ALBUMS:return o.UPCOMING_ALBUMS}return o.LIKED_ALBUMS},[C,x,e]),f=(0,c.useTabsState)(b);if(_&&v&&(0,s.redirect)("/"),_&&(0,s.redirect)("/collection"),t.account.uid&&i.albums.loadingState===u.Gu.IDLE){let e=Promise.allSettled([i.albums.getData({userId:t.account.uid,metaType:"music",page:0,pageSize:20}),i.albums.getPresaves({userId:t.account.uid})]);(0,r.use)(e)}(0,u.NO)(i.albums.loadingState===u.Gu.RESOLVE),(0,r.useEffect)(()=>()=>{i.albums.reset()},[i.albums]);let g=(0,r.useMemo)(()=>({"--header-height":"".concat(x?148:96,"px")}),[x]),y=(0,r.useMemo)(()=>{switch(f.value){case o.LIKED_ALBUMS:if(i.albums.isAlbumsEmpty)return(0,n.jsx)(w,{tabsState:f,tabElementId:p});return(0,n.jsx)(E,{forwardRef:m,tabsState:f,tabElementId:p});case o.UPCOMING_ALBUMS:if(i.albums.isUpcomingAlbumsEmpty)return(0,n.jsx)(w,{tabsState:f,tabElementId:p});return(0,n.jsx)(I,{forwardRef:m,tabsState:f,tabElementId:p})}},[i.albums.isAlbumsEmpty,i.albums.isUpcomingAlbumsEmpty,m,p,f]);return(0,n.jsx)(u.Lh,{pageId:u.Rh.OWN_ALBUMS,children:(0,n.jsx)(d.I7,{scrollElement:l,headerThreshold:x?148:96,children:(0,n.jsxs)("div",{className:h().root,style:g,children:[(0,n.jsx)(B,{tabsState:f,tabElementId:p}),y]})})})})},97748:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionArtistsPage:function(){return C}});var a=i(8759),o=i(35338),n=i(33423),l=i(11769),s=i(99616),r=i(65244),c=i(2814),d=i(454),u=i(1918),m=i(81546),h=i(13236),_=i(5674),v=i(44285),x=i(77979),p=i.n(x);let C=(0,n.Pi)(()=>{var e,t,i,n;let{user:x,collection:C,experiments:b}=(0,_.oR)(),{formatMessage:f}=(0,r.Z)(),[g,y]=(0,h.zU)(),S=(0,_.k6)(),k=b.checkExperiment(_.pe.WebNextDisableCollectionArtists,"on"),j=b.checkExperiment(_.pe.WebNextDisableCollection,"on");k&&j&&(0,l.redirect)("/"),k&&(0,l.redirect)("/collection"),x.account.uid&&C.artists.loadingState===_.Gu.IDLE&&(0,s.use)(C.artists.getData({userId:x.account.uid})),(0,_.NO)(C.artists.loadingState===_.Gu.RESOLVE),(0,s.useEffect)(()=>()=>{C.artists.reset()},[C.artists]);let N=(0,s.useCallback)(e=>{x.account.uid&&C.artists.getData({userId:x.account.uid,page:e,pageSize:20})},[C.artists,x.account.uid]),P=(0,s.useMemo)(()=>({Footer:()=>(0,a.jsx)(v.$_,{className:p().footer})}),[]);return(0,a.jsx)(_.Lh,{pageId:_.Rh.OWN_ARTISTS,children:(0,a.jsx)(h.I7,{scrollElement:g,outerTitle:f({id:"entity-names.artists"}),children:(0,a.jsxs)("div",{className:p().root,...(0,d.BA)(d.Br.collection.COLLECTION_ARTISTS_PAGE),children:[(0,a.jsx)(v.h4,{variant:"text",withForwardControl:!1,withBackwardControl:S.canBack,children:(0,a.jsx)(u.Heading,{id:"collection-artists-header",variant:"h2",weight:"bold",size:"xl",lineClamp:1,children:(0,a.jsx)(c.Z,{id:"entity-names.artists"})})}),(0,a.jsx)(v.Wv,{className:(0,o.W)(p().scrollContainer,p().important),customComponents:P,itemContentCallback:e=>{var t,i;let o=null===(i=C.artists)||void 0===i?void 0:null===(t=i.items)||void 0===t?void 0:t[e],n=f({id:"loading-messages.entity-is-loading"},{entityName:f({id:"entity-names.artist"})});return o?(0,a.jsx)(m.IT,{artist:o,contentLinesCount:3},o.id):(0,a.jsx)(v.hi,{"aria-label":n,round:!0,centered:!0})},totalCount:null!==(i=null===(t=C.artists)||void 0===t?void 0:null===(e=t.pager)||void 0===e?void 0:e.total)&&void 0!==i?i:0,onGetDataByPage:N,pageSize:20,totalRequests:null!==(n=C.artists.requests)&&void 0!==n?n:0,listClassName:p().content,itemClassName:p().item,handleRef:y,context:{listAriaLabel:f({id:"collection.liked-artists-list"})}})]})})})})},75748:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionNonMusicLikedPage:function(){return C}});var a=i(8759),o=i(35338),n=i(33423),l=i(99616),s=i(65244),r=i(2814),c=i(1918),d=i(70579),u=i(96911),m=i(13236),h=i(5674),_=i(44285),v=i(43512),x=i(73297),p=i.n(x);let C=(0,n.Pi)(()=>{var e,t,i;let{user:n,collection:{nonMusicLiked:x}}=(0,h.oR)(),{formatMessage:C}=(0,s.Z)(),[b,f]=(0,m.zU)(),g=(0,h.k6)();n.account.uid&&x.loadingState===h.Gu.IDLE&&(0,l.use)(x.getData({userId:n.account.uid,metaType:"podcast",pageSize:20})),(0,h.NO)(x.isResolved);let y=(0,l.useCallback)(e=>{n.account.uid&&x.getData({userId:n.account.uid,metaType:"podcast",page:e,pageSize:20})},[x,n.account.uid]);if(x.isRejected)return(0,a.jsx)(d.D,{});(0,l.useEffect)(()=>()=>{x.reset()},[x]);let S=(0,l.useMemo)(()=>({Footer:()=>(0,a.jsx)(_.$_,{className:p().footer})}),[]);return(0,a.jsx)(h.Lh,{pageId:h.Rh.OWN_PODCASTS,children:(0,a.jsx)(m.I7,{scrollElement:b,outerTitle:C({id:"page.delayed-non-music"}),children:(0,a.jsxs)("div",{className:p().root,children:[(0,a.jsx)(_.h4,{variant:"text",withForwardControl:!1,withBackwardControl:g.canBack,children:(0,a.jsx)(c.Heading,{variant:"h2",weight:"bold",size:"xl",lineClamp:1,children:(0,a.jsx)(r.Z,{id:"page.delayed-non-music"})})}),x.isEmptyItems&&!x.isRejected&&(0,a.jsx)(v.u,{className:p().emptyBlock}),(0,a.jsx)(_.Wv,{className:(0,o.W)(p().scrollContainer,p().important),listClassName:p().content,itemClassName:p().item,customComponents:S,itemContentCallback:e=>{var t;let i=null===(t=x.items)||void 0===t?void 0:t[e],o=C({id:"loading-messages.entity-is-loading"},{entityName:C({id:"entity-names.podcast"})});return i?(0,a.jsx)(u.rf,{album:i,contentLinesCount:3,withLikesCount:!0,withAddition:!1},i.id):(0,a.jsx)(_.hi,{"aria-label":o})},totalCount:null!==(t=null===(e=x.pager)||void 0===e?void 0:e.total)&&void 0!==t?t:0,onGetDataByPage:y,pageSize:20,totalRequests:null!==(i=x.requestsCount)&&void 0!==i?i:0,handleRef:f,context:{listAriaLabel:C({id:"collection.liked-non-music-list"})}})]})})})})},43512:function(e,t,i){"use strict";i.d(t,{u:function(){return d}});var a=i(8759),o=i(35338),n=i(2814),l=i(14581),s=i(1918),r=i(50232),c=i.n(r);let d=e=>{let{className:t}=e;return(0,a.jsxs)("div",{className:(0,o.W)(c().emptyContent,t),children:[(0,a.jsx)(l.J,{className:c().emptyContentIcon,size:"l",variant:"album"}),(0,a.jsx)(s.Heading,{className:c().emptyContentTitle,variant:"h3",size:"xs",children:(0,a.jsx)(n.Z,{id:"error-messages.empty-collection-podcasts-and-books"})})]})}},64272:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionNonMusicPage:function(){return f}});var a=i(8759),o=i(35338),n=i(33423),l=i(99616),s=i(65244),r=i(2814),c=i(71716),d=i(1918),u=i(70579),m=i(96911),h=i(13236),_=i(5674),v=i(44285),x=i(11983),p=i(43512),C=i(29977),b=i.n(C);let f=(0,n.Pi)(()=>{var e,t;let{user:i,collection:{nonMusicLiked:n,shelf:C}}=(0,_.oR)(),{formatMessage:f}=(0,s.Z)(),[g,y]=(0,h.zU)(),S=(0,_.k6)();if(i.account.uid&&n.loadingState===_.Gu.IDLE&&(0,l.use)(n.getData({userId:i.account.uid,metaType:"podcast",pageSize:10})),(0,_.NO)(n.isResolved),n.isRejected&&!C.hasLiked)return(0,a.jsx)(u.D,{});(0,l.useEffect)(()=>()=>{n.reset(),C.reset()},[n,C]);let k=(0,l.useMemo)(()=>{var e;return null===(e=n.items)||void 0===e?void 0:e.slice(0,10).map((e,t)=>e?(0,a.jsx)(m.rf,{album:e,contentLinesCount:3,withLikesCount:!0,withAddition:!1},null==e?void 0:e.id):(0,a.jsx)(v.hi,{},"shimmer-".concat(t)))},[n.items,null===(e=n.items)||void 0===e?void 0:e.length]),j=(0,l.useMemo)(()=>{var e;return!n.isEmptyItems||n.isRejected||C.hasLiked?n.isRejected||!(null===(e=n.items)||void 0===e?void 0:e.length)&&n.requestsCount?null:(0,a.jsx)(v.HY,{headerClassName:b().blockHeader,containerClassName:b().carousel,isShimmerVisible:n.isLoading,isShimmerActive:!0,title:f({id:"page.delayed-non-music"}),viewAllActionLink:"/collection/non-music/liked",children:k}):(0,a.jsx)(p.u,{})},[n.isLoading,f,k,n.isRejected,C.hasLiked,n.isEmptyItems,null===(t=n.items)||void 0===t?void 0:t.length,n.requestsCount]);return(0,a.jsx)(_.Lh,{pageId:_.Rh.OWN_PODCASTS,children:(0,a.jsx)(h.I7,{scrollElement:g,outerTitle:f({id:"page.podcasts-and-books"}),children:(0,a.jsxs)("div",{className:b().root,children:[(0,a.jsx)(v.h4,{variant:"text",withForwardControl:!1,withBackwardControl:S.canBack,children:(0,a.jsx)(d.Heading,{variant:"h2",weight:"bold",size:"xl",lineClamp:1,children:(0,a.jsx)(r.Z,{id:"page.podcasts-and-books"})})}),(0,a.jsx)(c.t,{ref:y,containerClassName:(0,o.W)(b().scrollableContainer,b().important),className:b().root,children:(0,a.jsxs)("div",{className:b().content,children:[j,C.hasLiked&&(0,a.jsx)(x.X,{className:b().shelfBlock,headerClassName:b().shelfBlockHeader,itemsCount:5,withHeader:!0}),(0,a.jsx)(v.$_,{className:b().footer})]})})]})})})})},3653:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionPage:function(){return g}});var a=i(8759),o=i(35338),n=i(33423),l=i(11769),s=i(99616),r=i(65244),c=i(2814),d=i(34603),u=i(71716),m=i(1918),h=i(65618),_=i(70579),v=i(13236),x=i(69559),p=i(5674),C=i(44285),b=i(23234),f=i.n(b);let g=(0,n.Pi)(()=>{let{collection:e,user:t,experiments:i}=(0,p.oR)(),[n,b]=(0,v.zU)(),{formatMessage:g}=(0,r.Z)(),y=e.landing.loadingState!==p.Gu.REJECT&&!!t.collectionHue;i.checkExperiment(p.pe.WebNextDisableCollection,"on")&&(0,l.redirect)("/"),e.landing.loadingState===p.Gu.IDLE&&(0,s.use)(e.landing.getSkeleton({id:d.jB.WEB_COLLECTION,showWizard:t.settings.showWizard},{preloadBlocks:3})),(0,s.useEffect)(()=>()=>e.landing.reset(),[e.landing]),(0,p.NO)(e.landing.loadingState===p.Gu.RESOLVE);let S=(0,h._B)(e.landing),k=(0,s.useMemo)(()=>y&&t.collectionHue?{"--collection-color":(0,x.Cx)(t.collectionHue)}:null,[y,t.collectionHue]),j=(0,s.useMemo)(()=>({color:e=>(0,a.jsx)(C.wx,{title:g({id:"collection.collection-color-title"}),description:g({id:"collection.collection-color-description"}),placement:"right",children:(0,a.jsx)("span",{className:f().collectionColor,style:k,children:e})})}),[k,g]);return(0,a.jsx)(p.Lh,{pageId:p.Rh.OWN_COLLECTION,children:(0,a.jsxs)(v.I7,{scrollElement:n,outerTitle:g({id:"entity-names.collection"}),children:[(0,a.jsx)(C.h4,{variant:"text",showControls:!1,children:(0,a.jsxs)("div",{className:f().header,children:[(0,a.jsx)(m.Heading,{variant:"h2",weight:"bold",size:"xl",children:(0,a.jsx)(c.Z,{id:"entity-names.collection"})}),y&&(0,a.jsx)(m.Caption,{className:f().description,variant:"div",size:"m",children:(0,a.jsx)(c.Z,{id:"collection.collection-color",values:j})})]})}),(0,a.jsxs)(u.t,{className:(0,o.W)(f().root,{[f().root_withCollectionColor]:y}),containerClassName:f().content,ref:b,children:[(0,a.jsx)("div",{className:(0,o.W)(f().landing,{[f().landing_onlyWizard]:S}),children:(0,a.jsx)(h.Od,{landing:e.landing,errorComponent:(0,a.jsx)(_.D,{className:f().error,withBackwardControl:!1})})}),(0,a.jsx)(C.$_,{className:f().footer})]})]})})})},90554:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionPlaylistsCreatedPage:function(){return p}});var a=i(8759),o=i(35338),n=i(33423),l=i(11769),s=i(99616),r=i(65244),c=i(2814),d=i(1918),u=i(13236),m=i(20210),h=i(5674),_=i(44285),v=i(85742),x=i.n(v);let p=(0,n.Pi)(()=>{var e,t,i;let{user:n,collection:{playlistsCreated:v},experiments:p}=(0,h.oR)(),{formatMessage:C}=(0,r.Z)(),[b,f]=(0,u.zU)(),g=(0,h.k6)(),y=p.checkExperiment(h.pe.WebNextDisableCollectionCreatedPlaylists,"on"),S=p.checkExperiment(h.pe.WebNextDisableCollection,"on");y&&S&&(0,l.redirect)("/"),y&&(0,l.redirect)("/collection");let k=(0,s.useMemo)(()=>({Footer:()=>(0,a.jsx)(_.$_,{className:x().footer})}),[]);n.account.uid&&v.loadingState===h.Gu.IDLE&&(0,s.use)(v.getData({userId:n.account.uid,page:0,pageSize:20})),(0,h.NO)(v.loadingState===h.Gu.RESOLVE);let j=(0,s.useCallback)(e=>{n.account.uid&&v.getData({userId:n.account.uid,page:e,pageSize:20})},[v,n.account.uid]);return(0,s.useEffect)(()=>()=>{v.reset()},[v]),(0,a.jsx)(h.Lh,{pageId:h.Rh.OWN_PLAYLISTS,children:(0,a.jsx)(u.I7,{scrollElement:b,outerTitle:C({id:"entity-names.my-playlists"}),children:(0,a.jsxs)("div",{className:x().root,children:[(0,a.jsx)(_.h4,{variant:"text",withForwardControl:!1,withBackwardControl:g.canBack,children:(0,a.jsx)(d.Heading,{id:"collection-playlistsCreated-header",variant:"h2",weight:"bold",size:"xl",lineClamp:1,children:(0,a.jsx)(c.Z,{id:"entity-names.my-playlists"})})}),(0,a.jsx)(_.Wv,{className:(0,o.W)(x().scrollContainer,x().important),customComponents:k,itemContentCallback:e=>{var t;let i=null==v?void 0:null===(t=v.items)||void 0===t?void 0:t[e],o=C({id:"loading-messages.entity-is-loading"},{entityName:C({id:"entity-names.playlist"})});return i?(0,a.jsx)(m.ZL,{playlist:i,contentLinesCount:3},i.key):(0,a.jsx)(_.hi,{"aria-label":o})},totalCount:null!==(t=null==v?void 0:null===(e=v.pager)||void 0===e?void 0:e.total)&&void 0!==t?t:0,onGetDataByPage:j,pageSize:20,totalRequests:null!==(i=v.requests)&&void 0!==i?i:0,listClassName:x().content,itemClassName:x().item,handleRef:f,context:{listAriaLabel:C({id:"collection.created-playlists-list"})}})]})})})})},86643:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionPlaylistsLikedPage:function(){return C}});var a=i(8759),o=i(35338),n=i(33423),l=i(11769),s=i(99616),r=i(65244),c=i(2814),d=i(34603),u=i(1918),m=i(13236),h=i(20210),_=i(5674),v=i(44285),x=i(92158),p=i.n(x);let C=(0,n.Pi)(()=>{var e,t,i;let{user:n,collection:{playlistsLiked:x},experiments:C}=(0,_.oR)(),{formatMessage:b}=(0,r.Z)(),[f,g]=(0,m.zU)(),y=(0,_.k6)(),S=C.checkExperiment(_.pe.WebNextDisableCollectionLikedPlaylists,"on"),k=C.checkExperiment(_.pe.WebNextDisableCollection,"on");S&&k&&(0,l.redirect)("/"),S&&(0,l.redirect)("/collection");let j=(0,s.useMemo)(()=>({Footer:()=>(0,a.jsx)(v.$_,{className:p().footer})}),[]);n.account.uid&&x.loadingState===_.Gu.IDLE&&(0,s.use)(x.getData({userId:n.account.uid,sortOrder:d.As.DESC,metaType:"music",page:0,pageSize:20})),(0,_.NO)(x.loadingState===_.Gu.RESOLVE);let N=(0,s.useCallback)(e=>{n.account.uid&&x.getData({userId:n.account.uid,sortOrder:d.As.DESC,metaType:"music",page:e,pageSize:20})},[x,n.account.uid]);return(0,s.useEffect)(()=>()=>{x.reset()},[x]),(0,a.jsx)(_.Lh,{pageId:_.Rh.OWN_PLAYLISTS,children:(0,a.jsx)(m.I7,{scrollElement:f,outerTitle:b({id:"entity-names.favourite-playlists"}),children:(0,a.jsxs)("div",{className:p().root,children:[(0,a.jsx)(v.h4,{variant:"text",withForwardControl:!1,withBackwardControl:y.canBack,children:(0,a.jsx)(u.Heading,{variant:"h2",weight:"bold",size:"xl",lineClamp:1,children:(0,a.jsx)(c.Z,{id:"entity-names.favourite-playlists"})})}),(0,a.jsx)(v.Wv,{className:(0,o.W)(p().scrollContainer,p().important),customComponents:j,itemContentCallback:e=>{var t;let i=null==x?void 0:null===(t=x.items)||void 0===t?void 0:t[e],o=b({id:"loading-messages.entity-is-loading"},{entityName:b({id:"entity-names.playlist"})});return i?(0,a.jsx)(h.ZL,{playlist:i,contentLinesCount:3},i.key):(0,a.jsx)(v.hi,{"aria-label":o})},totalCount:null!==(t=null==x?void 0:null===(e=x.pager)||void 0===e?void 0:e.total)&&void 0!==t?t:0,onGetDataByPage:N,pageSize:20,totalRequests:null!==(i=x.requests)&&void 0!==i?i:0,listClassName:p().content,itemClassName:p().item,handleRef:g,context:{listAriaLabel:b({id:"collection.liked-playlists-list"})}})]})})})})},1363:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionPlaylistsPage:function(){return H}});var a,o,n,l,s=i(8759),r=i(33423),c=i(11769),d=i(99616),u=i(34603),m=i(26265),h=i(13236),_=i(5674);(a=n||(n={})).CREATED="created",a.LIKED="liked",(o=l||(l={}))[o.CREATED=0]="CREATED",o[o.LIKED=1]="LIKED";var v=i(95187),x=i.n(v),p=i(35338),C=i(65244),b=i(20210),f=i(3515),g=i(44285),y=i(2814),S=i(1918),k=i(42769);let j=e=>{let t=(0,_.m5)();return(0,d.useCallback)(i=>{var a;switch(null===(a=e.onTabChange)||void 0===a||a.call(e,i),i){case l.CREATED:t("/collection/playlists?tab=".concat(n.CREATED));break;case l.LIKED:t("/collection/playlists?tab=".concat(n.LIKED))}},[t,e])};var N=i(53158),P=i.n(N),A=i(12670);let E=()=>(0,s.jsxs)("div",{className:P().tabsShimmer,children:[(0,s.jsx)(A.Shimmer,{className:P().tabShimmer}),(0,s.jsx)(A.Shimmer,{className:P().tabShimmer})]}),L=(0,r.Pi)(e=>{var t,i,a,o,n,r;let{tabsState:c,tabElementId:u}=e,{collection:{playlistsCreated:m,playlistsLiked:h}}=(0,_.oR)(),{formatMessage:v}=(0,C.Z)(),x=(0,_.k6)(),{isScrolling:p}=(0,d.useContext)(g.pI),b=j(c),f=(0,d.useMemo)(()=>{var e;return(null===(e=m.pager)||void 0===e?void 0:e.total)?"".concat(v({id:"collection.your-created-playlists"})," • ").concat(m.pager.total):v({id:"collection.your-created-playlists"})},[v,null===(t=m.pager)||void 0===t?void 0:t.total]),N=(0,d.useMemo)(()=>{var e;return(null===(e=h.pager)||void 0===e?void 0:e.total)?"".concat(v({id:"collection.your-liked-playlists"})," • ").concat(h.pager.total):v({id:"collection.your-liked-playlists"})},[v,null===(i=h.pager)||void 0===i?void 0:i.total]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:P().root,"aria-hidden":p,children:(0,s.jsxs)("div",{className:P().container,children:[x.canBack&&(0,s.jsx)(k.n,{withForwardControl:!1,withBackwardControl:x.canBack}),(0,s.jsx)(S.Heading,{variant:"h2",weight:"bold",size:"xl",lineClamp:1,className:P().title,children:(0,s.jsx)(y.Z,{id:"entity-names.artist-playlist"})})]})}),(0,s.jsxs)(g.no,{isShimmerVisible:m.isLoading,shimmer:(0,s.jsx)(E,{}),className:P().staticTabs,elementId:u,...c,onTabChange:b,children:[(0,s.jsx)(g.OK,{className:P().tab,value:l.CREATED,title:f,"aria-label":v({id:"entity-names.created-playlists-count"},{value:null!==(n=null===(a=m.pager)||void 0===a?void 0:a.total)&&void 0!==n?n:0}),"aria-hidden":p,tabIndex:p?-1:0}),(0,s.jsx)(g.OK,{className:P().tab,value:l.LIKED,title:N,"aria-label":v({id:"entity-names.liked-playlists-count"},{value:null!==(r=null===(o=h.pager)||void 0===o?void 0:o.total)&&void 0!==r?r:0}),"aria-hidden":p,tabIndex:p?-1:0})]})]})});var I=i(82825),T=i.n(I);let R=(0,r.Pi)(e=>{var t,i,a;let{forwardRef:o,tabsState:n,tabElementId:r}=e,{user:c,collection:{playlistsCreated:u}}=(0,_.oR)(),{formatMessage:h}=(0,C.Z)(),v=(0,d.useMemo)(()=>({Header:()=>(0,s.jsx)(L,{tabsState:n,tabElementId:r}),Footer:()=>(0,s.jsx)(g.$_,{className:T().footer})}),[r,n]),x=(0,d.useCallback)(e=>{c.account.uid&&u.getData({userId:c.account.uid,page:e,pageSize:20})},[u,c.account.uid]),y=(null!==(i=null===(t=u.pager)||void 0===t?void 0:t.total)&&void 0!==i?i:0)+1;return(0,s.jsx)("div",{className:T().root,children:(0,s.jsx)(m.TabPanel,{value:n.value,name:l.CREATED,elementId:r,className:T().tabPanel,children:(0,s.jsx)(g.Wv,{className:(0,p.W)(T().scrollContainer,T().important),customComponents:v,itemContentCallback:e=>{var t;if(0===e)return(0,s.jsx)(f.lN,{});let i=null==u?void 0:null===(t=u.items)||void 0===t?void 0:t[e-1],a=h({id:"loading-messages.entity-is-loading"},{entityName:h({id:"entity-names.playlist"})});return i?(0,s.jsx)(b.ZL,{playlist:i,contentLinesCount:3},i.key):(0,s.jsx)(g.hi,{"aria-label":a})},totalCount:y,onGetDataByPage:x,pageSize:20,totalRequests:null!==(a=u.requests)&&void 0!==a?a:0,listClassName:T().content,itemClassName:T().item,handleRef:o,context:{listAriaLabel:h({id:"collection.created-playlists-list"})}})})})}),M=(0,r.Pi)(e=>{var t,i,a;let{forwardRef:o,tabsState:n,tabElementId:r}=e,{user:c,collection:{playlistsLiked:h}}=(0,_.oR)(),{formatMessage:v}=(0,C.Z)(),x=(0,d.useCallback)(e=>{c.account.uid&&h.getData({userId:c.account.uid,sortOrder:u.As.DESC,metaType:"music",page:e,pageSize:20})},[h,c.account.uid]),f=(0,d.useMemo)(()=>({Header:()=>(0,s.jsx)(L,{tabsState:n,tabElementId:r}),Footer:()=>(0,s.jsx)(g.$_,{className:T().footer})}),[r,n]);return(0,s.jsx)("div",{className:T().root,children:(0,s.jsx)(m.TabPanel,{value:n.value,name:l.LIKED,elementId:r,className:T().tabPanel,children:(0,s.jsx)(g.Wv,{className:(0,p.W)(T().scrollContainer,T().important),customComponents:f,itemContentCallback:e=>{var t;let i=null==h?void 0:null===(t=h.items)||void 0===t?void 0:t[e],a=v({id:"loading-messages.entity-is-loading"},{entityName:v({id:"entity-names.playlist"})});return i?(0,s.jsx)(b.ZL,{playlist:i,contentLinesCount:3},i.key):(0,s.jsx)(g.hi,{"aria-label":a})},totalCount:null!==(i=null==h?void 0:null===(t=h.pager)||void 0===t?void 0:t.total)&&void 0!==i?i:0,onGetDataByPage:x,pageSize:20,totalRequests:null!==(a=h.requests)&&void 0!==a?a:0,listClassName:T().content,itemClassName:T().item,handleRef:o,context:{listAriaLabel:v({id:"collection.liked-playlists-list"})}})})})});var w=i(14581),B=i(36397),D=i.n(B);let O=(0,r.Pi)(e=>{let{tabsState:t,tabElementId:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(L,{tabsState:t,tabElementId:i}),(0,s.jsxs)(m.TabPanel,{value:t.value,name:t.value,elementId:i,className:D().root,children:[(0,s.jsx)(w.J,{className:D().icon,size:"l",variant:"album"}),(0,s.jsx)(S.Heading,{className:D().title,variant:"h3",size:"xs",children:(0,s.jsx)(y.Z,{id:"error-messages.empty-collection-liked-playlists"})})]})]})}),z=(0,r.Pi)(e=>{var t,i,a,o,n,r;let{tabsState:c,tabElementId:u}=e,{collection:{playlistsCreated:m,playlistsLiked:h}}=(0,_.oR)(),{formatMessage:v}=(0,C.Z)(),{isScrolling:x}=(0,d.useContext)(g.pI),b=(0,_.k6)(),f=j(c),y=(0,d.useMemo)(()=>{var e,t;return(null===(e=m.pager)||void 0===e?void 0:e.total)?"".concat(v({id:"collection.your-created-playlists"})," • ").concat(null===(t=m.pager)||void 0===t?void 0:t.total):v({id:"collection.your-created-playlists"})},[v,null===(t=m.pager)||void 0===t?void 0:t.total]),S=(0,d.useMemo)(()=>{var e,t;return(null===(e=h.pager)||void 0===e?void 0:e.total)?"".concat(v({id:"collection.your-liked-playlists"})," • ").concat(null===(t=h.pager)||void 0===t?void 0:t.total):v({id:"collection.your-liked-playlists"})},[v,null===(i=h.pager)||void 0===i?void 0:i.total]);return(0,s.jsx)(g.h4,{variant:"composite",staticClassName:(0,p.W)(P().staticHeader,P().important),"aria-hidden":!x,stickyClassName:(0,p.W)(P().stickyHeader,P().important),stickyChild:(0,s.jsxs)("div",{className:P().container,children:[b.canBack&&(0,s.jsx)(k.n,{withForwardControl:!1,withBackwardControl:b.canBack,buttonSize:"xs"}),(0,s.jsxs)(g.no,{isShimmerVisible:m.isLoading,shimmer:(0,s.jsx)(E,{}),className:P().stickyTabs,elementId:u,...c,onTabChange:f,children:[(0,s.jsx)(g.OK,{className:P().tab,value:l.CREATED,title:y,"aria-label":v({id:"entity-names.created-playlists-count"},{value:null!==(n=null===(a=m.pager)||void 0===a?void 0:a.total)&&void 0!==n?n:0}),"aria-hidden":!x,tabIndex:x?0:-1}),(0,s.jsx)(g.OK,{className:P().tab,value:l.LIKED,title:S,"aria-label":v({id:"entity-names.liked-playlists-count"},{value:null!==(r=null===(o=h.pager)||void 0===o?void 0:o.total)&&void 0!==r?r:0}),"aria-hidden":!x,tabIndex:x?0:-1})]})]})})}),H=(0,r.Pi)(()=>{let e=(0,c.useSearchParams)(),{user:t,collection:{playlistsCreated:i,playlistsLiked:a},experiments:o}=(0,_.oR)(),[r,v]=(0,h.zU)(),p=o.checkExperiment(_.pe.WebNextDisableCollection,"on"),C=(0,d.useId)(),b=(0,d.useMemo)(()=>{let t=e.get(_.wx.TAB);switch(t){case n.CREATED:break;case n.LIKED:return l.LIKED}return l.CREATED},[e]),f=(0,m.useTabsState)(b);if(p&&(0,c.redirect)("/"),t.account.uid&&i.loadingState===_.Gu.IDLE){let e=Promise.allSettled([i.getData({userId:t.account.uid,page:0,pageSize:20}),a.getData({userId:t.account.uid,sortOrder:u.As.DESC,metaType:"music",page:0,pageSize:20})]);(0,d.use)(e)}(0,_.NO)(i.loadingState===_.Gu.RESOLVE),(0,d.useEffect)(()=>()=>{i.reset(),a.reset()},[i,a]);let g=(0,d.useMemo)(()=>{switch(f.value){case l.CREATED:return(0,s.jsx)(R,{forwardRef:v,tabsState:f,tabElementId:C});case l.LIKED:if(a.isEmpty)return(0,s.jsx)(O,{tabsState:f,tabElementId:C});return(0,s.jsx)(M,{forwardRef:v,tabsState:f,tabElementId:C})}},[v,a.isEmpty,C,f]);return(0,s.jsx)(_.Lh,{pageId:_.Rh.OWN_PLAYLISTS,children:(0,s.jsx)(h.I7,{scrollElement:r,headerThreshold:148,children:(0,s.jsxs)("div",{className:x().root,children:[(0,s.jsx)(z,{tabsState:f,tabElementId:C}),g]})})})})},11983:function(e,t,i){"use strict";i.d(t,{X:function(){return x}});var a=i(8759),o=i(35338),n=i(33423),l=i(99616),s=i(57413),r=i(16367),c=i(95539),d=i(5674),u=i(34603);let m=e=>{var t,i;let a=null===(t=e.track.albums[0])||void 0===t?void 0:t.trackPosition,o=null===(i=e.track.albums[0])||void 0===i?void 0:i.trackCount;return e.track.type!==u.Vc.PODCAST?(null==a?void 0:a.index)&&(null==a?void 0:a.index)-1:o&&(null==a?void 0:a.index)&&o-(null==a?void 0:a.index)};var h=i(91008),_=i(84814),v=i.n(_);let x=(0,n.Pi)(e=>{var t;let{className:i,itemsCount:n,withHeader:u,headerClassName:_}=e,{sonataState:x,collection:{shelf:{liked:p}}}=(0,d.oR)();p.loadingState===d.Gu.IDLE&&(0,l.use)(p.getData());let C=(0,l.useMemo)(()=>{var e;return null===(e=p.entities)||void 0===e?void 0:e.map(e=>{let t=m(e);return(0,a.jsx)(c.N6,{track:e.track,playContextParams:{contextData:{type:s.Ak.Album,meta:{id:e.track.albumId?Number(e.track.albumId):0},from:p.typeForFrom||""},queueParams:{index:t},loadContextMeta:!1,entitiesData:x.unloadedEntitiesDataFromModels},withPodcastName:!0},"".concat(e.track.id,":").concat(e.track.albumId))})},[p.entities,p.typeForFrom,x.unloadedEntitiesDataFromModels]);return p.isLoading?(0,a.jsx)(h.D,{className:i,withHeader:u}):u?(0,a.jsx)(r.KN,{className:i,headerClassName:(0,o.W)(v().header,_),isLoading:p.isLoading,title:null!==(t=p.title)&&void 0!==t?t:"",maxColumns:1,itemsPerColumn:n,viewAllAction:"/collection/shelf/liked",showControls:!0,children:C}):(0,a.jsx)("div",{className:i,children:C})})},46706:function(e,t,i){"use strict";i.d(t,{c:function(){return p}});var a=i(8759),o=i(35338),n=i(33423),l=i(99616),s=i(16367),r=i(95539),c=i(5674),d=i(57413),u=i(34603);let m=(e,t)=>{var i,a;return e.type===u.lp.ALBUM?{type:d.Ak.Album,meta:{id:(null===(a=e.album)||void 0===a?void 0:a.id)||0},from:t||""}:{type:d.Ak.Playlist,meta:{id:(null===(i=e.playlist)||void 0===i?void 0:i.id)||""},from:t||""}},h=e=>{var t,i;if(e.type===u.lp.PLAYLIST)return 0;let a=null===(t=e.track.albums[0])||void 0===t?void 0:t.trackPosition,o=null===(i=e.album)||void 0===i?void 0:i.trackCount;return e.track.type===u.Vc.PODCAST?(null==a?void 0:a.volume)&&(null==a?void 0:a.volume)>1?o&&o-1:o&&(null==a?void 0:a.index)&&o-(null==a?void 0:a.index):(null==a?void 0:a.index)&&(null==a?void 0:a.index)-1};var _=i(91008),v=i(73522),x=i.n(v);let p=(0,n.Pi)(e=>{var t;let{className:i,itemsCount:n,withHeader:d,headerClassName:u}=e,{sonataState:v,collection:{shelf:{recentlyPlayed:p}}}=(0,c.oR)();p.loadingState===c.Gu.IDLE&&(0,l.use)(p.getData());let C=(0,l.useMemo)(()=>{var e;return null===(e=p.entities)||void 0===e?void 0:e.map((e,t)=>{let i=m(e,p.typeForFrom),o=h(e);return(0,a.jsx)(r.N6,{track:e.track,playContextParams:{contextData:i,queueParams:{index:o},loadContextMeta:!1,entitiesData:v.unloadedEntitiesDataFromModels},withPodcastName:!0},t)})},[p.entities,p.typeForFrom,v.unloadedEntitiesDataFromModels]);return p.isLoading?(0,a.jsx)(_.D,{className:i,withHeader:d}):d?(0,a.jsx)(s.KN,{className:i,headerClassName:(0,o.W)(x().header,u),isLoading:p.isLoading,title:null!==(t=p.title)&&void 0!==t?t:"",maxColumns:1,itemsPerColumn:n,viewAllAction:"/collection/shelf/recently-played",showControls:!0,children:C}):(0,a.jsx)("div",{className:i,children:C})})},91008:function(e,t,i){"use strict";i.d(t,{D:function(){return u}});var a=i(8759),o=i(33423),n=i(12670),l=i(5674),s=i(44285),r=i(64308),c=i.n(r);let d=()=>Array.from({length:5},e=>(0,a.jsx)(s.DX,{variant:l.Lx.PLAYLIST,className:c().track,isActive:!0},e)),u=(0,o.Pi)(e=>{let{className:t,withHeader:i}=e;return(0,a.jsxs)("div",{className:t,children:[i&&(0,a.jsx)(n.Shimmer,{radius:"l",width:100,height:24,className:c().title,isActive:!0}),(0,a.jsx)(d,{})]})})},32496:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionShelfLikedPage:function(){return p}});var a=i(8759),o=i(33423),n=i(99616),l=i(65244),s=i(2814),r=i(71716),c=i(1918),d=i(70579),u=i(13236),m=i(5674),h=i(44285),_=i(11983),v=i(39150),x=i.n(v);let p=(0,o.Pi)(()=>{let{collection:{shelf:{liked:e}}}=(0,m.oR)(),[t,i]=(0,u.zU)(),{formatMessage:o}=(0,l.Z)(),v=(0,m.k6)();return((0,n.useEffect)(()=>()=>{e.reset()},[e]),(0,m.NO)(e.isResolved),e.isRejected)?(0,a.jsx)(d.D,{}):(0,a.jsxs)(u.I7,{scrollElement:t,outerTitle:o({id:"podcast.shelf-liked-title"}),children:[(0,a.jsx)(h.h4,{variant:"text",withForwardControl:!1,withBackwardControl:v.canBack,children:(0,a.jsx)(c.Heading,{variant:"h2",weight:"bold",size:"xl",lineClamp:1,children:(0,a.jsx)(s.Z,{id:"podcast.shelf-liked-title"})})}),(0,a.jsxs)(r.t,{ref:i,containerClassName:x().scrollableContainer,className:x().root,children:[(0,a.jsx)(_.X,{}),(0,a.jsx)(h.$_,{className:x().footer})]})]})})},99805:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionShelfPage:function(){return C}});var a=i(8759),o=i(33423),n=i(99616),l=i(65244),s=i(2814),r=i(71716),c=i(1918),d=i(70579),u=i(13236),m=i(5674),h=i(44285),_=i(11983),v=i(46706),x=i(70294),p=i.n(x);let C=(0,o.Pi)(()=>{let{collection:{shelf:e}}=(0,m.oR)(),[t,i]=(0,u.zU)(),{formatMessage:o}=(0,l.Z)(),x=(0,m.k6)();return((0,n.useEffect)(()=>()=>{e.reset()},[e]),(0,m.NO)(e.isResolved),e.isRejected)?(0,a.jsx)(d.D,{}):(0,a.jsxs)(u.I7,{scrollElement:t,outerTitle:o({id:"page.shelf"}),children:[(0,a.jsx)(h.h4,{variant:"text",withForwardControl:!1,withBackwardControl:x.canBack,children:(0,a.jsx)(c.Heading,{variant:"h2",weight:"bold",size:"xl",lineClamp:1,children:(0,a.jsx)(s.Z,{id:"page.shelf"})})}),(0,a.jsx)(r.t,{ref:i,containerClassName:p().scrollableContainer,className:p().root,children:(0,a.jsxs)("div",{className:p().content,children:[e.hasRecentlyPlayed&&(0,a.jsx)(v.c,{className:p().block,headerClassName:p().blockHeader,itemsCount:5,withHeader:!0}),e.hasLiked&&(0,a.jsx)(_.X,{className:p().block,headerClassName:p().blockHeader,itemsCount:5,withHeader:!0}),(0,a.jsx)(h.$_,{className:p().footer})]})})]})})},5677:function(e,t,i){"use strict";i.r(t),i.d(t,{CollectionShelfRecentlyPlayedPage:function(){return p}});var a=i(8759),o=i(33423),n=i(99616),l=i(65244),s=i(2814),r=i(71716),c=i(1918),d=i(70579),u=i(13236),m=i(5674),h=i(44285),_=i(46706),v=i(86122),x=i.n(v);let p=(0,o.Pi)(()=>{let{collection:{shelf:{recentlyPlayed:e}}}=(0,m.oR)(),[t,i]=(0,u.zU)(),{formatMessage:o}=(0,l.Z)(),v=(0,m.k6)();return((0,n.useEffect)(()=>()=>{e.reset()},[e]),(0,m.NO)(e.isResolved),e.isRejected)?(0,a.jsx)(d.D,{}):(0,a.jsxs)(u.I7,{scrollElement:t,outerTitle:o({id:"podcast.shelf-recently-played-title"}),children:[(0,a.jsx)(h.h4,{variant:"text",withForwardControl:!1,withBackwardControl:v.canBack,children:(0,a.jsx)(c.Heading,{variant:"h2",weight:"bold",size:"xl",lineClamp:1,children:(0,a.jsx)(s.Z,{id:"podcast.shelf-recently-played-title"})})}),(0,a.jsxs)(r.t,{ref:i,containerClassName:x().scrollableContainer,className:x().root,children:[(0,a.jsx)(_.c,{}),(0,a.jsx)(h.$_,{className:x().footer})]})]})})},16367:function(e,t,i){"use strict";i.d(t,{KN:function(){return d.MixedEntitiesBlock},gK:function(){return r.SearchCorrectedText},hF:function(){return s.SearchEmpty},xz:function(){return l.SearchEntitiesGrid},y9:function(){return c.SearchHistoryBlock},Iv:function(){return N},Id:function(){return a.SearchMixed},R_:function(){return n.SearchPodcastList},XM:function(){return o.SearchTrackList},Fu:function(){return P.F},vy:function(){return A.useClearHistory}});var a=i(98856),o=i(71711),n=i(12614),l=i(48365),s=i(96421),r=i(58392);i(32677),i(48875);var c=i(47893),d=i(61670);i(27095);var u=i(96555),m=i(34603),h=i(96911),_=i(20210),v=i(95539),x=i(81446),p=i(84290);let C=u.V5.model("SearchAlbum",{type:u.V5.literal(m.Sc.ALBUM),data:h.ug}),b=u.V5.model("SearchPlaylist",{type:u.V5.literal(m.Sc.PLAYLIST),data:_.d2}),f=u.V5.model("SearchArtist",{type:u.V5.literal(m.Sc.ARTIST),data:x.Go}),g=u.V5.model("SearchUgcTrack",{type:u.V5.literal(m.Sc.UGC_TRACK),data:v.bc}),y=u.V5.model("SearchTrack",{type:u.V5.literal(m.Sc.TRACK),data:v.le}),S=u.V5.model("SearchVibe",{type:u.V5.literal(m.Sc.WAVE),data:p.KW}),k=u.V5.model("SearchPodcast",{type:u.V5.literal(m.Sc.PODCAST),data:h.ug}),j=u.V5.model("SearchPodcastEpisode",{type:u.V5.literal(m.Sc.PODCAST_EPISODE),data:v.le}),N=u.V5.union(C,b,f,y,g,S,k,j);i(8759),i(57413),i(81546);var P=i(6348),A=i(33117)},6348:function(e,t,i){"use strict";i.d(t,{F:function(){return l}});var a=i(8759),o=i(34603),n=i(32677);let l=e=>{switch(e.type){case o.Sc.UGC_TRACK:case o.Sc.TRACK:{let t=e.data;return(0,a.jsx)(n.YL,{track:t},"".concat(e.type,"-").concat(t.id))}case o.Sc.ARTIST:{let t=e.data;return(0,a.jsx)(n.q3,{artist:t},"".concat(e.type,"-").concat(t.id))}case o.Sc.PLAYLIST:{let t=e.data;return(0,a.jsx)(n.tN,{playlist:t},t.key)}case o.Sc.ALBUM:{let t=e.data;return(0,a.jsx)(n.sx,{album:t},"".concat(e.type,"-").concat(t.id))}default:return null}}},33117:function(e,t,i){"use strict";i.r(t),i.d(t,{useClearHistory:function(){return u}});var a=i(8759),o=i(11769),n=i(99616),l=i(65244),s=i(2814),r=i(5674),c=i(44285);let d="/search",u=e=>{let{user:t,search:i}=(0,r.oR)(),{formatMessage:u}=(0,l.Z)(),{notify:m}=(0,r.d$)(),h=(0,o.useRouter)();return(0,n.useEffect)(()=>{i.isEmptyHistory&&h.push(d)},[i.isEmptyHistory,h]),(0,n.useCallback)(()=>{try{var o;(null===(o=t.account)||void 0===o?void 0:o.uid)&&i.clearHistory({userId:t.account.uid}),m((0,a.jsx)(c.Yj,{message:(0,a.jsx)(s.Z,{id:"search.cleared-history"})}),{containerId:r.W$.INFO}),e&&e(),h.push(d)}catch(e){m((0,a.jsx)(c.Q,{error:u({id:"error-messages.error-during-action"})}),{containerId:r.W$.ERROR})}},[t.account.uid,m,e,h,i,u])}},61670:function(e,t,i){"use strict";i.r(t),i.d(t,{MixedEntitiesBlock:function(){return v}});var a,o,n=i(8759),l=i(35338),s=i(31977),r=i(99616),c=i(61617),d=i(44285),u=i(27095),m=i(14346),h=i.n(m);(a=o||(o={})).ONE="one",a.TWO="two";let _=e=>{let{forwardRef:t,isLoading:i,title:a,description:m,viewAllAction:_,coverUrl:v,children:x,className:p="",maxColumns:C=2,itemsPerColumn:b=3,containerClassName:f="",headerClassName:g="",titleSize:y,showControls:S=!1}=e,[k,j]=(0,r.useState)(),N=(0,r.useRef)(null),P=(0,r.useId)(),A=(0,r.useMemo)(()=>{let e=(0,s.Z)(x,b).slice(0,C);return 1===e.length?j(o.ONE):j(o.TWO),e.map((e,t)=>(0,n.jsx)(u.MixedEntitiesList,{shimmersCount:3,isLoading:i,className:h().column,children:e},t))},[x,i,b,C]);return(0,n.jsxs)("section",{ref:t,className:(0,l.W)(p,h().root),children:[(0,n.jsx)(d.ti,{className:g,labeledForId:P,title:a,description:m,coverUrl:v,viewAllActionLink:_,titleSize:y,controls:S&&(0,n.jsx)(d.J8,{className:h().controls,carouselRef:N})}),(0,n.jsx)(c.l,{containerClassName:f,ref:N,itemClassName:(0,l.W)(h().columns,h()["columns_".concat(i&&C>1?o.TWO:k)]),"aria-labelledby":P,role:"group",children:A})]})},v=(0,r.forwardRef)((e,t)=>(0,n.jsx)(_,{forwardRef:t,...e}))},27095:function(e,t,i){"use strict";i.r(t),i.d(t,{MixedEntitiesList:function(){return _}});var a=i(8759),o=i(99616),n=i(65244),l=i(35338),s=i(12670),r=i(10809),c=i.n(r);let d=e=>{let{className:t,ariaLabel:i}=e;return(0,a.jsxs)("div",{tabIndex:0,"aria-label":i,"aria-live":"polite","aria-busy":!0,className:(0,l.W)(c().root,t),children:[(0,a.jsxs)("div",{className:c().infoContainer,children:[(0,a.jsx)(s.Shimmer,{className:c().cover,radius:"s"}),(0,a.jsxs)("div",{className:c().textContainer,children:[(0,a.jsx)(s.Shimmer,{className:c().title,radius:"s"}),(0,a.jsx)(s.Shimmer,{className:c().description,radius:"s"})]})]}),(0,a.jsx)(s.Shimmer,{className:c().action,radius:"s"})]})};var u=i(73270),m=i.n(u);let h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,{formatMessage:t}=(0,n.Z)(),i=(0,o.useMemo)(()=>t({id:"loading-messages.entity-is-loading"},{entityName:t({id:"search.history"})}),[t]);return Array.from({length:e},(e,t)=>(0,a.jsx)(d,{className:m().shimmer,ariaLabel:i},t))},_=e=>{let{isLoading:t,shimmersCount:i,className:o,children:n}=e;return(0,a.jsx)("div",{className:o,children:t?h(i):n})}},84834:function(e,t,i){"use strict";i.r(t),i.d(t,{AlbumItem:function(){return p}});var a=i(8759),o=i(35338),n=i(33423),l=i(99616),s=i(57413),r=i(96213),c=i(14581),d=i(1918),u=i(96911),m=i(5674),h=i(44285),_=i(48875),v=i(72735),x=i.n(v);let p=(0,n.Pi)(e=>{var t;let{className:i,album:n}=e,v=(0,m.x5)({pageId:m.Rh.SEARCH}),p=(0,m.s0)(n.url),{sonataState:{status:C}}=(0,m.oR)(),{isPlaying:b,isCurrent:f,togglePlay:g}=(0,m.qm)({playContextParams:{contextData:{type:s.Ak.Album,meta:{id:n.id},from:v},loadContextMeta:!0},sonataStatus:C}),y=(0,u.jV)({album:n,callback:p}),S=(0,u.jV)({album:n,callback:g}),{sendPlaySearchFeedback:k}=(0,m.sA)(),[j,N]=(0,l.useState)(!1),P=(0,l.useCallback)(()=>{j||b||(N(!0),null==k||k()),S()},[b,j,k,S]),A=(0,l.useCallback)(e=>{(0,r.m)(e,x().ripple),y(e)},[y]),E=(0,l.useCallback)(e=>{y(e)},[y]),L=(0,l.useCallback)(e=>(0,a.jsx)(h.Df,{isAvailable:n.isAvailable,isDisliked:!1,coverUri:n.coverUri,title:n.title,className:x().playButtonCell,...e}),[n]),I=null==L?void 0:L({onPlayButtonClick:P,isPlaying:b,isCurrent:f}),T=(0,l.useMemo)(()=>n.url&&n.isAvailable?(0,a.jsx)(h.rU,{className:(0,o.W)(x().text,x().titleLink),href:n.url,onClick:E,children:n.title}):(0,a.jsx)(d.Caption,{className:(0,o.W)(x().text,x().titleText),size:"m",variant:"div",type:"text",children:n.title}),[n.isAvailable,n.title,n.url,E]);return(0,a.jsxs)(h.Md,{className:(0,o.W)(x().root,{[x().root_disabled]:!n.isAvailable},i),"aria-label":"".concat(n.artistNames," ").concat(n.title," ").concat(null!==(t=n.version)&&void 0!==t?t:""),onClick:A,children:[I,(0,a.jsx)(_.J,{isDisabled:!n.isAvailable,artists:n.artists,version:n.version,title:T,explicitMarkVariant:n.albumExplicitMark}),(0,a.jsx)("div",{className:x().controlsBarCell,children:(0,a.jsx)(c.J,{className:x().buttonArrow,variant:"arrowRight",size:"xs"})})]})})},40558:function(e,t,i){"use strict";i.r(t),i.d(t,{ArtistItem:function(){return C}});var a=i(8759),o=i(35338),n=i(33423),l=i(99616),s=i(65244),r=i(57413),c=i(96213),d=i(14581),u=i(1918),m=i(81546),h=i(5674),_=i(44285),v=i(48875),x=i(72735),p=i.n(x);let C=(0,n.Pi)(e=>{let{className:t,artist:i}=e,n=(0,h.x5)({pageId:h.Rh.SEARCH}),x=(0,h.s0)(i.url),{formatMessage:C}=(0,s.Z)(),{sonataState:{status:b}}=(0,h.oR)(),{isPlaying:f,isCurrent:g,togglePlay:y}=(0,h.qm)({playContextParams:{contextData:{type:r.Ak.Artist,meta:{id:Number(i.id)},from:n},loadContextMeta:!0},sonataStatus:b}),S=(0,m.v2)({artist:i,callback:x}),k=(0,m.v2)({artist:i,callback:y}),{sendPlaySearchFeedback:j}=(0,h.sA)(),[N,P]=(0,l.useState)(!1),A=(0,l.useCallback)(()=>{N||f||(P(!0),null==j||j()),k()},[k,f,N,j]),E=(0,l.useCallback)(e=>{(0,c.m)(e,p().ripple),S(e)},[S]),L=(0,l.useCallback)(e=>{S(e)},[S]),I=(0,l.useCallback)(e=>(0,a.jsx)(_.Df,{isAvailable:i.isAvailable,isDisliked:!1,coverUri:i.coverUri,title:i.name,className:p().playButtonCell,radius:"round",...e}),[i,!1]),T=null==I?void 0:I({onPlayButtonClick:A,isPlaying:f,isCurrent:g}),R=(0,l.useMemo)(()=>i.url&&i.isAvailable?(0,a.jsx)(_.rU,{className:(0,o.W)(p().text,p().titleLink),href:i.url,onClick:L,children:i.name}):(0,a.jsx)(u.Caption,{className:(0,o.W)(p().text,p().titleText),size:"m",variant:"div",type:"text",children:i.name}),[i.isAvailable,i.name,i.url,L]);return(0,a.jsxs)(_.Md,{className:(0,o.W)(p().root,{[p().root_disabled]:!i.isAvailable},t),"aria-label":i.name,onClick:E,children:[T,(0,a.jsx)(v.J,{isDisabled:!i.isAvailable,isDisliked:!1,title:R,description:C({id:"entity-names.singer"})}),(0,a.jsx)("div",{className:p().controlsBarCell,children:(0,a.jsx)(d.J,{className:p().buttonArrow,variant:"arrowRight",size:"xs"})})]})})},4732:function(e,t,i){"use strict";i.r(t),i.d(t,{PlaylistItem:function(){return p}});var a=i(8759),o=i(35338),n=i(33423),l=i(99616),s=i(65244),r=i(57413),c=i(96213),d=i(14581),u=i(1918),m=i(5674),h=i(44285),_=i(48875),v=i(72735),x=i.n(v);let p=(0,n.Pi)(e=>{let{className:t,playlist:i}=e,n=(0,m.x5)({pageId:m.Rh.SEARCH}),v=(0,m.s0)(i.url),p=i.title||"",{formatMessage:C}=(0,s.Z)(),{sonataState:{status:b}}=(0,m.oR)(),{isPlaying:f,isCurrent:g,togglePlay:y}=(0,m.qm)({playContextParams:{contextData:{type:r.Ak.Playlist,meta:{id:i.id,uuid:i.uuid},from:n},loadContextMeta:!0},sonataStatus:b}),{sendPlaySearchFeedback:S}=(0,m.sA)(),[k,j]=(0,l.useState)(!1),N=(0,l.useCallback)(()=>{k||f||(j(!0),null==S||S()),y()},[f,k,S,y]),P=(0,l.useCallback)(e=>{i.isAvailable&&((0,c.m)(e,x().ripple),v())},[v,i.isAvailable]),A=(0,l.useCallback)(()=>{i.isAvailable&&v()},[v,i.isAvailable]),E=(0,l.useCallback)(e=>(0,a.jsx)(h.Df,{isAvailable:i.isAvailable,isDisliked:!1,coverUri:i.coverUri,title:p,className:x().playButtonCell,...e}),[i,p]),L=null==E?void 0:E({onPlayButtonClick:N,isPlaying:f,isCurrent:g}),I=(0,l.useMemo)(()=>i.url&&i.isAvailable?(0,a.jsx)(h.rU,{className:(0,o.W)(x().text,x().titleLink),href:i.url,onClick:A,children:p}):(0,a.jsx)(u.Caption,{className:(0,o.W)(x().text,x().titleText),size:"m",variant:"div",type:"text",children:p}),[A,i.isAvailable,i.url,p]);return(0,a.jsxs)(h.Md,{className:(0,o.W)(x().root,{[x().root_disabled]:!i.isAvailable},t),"aria-label":i.title||C({id:"entity-names.playlist"}),onClick:P,children:[L,(0,a.jsx)(_.J,{isDisabled:!i.isAvailable,title:I}),(0,a.jsx)("div",{className:x().controlsBarCell,children:(0,a.jsx)(d.J,{className:x().buttonArrow,variant:"arrowRight",size:"xs"})})]})})},92410:function(e,t,i){"use strict";i.r(t),i.d(t,{TrackItem:function(){return _}});var a=i(8759),o=i(35338),n=i(33423),l=i(99616),s=i(57413),r=i(96213),c=i(95539),d=i(5674),u=i(44285),m=i(72735),h=i.n(m);let _=(0,n.Pi)(e=>{var t;let{className:i,track:n}=e,m=(0,d.x5)({pageId:d.Rh.SEARCH}),{sonataState:{status:_}}=(0,d.oR)(),v=n.albumId?"".concat(n.id,":").concat(n.albumId):n.id,{isPlaying:x,isCurrent:p,togglePlay:C,restartPlay:b}=(0,d.qm)({playContextParams:{contextData:{type:s.Ak.Various,meta:{id:v},from:m,overrideContextType:s.Zc.Search},queueParams:{index:0},loadContextMeta:!0},sonataStatus:_,entityId:v}),f=(0,c.nD)({track:n,callback:C}),{sendPlaySearchFeedback:g}=(0,d.sA)(),[y,S]=(0,l.useState)(!1),k=(0,l.useCallback)(()=>{y||x||(S(!0),null==g||g()),f()},[x,y,g,f]),j=(0,l.useCallback)(()=>{x?b():k()},[x,b,k]),N=(0,l.useCallback)(e=>{2===e.detail?j():(0,r.m)(e,h().ripple)},[j]),P=(0,l.useCallback)(e=>(0,a.jsx)(u.Df,{isAvailable:n.isAvailable,isDisliked:n.isDisliked,coverUri:n.coverUri,title:n.title,className:h().playButtonCell,...e}),[n]),A=null==P?void 0:P({onPlayButtonClick:k,isPlaying:x,isCurrent:p});return(0,a.jsxs)(u.Md,{className:(0,o.W)(h().root,i),"aria-label":"".concat(n.artistsNames," ").concat(n.title," ").concat(null!==(t=n.version)&&void 0!==t?t:""),onClick:N,children:[A,(0,a.jsx)(c.ko,{track:n}),(0,a.jsx)(c.jt,{className:h().controlsBarCell,track:n})]})})},32677:function(e,t,i){"use strict";i.d(t,{YL:function(){return o.TrackItem},q3:function(){return n.ArtistItem},sx:function(){return l.AlbumItem},tN:function(){return a.PlaylistItem}});var a=i(4732),o=i(92410),n=i(40558),l=i(84834)},48875:function(e,t,i){"use strict";i.d(t,{J:function(){return d}});var a=i(8759),o=i(35338),n=i(33066),l=i(1918),s=i(81446),r=i(53594),c=i.n(r);let d=e=>{let{isDisliked:t,isDisabled:i,artists:r=[],description:d,explicitMarkVariant:u,className:m,version:h,title:_}=e;return(0,a.jsxs)("div",{className:(0,o.W)(c().root,{[c().root_disabled]:i,[c().root_disliked]:t},m),children:[(0,a.jsxs)("div",{className:c().titleContainer,children:[(0,a.jsxs)(l.Caption,{className:(0,o.W)(c().text,c().title,{[c().title_withVersion]:h}),size:"m",variant:"div",lineClamp:1,type:"text",children:[_,h&&(0,a.jsx)(l.Caption,{className:(0,o.W)(c().text,c().version),size:"m",variant:"div",type:"text",children:" ".concat(h)})]}),u&&(0,a.jsx)(n.ExplicitMark,{className:c().explicitMark,variant:u})]}),r.length>0&&(0,a.jsx)(s.jO,{linkClassName:(0,o.W)(c().text,c().artistLink),captionClassName:(0,o.W)(c().text,c().artistCaption),artists:r,lineClamp:1,withLink:!i}),!r&&d&&(0,a.jsx)(l.Caption,{className:(0,o.W)(c().text,c().description),variant:"span",type:"text",lineClamp:1,children:d})]})}},58392:function(e,t,i){"use strict";i.r(t),i.d(t,{SearchCorrectedText:function(){return u}});var a=i(8759),o=i(99616),n=i(65244),l=i(2814),s=i(15527),r=i(1918),c=i(43312),d=i.n(c);let u=e=>{let{onCorrectText:t,searchCorrectedText:i}=e,{formatMessage:c}=(0,n.Z)(),u=(0,o.useMemo)(()=>({text:(0,a.jsx)(s.z,{"aria-label":c({id:"search.corrected-text"},{text:i}),variant:"text",radius:"xs",onClick:t,children:(0,a.jsx)(r.Caption,{className:d().link,variant:"span",size:"m",type:"text",children:i})})}),[c,i,t]);return(0,a.jsx)("div",{className:d().root,children:(0,a.jsx)(r.Caption,{className:d().text,variant:"span",size:"m",type:"text",children:(0,a.jsx)(l.Z,{id:"search.corrected-text",values:u})})})}},96421:function(e,t,i){"use strict";i.r(t),i.d(t,{SearchEmpty:function(){return _},SearchEmptyComponent:function(){return h}});var a=i(8759),o=i(35338),n=i(99616),l=i(65244),s=i(14581),r=i(71716),c=i(1918),d=i(44285),u=i(24435),m=i.n(u);let h=e=>{let{forwardRef:t,className:i,searchCorrectedText:n}=e,{formatMessage:u}=(0,l.Z)();return(0,a.jsxs)(r.t,{className:(0,o.W)(m().root,i),containerClassName:m().container,ref:t,children:[(0,a.jsxs)("div",{className:m().content,children:[n&&(0,a.jsx)("div",{className:m().correctedTextBlock,children:n}),(0,a.jsx)(s.J,{className:m().icon,variant:"search",size:"xxl"}),(0,a.jsx)(c.Heading,{className:m().title,size:"s",weight:"bold",variant:"h3",children:u({id:"search-results.not-found-title"})}),(0,a.jsx)(c.Caption,{className:m().subtitle,variant:"div",type:"text",size:"l",weight:"normal",children:u({id:"search-results.not-found-description"})})]}),(0,a.jsx)(d.$_,{className:m().footer})]})},_=(0,n.forwardRef)((e,t)=>(0,a.jsx)(h,{forwardRef:t,...e}))},48365:function(e,t,i){"use strict";i.r(t),i.d(t,{SearchEntitiesGrid:function(){return x}});var a=i(8759),o=i(35338),n=i(99616),l=i(34603),s=i(71716),r=i(96911),c=i(81546),d=i(20210),u=i(5674),m=i(44285),h=i(24528),_=i.n(h);let v=e=>{let{forwardRef:t,className:i,results:h,filter:v,isLoading:x,sendSearchFeedback:p,searchCorrectedText:C,children:b}=e,[f,g]=(0,n.useState)(0),y=(0,n.useMemo)(()=>{if(x)return(0,a.jsx)(m.Wm,{isActive:!0,itemClassName:_().block,round:v===l.Sc.ARTIST,centered:v===l.Sc.ARTIST,count:36});let e=h.filter(e=>e.type===v);return g(e.length),e.map((e,t)=>{switch(e.type){case l.Sc.ALBUM:return(0,a.jsx)(u.B1.Provider,{value:{sendSearchFeedback:p,id:e.data.id,type:l.Bm.ALBUM,blockPosition:0,position:t},children:(0,a.jsx)(r.rf,{album:e.data},e.data.id)});case l.Sc.PLAYLIST:return(0,a.jsx)(u.B1.Provider,{value:{sendSearchFeedback:p,id:e.data.id,type:l.Bm.PLAYLIST,blockPosition:0,position:t},children:(0,a.jsx)(d.ZL,{playlist:e.data},e.data.key)});case l.Sc.ARTIST:return(0,a.jsx)(u.B1.Provider,{value:{sendSearchFeedback:p,id:e.data.id,type:l.Bm.ARTIST,blockPosition:0,position:t},children:(0,a.jsx)(c.IT,{artist:e.data},e.data.id)});case l.Sc.PODCAST:return(0,a.jsx)(u.B1.Provider,{value:{sendSearchFeedback:p,id:e.data.id,type:l.Bm.PODCAST,blockPosition:0,position:t},children:(0,a.jsx)(r.rf,{album:e.data,withLikesCount:!0,withAddition:!1},e.data.id)});default:return null}})},[x,h,v,p]);return(0,a.jsxs)(s.t,{className:(0,o.W)(_().root,i),containerClassName:_().container,ref:t,children:[(0,a.jsxs)("div",{children:[C&&(0,a.jsx)("div",{className:_().correctedTextBlock,children:C}),(0,a.jsx)("div",{className:(0,o.W)(_().items,{[_().items_withChildren]:f>0&&!!b}),children:y}),b]}),(0,a.jsx)(m.$_,{className:_().footer})]})},x=(0,n.forwardRef)((e,t)=>(0,a.jsx)(v,{forwardRef:t,...e}))},47893:function(e,t,i){"use strict";i.r(t),i.d(t,{SearchHistoryBlock:function(){return k}});var a=i(8759),o=i(33423),n=i(5674),l=i(99616),s=i(65244),r=i(6348),c=i(61670),d=i(11894),u=i.n(d);let m="/search/history",h=e=>e===m,_=(0,o.Pi)(()=>{var e;let t=(0,n.uK)(),i=t.get(n.U5),{search:o,user:d,experiments:_}=(0,n.oR)(),{formatMessage:v}=(0,s.Z)(),x=o.history.items;if(o.isHistoryReady&&(null===(e=d.account)||void 0===e?void 0:e.uid)&&(0,l.use)(o.getHistory({userId:d.account.uid,config:i,experiments:_})),(0,l.useEffect)(()=>()=>{var e;h(null===(e=location)||void 0===e?void 0:e.pathname)||o.resetHistoryStateRequest()},[o]),0===x.length)return null;let p=x.map(r.F).filter(e=>e);return(0,a.jsx)("section",{className:u().root,children:(0,a.jsx)(c.MixedEntitiesBlock,{headerClassName:u().header,containerClassName:u().content,isLoading:o.isHistoryLoading,title:v({id:"search.history"}),viewAllAction:m,maxColumns:2,itemsPerColumn:4,showControls:!0,children:p})})});var v=i(2814),x=i(15527),p=i(1918),C=i(33117),b=i(95020),f=i.n(b);let g="/search/history",y=e=>e===g,S=(0,o.Pi)(()=>{var e;let t=(0,n.uK)(),i=t.get(n.U5),{search:o,user:d,experiments:u}=(0,n.oR)(),{formatMessage:m}=(0,s.Z)(),h=(0,C.useClearHistory)(o.resetHistoryItems),_=o.history.items;if(o.isHistoryReady&&(null===(e=d.account)||void 0===e?void 0:e.uid)&&(0,l.use)(o.getHistory({userId:d.account.uid,config:i,experiments:u})),(0,l.useEffect)(()=>()=>{var e;y(null===(e=location)||void 0===e?void 0:e.pathname)||o.resetHistoryStateRequest()},[o]),0===_.length)return null;let b=_.map(r.F).filter(e=>e);return(0,a.jsxs)("div",{children:[(0,a.jsx)(c.MixedEntitiesBlock,{headerClassName:f().header,containerClassName:f().mixedEntitiesBlock,isLoading:o.isHistoryLoading,title:m({id:"search.history"}),viewAllAction:g,titleSize:"xs",children:b}),(0,a.jsx)("div",{className:f().buttonContainer,children:(0,a.jsx)(x.z,{className:f().button,"aria-label":m({id:"search.clear-history"}),disabled:!_.length,size:"default",radius:"xxxl",onClick:h,children:(0,a.jsx)(p.Caption,{variant:"span",size:"m",type:"text",children:(0,a.jsx)(v.Z,{id:"search.clear-history"})})})})]})}),k=(0,o.Pi)(()=>{let{settings:e}=(0,n.oR)(),t=e.layout===n.t8.Mobile;return t?(0,a.jsx)(S,{}):(0,a.jsx)(_,{})})},98856:function(e,t,i){"use strict";i.r(t),i.d(t,{SearchMixed:function(){return j},SearchMixedComponent:function(){return k}});var a=i(8759),o=i(35338),n=i(99616),l=i(65244),s=i(34603),r=i(71716),c=i(44285),d=i(33423),u=i(57413),m=i(96911),h=i(81546),_=i(20210),v=i(95539),x=i(84290),p=i(5674);let C=e=>e.filter(e=>e.type!==s.Sc.PODCAST_EPISODE),b=(0,d.Pi)(e=>{let{forwardRef:t,isLoading:i=!1,items:o=[],title:n,sendSearchFeedback:l,blockPosition:r=0,containerClassName:d,headerClassName:b,className:f}=e,g=C(o);return(0,a.jsx)(c.HY,{isShimmerVisible:i,isShimmerActive:!0,className:f,containerClassName:d,headerClassName:b,showHeaderShimmer:!0,title:n,ref:t,children:g.map((e,t)=>{switch(e.type){case s.Sc.ALBUM:return(0,a.jsx)(p.B1.Provider,{value:{sendSearchFeedback:l,id:e.data.id,type:s.Bm.ALBUM,blockPosition:r,position:t},children:(0,a.jsx)(m.rf,{album:e.data,contentLinesCount:3})},e.data.id);case s.Sc.ARTIST:return(0,a.jsx)(p.B1.Provider,{value:{sendSearchFeedback:l,id:e.data.id,type:s.Bm.ARTIST,blockPosition:r,position:t},children:(0,a.jsx)(h.IT,{artist:e.data,contentLinesCount:3})},e.data.id);case s.Sc.PLAYLIST:return(0,a.jsx)(p.B1.Provider,{value:{sendSearchFeedback:l,id:e.data.id,type:s.Bm.PLAYLIST,blockPosition:r,position:t},children:(0,a.jsx)(_.ZL,{playlist:e.data,contentLinesCount:3})},e.data.key);case s.Sc.UGC_TRACK:case s.Sc.TRACK:return(0,a.jsx)(p.B1.Provider,{value:{sendSearchFeedback:l,id:e.data.albumId?"".concat(e.data.id,":").concat(e.data.albumId):e.data.id,type:s.Bm.TRACK,blockPosition:r,position:t},children:(0,a.jsx)(v.G7,{track:e.data,overrideContextType:u.Zc.Search})},e.data.id);case s.Sc.WAVE:return(0,a.jsx)(p.B1.Provider,{value:{sendSearchFeedback:l,id:e.data.stationId,type:s.Bm.WAVE,blockPosition:r,position:t},children:(0,a.jsx)(x.op,{vibe:e.data})},e.data.stationId);case s.Sc.PODCAST:return(0,a.jsx)(p.B1.Provider,{value:{sendSearchFeedback:l,id:e.data.id,type:s.Bm.PODCAST,blockPosition:r,position:t},children:(0,a.jsx)(m.rf,{album:e.data,contentLinesCount:3,withLikesCount:!0,withAddition:!1})},e.data.id)}})})}),f=(0,n.forwardRef)((e,t)=>(0,a.jsx)(b,{forwardRef:t,...e}));var g=i(86134),y=i.n(g);let S=()=>{let e=Array.from([,,].keys());return e.map(e=>(0,a.jsx)(f,{isLoading:!0,className:y().block,headerClassName:y().blockHeader,containerClassName:y().blockCarousel},e))},k=e=>{let{forwardRef:t,className:i,results:d,isLoading:u,sendSearchFeedback:m,searchCorrectedText:h}=e,{formatMessage:_}=(0,l.Z)(),v=(0,n.useMemo)(()=>{if(u)return(0,a.jsx)(S,{});let e={[s.Sc.ALL]:{message:_({id:"search-results.best"}),type:s.Sc.ALL,items:[]},[s.Sc.ARTIST]:{message:_({id:"search-results.artist"}),type:s.Sc.ARTIST,items:[]},[s.Sc.PODCAST]:{message:_({id:"search-results.podcasts-and-books"}),type:s.Sc.PODCAST,items:[]},[s.Sc.ALBUM]:{message:_({id:"search-results.album"}),type:s.Sc.ALBUM,items:[]},[s.Sc.PLAYLIST]:{message:_({id:"search-results.playlist"}),type:s.Sc.PLAYLIST,items:[]}};return d.forEach(t=>{var i,a;null===(i=e[t.type])||void 0===i||i.items.push(t),null===(a=e[s.Sc.ALL])||void 0===a||a.items.push(t)}),Object.getOwnPropertyNames(e).filter(t=>{let i=e[t];return i.items.length>0}).map((t,i)=>{let o=e[t];return(0,a.jsx)(f,{className:y().block,headerClassName:y().blockHeader,containerClassName:y().blockCarousel,blockPosition:i,items:o.items,title:o.message,sendSearchFeedback:m},i)})},[u,d,_,m]);return(0,a.jsxs)(r.t,{className:(0,o.W)(y().root,i),containerClassName:y().container,ref:t,children:[(0,a.jsxs)("div",{className:y().content,children:[h&&(0,a.jsx)("div",{className:y().correctedTextBlock,children:h}),(0,a.jsx)("div",{className:y().items,children:v})]}),(0,a.jsx)(c.$_,{className:y().footer})]})},j=(0,n.forwardRef)((e,t)=>(0,a.jsx)(k,{forwardRef:t,...e}))},12614:function(e,t,i){"use strict";i.r(t),i.d(t,{SearchPodcastList:function(){return b}});var a=i(8759),o=i(99616),n=i(34603);let l=e=>{let t=[],i=[];return e.forEach(e=>{e.type===n.Sc.PODCAST?t.push(e):i.push(e)}),{podcasts:t,podcastEpisodes:i}};var s=i(48365),r=i(33423),c=i(65244),d=i(57413),u=i(95539),m=i(5674),h=i(61670),_=i(77193),v=i.n(_);let x=(0,r.Pi)(e=>{let{results:t,isLoading:i,sendSearchFeedback:l}=e,s=(0,m.x5)(),{formatMessage:r}=(0,c.Z)(),_=(0,o.useMemo)(()=>t.map((e,t)=>{let i=e.data.albumId?"".concat(e.data.id,":").concat(e.data.albumId):e.data.id;return(0,a.jsx)(m.B1.Provider,{value:{sendSearchFeedback:l,id:e.data.id,type:n.Bm.PODCAST_EPISODE,blockPosition:0,position:t},children:(0,a.jsx)(u.N6,{track:e.data,playContextParams:{contextData:{type:d.Ak.Various,meta:{id:i},from:s},queueParams:{index:0},loadContextMeta:!0},withPodcastName:!0})},i)}),[t,s,l]);return(0,a.jsx)(h.MixedEntitiesBlock,{className:v().root,headerClassName:v().header,containerClassName:v().content,isLoading:i,title:r({id:"search-results.podcast-episodes"}),maxColumns:1,itemsPerColumn:4,showControls:!0,children:_})}),p=(0,o.forwardRef)((e,t)=>(0,a.jsx)(x,{forwardRef:t,...e})),C=e=>{let{isLoading:t,results:i,sendSearchFeedback:o,searchCorrectedText:r,className:c}=e,{podcasts:d,podcastEpisodes:u}=l(i);return(0,a.jsx)(s.SearchEntitiesGrid,{className:c,isLoading:t,results:d,filter:n.ay.PODCAST,sendSearchFeedback:o,searchCorrectedText:r,children:u.length>0?(0,a.jsx)(p,{sendSearchFeedback:o,results:u,isLoading:t}):void 0})},b=(0,o.forwardRef)((e,t)=>(0,a.jsx)(C,{forwardRef:t,...e}))},71711:function(e,t,i){"use strict";i.r(t),i.d(t,{SearchTrackList:function(){return x}});var a=i(8759),o=i(35338),n=i(99616),l=i(57413),s=i(34603),r=i(71716),c=i(95539),d=i(5674),u=i(44285),m=i(79123),h=i.n(m);let _=()=>{let e=Array.from(Array(36).keys());return e.map(e=>(0,a.jsx)(u.DX,{isActive:!0,className:h().shimmer,variant:d.Lx.PLAYLIST},e))},v=e=>{let{forwardRef:t,className:i,results:m,isLoading:v,sendSearchFeedback:x,searchCorrectedText:p}=e,C=(0,d.x5)(),b=(0,n.useCallback)((e,t)=>({contextData:{type:l.Ak.Various,meta:{id:t?"".concat(e,":").concat(t):e},from:C,overrideContextType:l.Zc.Search},queueParams:{index:0},loadContextMeta:!0}),[C]),f=(0,n.useMemo)(()=>v?(0,a.jsx)(_,{}):m.filter(e=>[s.Sc.TRACK,s.Sc.UGC_TRACK].includes(e.type)).map((e,t)=>{let{data:i}=e;return(0,a.jsx)(d.B1.Provider,{value:{sendSearchFeedback:x,id:i.albumId?"".concat(i.id,":").concat(i.albumId):i.id,type:s.Bm.TRACK,blockPosition:0,position:t},children:(0,a.jsx)(c.O2,{track:i,playContextParams:b(i.id,i.albumId),shouldCheckSelfIndex:!1})},i.id)}),[v,m,b,x]);return(0,a.jsxs)(r.t,{className:(0,o.W)(h().root,i),containerClassName:h().container,ref:t,children:[(0,a.jsxs)("div",{className:h().content,children:[p&&(0,a.jsx)("div",{className:h().correctedTextBlock,children:p}),(0,a.jsx)("div",{className:h().items,children:f})]}),(0,a.jsx)(u.$_,{className:h().footer})]})},x=(0,n.forwardRef)((e,t)=>(0,a.jsx)(v,{forwardRef:t,...e}))},70579:function(e,t,i){"use strict";i.d(t,{D:function(){return a.SomethingWentWrong}});var a=i(48471)},48471:function(e,t,i){"use strict";i.r(t),i.d(t,{SomethingWentWrong:function(){return v}});var a=i(8759),o=i(35338),n=i(33423),l=i(99616),s=i(2814),r=i(15527),c=i(14581),d=i(1918),u=i(42769),m=i(5674),h=i(29847),_=i.n(h);let v=(0,n.Pi)(e=>{let{className:t,withBackwardControl:i=!0}=e,n=(0,l.useCallback)(()=>{window.location.reload()},[]),{contentRef:h}=(0,m.$Y)();return(0,a.jsxs)("div",{className:(0,o.W)(_().root,t),children:[i&&(0,a.jsx)(u.n,{withBackwardFallback:"/",className:(0,o.W)(_().navigation,{[_().navigation_desktop]:!h}),withForwardControl:!1}),(0,a.jsxs)("div",{className:(0,o.W)(_().content,{[_().content_shrink]:!i}),children:[(0,a.jsx)(c.J,{className:_().icon,variant:"attention",size:"xxl"}),(0,a.jsx)(d.Heading,{className:(0,o.W)(_().title,_().important),variant:"h3",size:"xs",children:(0,a.jsx)(s.Z,{id:"error-messages.something-went-wrong"})}),(0,a.jsxs)(d.Caption,{className:(0,o.W)(_().text,_().important),variant:"span",type:"text",size:"l",weight:"normal",children:[!1,(0,a.jsx)(s.Z,{id:"page-error.try-to-restart-app"})]}),(0,a.jsx)(r.z,{onClick:n,className:_().button,role:"link",color:"secondary",size:"l",radius:"xxxl",children:(0,a.jsxs)(d.Caption,{type:"controls",variant:"span",size:"m",children:[!1,(0,a.jsx)(s.Z,{id:"page-error.restart-app-button"})]})})]})]})})},42781:function(e){e.exports={root_visible:"VibeAnimation_root_visible__S7kXl","fade-in":"VibeAnimation_fade-in__hx6bD"}},68585:function(e){e.exports={root:"CollectionAlbumsPage_root__qMtcC"}},21017:function(e){e.exports={root:"CollectionAlbumsPageContent_root__2Ya18",scrollContainer:"CollectionAlbumsPageContent_scrollContainer__0TjJm",important:"CollectionAlbumsPageContent_important__fixM8",content:"CollectionAlbumsPageContent_content__jcwRU",footer:"CollectionAlbumsPageContent_footer__ZkUKY",item:"CollectionAlbumsPageContent_item__I_Wuz",tabPanel:"CollectionAlbumsPageContent_tabPanel__0qXKZ"}},91036:function(e){e.exports={root:"CollectionAlbumsPageEmpty_root__7yn1F",icon:"CollectionAlbumsPageEmpty_icon__XFf9x",title:"CollectionAlbumsPageEmpty_title__hMQde",text:"CollectionAlbumsPageEmpty_text__jp_lj"}},915:function(e){e.exports={root:"CollectionAlbumsPageHeader_root__87L_c",container:"CollectionAlbumsPageHeader_container__96cIo",title:"CollectionAlbumsPageHeader_title__1Ps8d",tabs:"CollectionAlbumsPageHeader_tabs__P4GTY",tab:"CollectionAlbumsPageHeader_tab__JSFBc",tabsShimmer:"CollectionAlbumsPageHeader_tabsShimmer__fGlR0",tabShimmer:"CollectionAlbumsPageHeader_tabShimmer__9hCc6",staticHeader:"CollectionAlbumsPageHeader_staticHeader__YNfX4",important:"CollectionAlbumsPageHeader_important__0dgC2",stickyHeader:"CollectionAlbumsPageHeader_stickyHeader__L_1IS"}},77979:function(e){e.exports={root:"CollectionArtistsPage_root__EH25F",container:"CollectionArtistsPage_container__mNUIo",scrollContent:"CollectionArtistsPage_scrollContent__CSeYr",scrollContainer:"CollectionArtistsPage_scrollContainer__tT6NQ",important:"CollectionArtistsPage_important__MG_XV",footer:"CollectionArtistsPage_footer__aZrx3",item:"CollectionArtistsPage_item___cy_9",content:"CollectionArtistsPage_content__Jd9hE"}},73297:function(e){e.exports={root:"CollectionNonMusicLikedPage_root__0e_hz",scrollContent:"CollectionNonMusicLikedPage_scrollContent__ThdnN",scrollContainer:"CollectionNonMusicLikedPage_scrollContainer__OthtN",important:"CollectionNonMusicLikedPage_important__MNJX3",footer:"CollectionNonMusicLikedPage_footer__F_mtD",item:"CollectionNonMusicLikedPage_item__Rb0yS",emptyBlock:"CollectionNonMusicLikedPage_emptyBlock__WAdri",content:"CollectionNonMusicLikedPage_content__9WDX5"}},50232:function(e){e.exports={emptyContent:"CollectionNonMusicEmpty_emptyContent__Km4Xo",emptyContentIcon:"CollectionNonMusicEmpty_emptyContentIcon__ZHVte",emptyContentTitle:"CollectionNonMusicEmpty_emptyContentTitle__PJIFd"}},29977:function(e){e.exports={root:"CollectionNonMusicPage_root__U6DRX",scrollableContainer:"CollectionNonMusicPage_scrollableContainer__iIZvl",important:"CollectionNonMusicPage_important__Y9D5x",content:"CollectionNonMusicPage_content__d8E7R",carousel:"CollectionNonMusicPage_carousel__zDCY0",blockHeader:"CollectionNonMusicPage_blockHeader__PoAFY",footer:"CollectionNonMusicPage_footer__9feIA",shelfBlock:"CollectionNonMusicPage_shelfBlock__gC5Vu",shelfBlockHeader:"CollectionNonMusicPage_shelfBlockHeader__yfFcf"}},23234:function(e){e.exports={root:"CollectionPage_root__CZAxL",root_withCollectionColor:"CollectionPage_root_withCollectionColor__4kV02",content:"CollectionPage_content__c3f8z",header:"CollectionPage_header__z193s",description:"CollectionPage_description__A3dny",collectionColor:"CollectionPage_collectionColor__M5l1f",landing:"CollectionPage_landing__B4jW_",landing_onlyWizard:"CollectionPage_landing_onlyWizard__umeEK",footer:"CollectionPage_footer__9kzD0",footer_onlyWizard:"CollectionPage_footer_onlyWizard__FxCwa",error:"CollectionPage_error__xs4ZH"}},85742:function(e){e.exports={root:"CollectionPlaylistsCreatedPage_root__o77CF",scrollContainer:"CollectionPlaylistsCreatedPage_scrollContainer__Spb2M",important:"CollectionPlaylistsCreatedPage_important__DLkOq",content:"CollectionPlaylistsCreatedPage_content___qalr",footer:"CollectionPlaylistsCreatedPage_footer__I2jJa",item:"CollectionPlaylistsCreatedPage_item__2RmBg"}},92158:function(e){e.exports={root:"CollectionPlaylistsLikedPage_root__ZyIwA",scrollContainer:"CollectionPlaylistsLikedPage_scrollContainer__H_vPA",important:"CollectionPlaylistsLikedPage_important__GjYTU",content:"CollectionPlaylistsLikedPage_content__WIxhp",footer:"CollectionPlaylistsLikedPage_footer__A60Ui",item:"CollectionPlaylistsLikedPage_item__PpCht"}},95187:function(e){e.exports={root:"CollectionPlaylistsPage_root__1QnBw"}},82825:function(e){e.exports={root:"CollectionPlaylistsPageContent_root__hGnWW",scrollContainer:"CollectionPlaylistsPageContent_scrollContainer__fiLLm",important:"CollectionPlaylistsPageContent_important__ebi2p",content:"CollectionPlaylistsPageContent_content__aZ2bA",footer:"CollectionPlaylistsPageContent_footer__4Ir_w",item:"CollectionPlaylistsPageContent_item__OPBiS",tabPanel:"CollectionPlaylistsPageContent_tabPanel__2uB2_"}},36397:function(e){e.exports={root:"CollectionPlaylistsPageEmpty_root__mKZt2",icon:"CollectionPlaylistsPageEmpty_icon__x9v_P",title:"CollectionPlaylistsPageEmpty_title__8RfSi"}},53158:function(e){e.exports={root:"CollectionPlaylistsPageHeader_root__GfGIl",container:"CollectionPlaylistsPageHeader_container__oh7C2",title:"CollectionPlaylistsPageHeader_title__2D23I",staticTabs:"CollectionPlaylistsPageHeader_staticTabs__9c9yq",stickyTabs:"CollectionPlaylistsPageHeader_stickyTabs__Iot6U",tab:"CollectionPlaylistsPageHeader_tab__aNTOB",tabsShimmer:"CollectionPlaylistsPageHeader_tabsShimmer__u9JIN",tabShimmer:"CollectionPlaylistsPageHeader_tabShimmer__ekXeT",staticHeader:"CollectionPlaylistsPageHeader_staticHeader__lzc4l",important:"CollectionPlaylistsPageHeader_important__uR36G",stickyHeader:"CollectionPlaylistsPageHeader_stickyHeader__ojvbQ"}},84814:function(e){e.exports={header:"CollectionShelfLiked_header__u9MqV"}},73522:function(e){e.exports={header:"CollectionShelfRecentlyPlayed_header__Nx7Cc"}},64308:function(e){e.exports={track:"CollectionShelfShimmer_track__ERLFm",title:"CollectionShelfShimmer_title__X3d9J"}},39150:function(e){e.exports={root:"CollectionShelfLikedPage_root__KRXgN",scrollableContainer:"CollectionShelfLikedPage_scrollableContainer__CI8xw",footer:"CollectionShelfLikedPage_footer__NgcOJ"}},70294:function(e){e.exports={root:"CollectionShelfPage_root__S0__c",scrollableContainer:"CollectionShelfPage_scrollableContainer__9f317",content:"CollectionShelfPage_content__AG3r8",block:"CollectionShelfPage_block__34jyy",blockHeader:"CollectionShelfPage_blockHeader__Qjoln",footer:"CollectionShelfPage_footer__pgWKV"}},86122:function(e){e.exports={root:"CollectionShelfRecentlyPlayedPage_root__1eSLj",scrollableContainer:"CollectionShelfRecentlyPlayedPage_scrollableContainer__QhPaX",footer:"CollectionShelfRecentlyPlayedPage_footer__5pPcU"}},14346:function(e){e.exports={root:"MixedEntitiesBlock_root__Zs8l2",controls:"MixedEntitiesBlock_controls__mOhq7",columns:"MixedEntitiesBlock_columns__6YlqL",columns_one:"MixedEntitiesBlock_columns_one__pVHXi",columns_two:"MixedEntitiesBlock_columns_two__zw6GL",column:"MixedEntitiesBlock_column__sHpUC"}},73270:function(e){e.exports={shimmer:"MixedEntitiesList_shimmer__sPCJN"}},72735:function(e){e.exports={buttonArrow:"MixedEntitiesListItem_buttonArrow__Emsn1",titleLink:"MixedEntitiesListItem_titleLink__RURfg",titleText:"MixedEntitiesListItem_titleText__YuRWS",root:"MixedEntitiesListItem_root__bHtJ6",root_disabled:"MixedEntitiesListItem_root_disabled__DoZ5p",ripple:"MixedEntitiesListItem_ripple__uW_0P",playButtonCell:"MixedEntitiesListItem_playButtonCell__OlVV0",controlsBarCell:"MixedEntitiesListItem_controlsBarCell__J78Qc",text:"MixedEntitiesListItem_text__RM5Qh"}},53594:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"SearchColumnMeta_root__AlBTs",root_disabled:"SearchColumnMeta_root_disabled__YIvnw",albumLink:"SearchColumnMeta_albumLink__kWgmo",artistCaption:"SearchColumnMeta_artistCaption__aP_ij",artistLink:"SearchColumnMeta_artistLink__2NVDf",description:"SearchColumnMeta_description__55wxv",explicitMark:"SearchColumnMeta_explicitMark__njTQl",title:"SearchColumnMeta_title__TRQrJ",titleContainer:"SearchColumnMeta_titleContainer__0sj5A",version:"SearchColumnMeta_version__dv3CA",root_disliked:"SearchColumnMeta_root_disliked__e46E6",title_withVersion:"SearchColumnMeta_title_withVersion__t3g1H",text:"SearchColumnMeta_text__SsWM7"}},10809:function(e){e.exports={root:"SearchColumnShimmer_root__PDf3Y",infoContainer:"SearchColumnShimmer_infoContainer__cQ8_H",textContainer:"SearchColumnShimmer_textContainer__IekgL",title:"SearchColumnShimmer_title__IorPg",description:"SearchColumnShimmer_description__nNupy",cover:"SearchColumnShimmer_cover__58jV8",action:"SearchColumnShimmer_action__JbJGl"}},43312:function(e){e.exports={root:"SearchCorrectedText_root__ZM2f2",link:"SearchCorrectedText_link__eORMG",text:"SearchCorrectedText_text__HKgvL"}},24435:function(e){e.exports={root:"SearchEmpty_root__Yz53B",container:"SearchEmpty_container__6WP_o",content:"SearchEmpty_content__OdVMa",correctedTextBlock:"SearchEmpty_correctedTextBlock__wR4Hh",icon:"SearchEmpty_icon__NYKMM",title:"SearchEmpty_title__C77x5",subtitle:"SearchEmpty_subtitle__2TlGa",footer:"SearchEmpty_footer__WP03G"}},24528:function(e){e.exports={root:"SearchEntitiesGrid_root__kk0fO",container:"SearchEntitiesGrid_container__zFcDu",correctedTextBlock:"SearchEntitiesGrid_correctedTextBlock__4j4cD",items:"SearchEntitiesGrid_items__RrGDy",items_withChildren:"SearchEntitiesGrid_items_withChildren__VW6y_",footer:"SearchEntitiesGrid_footer__NK1iL"}},11894:function(e){e.exports={root:"SearchHistoryBlockDesktop_root__jKICZ",controls:"SearchHistoryBlockDesktop_controls__5JPBt",header:"SearchHistoryBlockDesktop_header__zOALK",clearButton:"SearchHistoryBlockDesktop_clearButton__kN4Nk",content:"SearchHistoryBlockDesktop_content__doQsC"}},95020:function(e){e.exports={button:"SearchHistoryBlockMobile_button__Wh_Q6",header:"SearchHistoryBlockMobile_header__Lx4On",mixedEntitiesBlock:"SearchHistoryBlockMobile_mixedEntitiesBlock__cJ3o_",buttonContainer:"SearchHistoryBlockMobile_buttonContainer__IppED"}},86134:function(e){e.exports={root:"SearchMixed_root__RR4QT",container:"SearchMixed_container__KIfE1",correctedTextBlock:"SearchMixed_correctedTextBlock___1rfE",block:"SearchMixed_block__SasiH",blockCarousel:"SearchMixed_blockCarousel__IQjJA",blockHeader:"SearchMixed_blockHeader__L0FSh",footer:"SearchMixed_footer__INQFP"}},77193:function(e){e.exports={root:"SearchPodcastEpisodes_root__VjZhR",controls:"SearchPodcastEpisodes_controls___kYPx",header:"SearchPodcastEpisodes_header__uqkmY",clearButton:"SearchPodcastEpisodes_clearButton__eeDVF",content:"SearchPodcastEpisodes_content__96WMv"}},79123:function(e){e.exports={root:"SearchTrackList_root__pSSfZ",container:"SearchTrackList_container__Bww_R",shimmer:"SearchTrackList_shimmer__L9t1x",correctedTextBlock:"SearchTrackList_correctedTextBlock__w5t0t",items:"SearchTrackList_items__VucVX",footer:"SearchTrackList_footer__M70p4"}},29847:function(e){e.exports={root:"SomethingWentWrong_root__d77VJ",content:"SomethingWentWrong_content__8_YkJ",content_shrink:"SomethingWentWrong_content_shrink__GOR_7",navigation:"SomethingWentWrong_navigation__a8eMG",navigation_desktop:"SomethingWentWrong_navigation_desktop__WGGBX",icon:"SomethingWentWrong_icon__f15_y",title:"SomethingWentWrong_title__Kn89B",important:"SomethingWentWrong_important__namIb",text:"SomethingWentWrong_text__KEfGc",button:"SomethingWentWrong_button__dmh7t"}},19431:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hsl2rgb=t.adjustHue=t.safeHue=void 0,t.safeHue=(e,t)=>t>=280&&t<360?e%360:e,t.adjustHue=e=>(e+280)%360,t.hsl2rgb=(e,t,i)=>{let a=a=>{let o=(a+e/30)%12;return i-t*Math.min(i,1-i)*Math.max(-1,Math.min(o-3,9-o,1))};return[a(0),a(8),a(4)]}},45475:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSettings=t.normalizeCollectionHue=t.normalizeFrequency=void 0;let a=i(85494),o=i(25161);t.normalizeFrequency=e=>Math.min(1,(0,o.round)(e)),t.normalizeCollectionHue=e=>e??a.DEFAULT_COLLECTION_HUE,t.normalizeSettings=({hue:e,collectionHue:i,energy:o,backgroundColor:n})=>{let l={collectionHue:(0,t.normalizeCollectionHue)(i)};return e&&(l.hue=e),o&&(l.energy=(o+1)*a.ENERGY_FACTOR),n&&(l.backgroundColor=n),l}},25161:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomNumber=t.round=void 0,t.round=e=>Math.round(100*e)/100,t.randomNumber=(e,t)=>Math.floor(Math.random()*(Math.floor(t)-e+1))+e},85494:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENERGY_FACTOR=t.DEFAULT_ENERGY=t.DEFAULT_COLLECTION_LIGHTNESS=t.DEFAULT_COLLECTION_SATURATION=t.DEFAULT_COLLECTION_HUE=t.DEFAULT_LIGHTNESS=t.DEFAULT_SATURATION=t.DEFAULT_HUE=t.MAX_FPS=void 0,t.MAX_FPS=25,t.DEFAULT_HUE=22.968,t.DEFAULT_SATURATION=1,t.DEFAULT_LIGHTNESS=.5,t.DEFAULT_COLLECTION_HUE=10,t.DEFAULT_COLLECTION_SATURATION=.8,t.DEFAULT_COLLECTION_LIGHTNESS=.46,t.DEFAULT_ENERGY=.2,t.ENERGY_FACTOR=.4},75307:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DumbAnalyzer=t.FrequencyAnalyzer=void 0;let a=i(45475);class o{audioContext;sourceNode;analyserNode;bufferLength=0;spectrum=new Uint8Array;constructor(e){this.audioContext=new AudioContext,this.sourceNode=this.audioContext.createMediaElementSource(e),this.analyserNode=this.audioContext.createAnalyser(),this.analyserNode.fftSize=32,this.analyserNode.smoothingTimeConstant=.9,this.sourceNode.connect(this.analyserNode),this.analyserNode.connect(this.audioContext.destination),this.bufferLength=this.analyserNode.frequencyBinCount,this.spectrum=new Uint8Array(this.bufferLength),this.handleUserAction=this.handleUserAction.bind(this),this.setupListeners()}handleUserAction(){this.audioContext.resume(),document.removeEventListener("click",this.handleUserAction)}setupListeners(){document.addEventListener("click",this.handleUserAction)}getAverageFrequencies({low:e,high:t}){let i=Math.floor(e/(this.audioContext.sampleRate/this.bufferLength)),o=Math.floor(t/(this.audioContext.sampleRate/this.bufferLength));this.analyserNode?.getByteFrequencyData(this.spectrum);let n=0,l=0;for(let e=i;e<=o;e++){let t=this.spectrum[e]??0;n+=t/256,l++}return(0,a.normalizeFrequency)(n/l)}}t.FrequencyAnalyzer=o,t.DumbAnalyzer=class{getAverageFrequencies(){return 0}}},93283:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Color=void 0;let a=i(19431),o=i(25161),n=i(85494),l=i(21691);class s{hue=n.DEFAULT_HUE;collectionHue=n.DEFAULT_COLLECTION_HUE;topStart;topEnd;middleStart;middleEnd;bottomStart;bottomEnd;constructor(e){this.collectionHue=e;let t=(0,a.adjustHue)(e),i=(0,a.safeHue)(t+(0,o.randomNumber)(30,40),t);this.topStart=new l.RGB(50),this.topEnd=new l.RGB(50),this.middleStart=new l.RGB(300),this.middleEnd=new l.RGB(320),this.bottomStart=new l.RGB(t),this.bottomEnd=new l.RGB(i)}get value(){return[this.bottomStart.value,this.middleStart.value,this.topStart.value,this.bottomEnd.value,this.middleEnd.value,this.topEnd.value]}update(e,t){this.hue=e,this.collectionHue=t;let i=(0,a.adjustHue)(e),n=(0,a.safeHue)(i+(0,o.randomNumber)(40,80),i),l=(0,a.adjustHue)(t);this.topStart.update(i),this.topEnd.update((0,a.safeHue)(i+(0,o.randomNumber)(30,40),i)),this.middleStart.update(n),this.middleEnd.update((0,a.safeHue)(n+(0,o.randomNumber)(30,40),i)),this.bottomStart.update(l),this.bottomEnd.update((0,a.safeHue)(l+(0,o.randomNumber)(30,40),i))}next(e){this.topStart.next(e),this.topEnd.next(e),this.middleStart.next(e),this.middleEnd.next(e),this.bottomStart.next(e),this.bottomEnd.next(e)}}t.Color=s},21461:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicValue=void 0,t.DynamicValue=class{currentValue;targetValue;elapsedTime;duration;formatter;constructor(e,t,i,a){this.currentValue=e,this.targetValue=t,this.duration=i,this.elapsedTime=0,this.formatter=a}clamp(e,t,i){return Math.min(Math.max(e,t),i)}get value(){return this.formatter?this.formatter(this.currentValue):this.currentValue}update(e){this.targetValue=e,this.elapsedTime=0}next(e){let t=this.clamp(this.elapsedTime/this.duration,0,1);return this.elapsedTime+=e,this.currentValue=this.currentValue+(this.targetValue-this.currentValue)*t,this.currentValue}}},99566:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VibeAnimationRenderer=void 0;let a=i(95666),o=i(45475),n=i(85494),l=i(54104),s=i(33528),r=i(42943),c=i(46558);class d{analyzer;ticker;scene=new a.Transform;shader;renderer;uniforms;renderState={[s.RenderState.ACTIVE_TAB]:!0,[s.RenderState.BLOCK_VISIBILITY]:!0,[s.RenderState.MANUAL]:!0};constructor(e,t,i){this.uniforms=new c.Uniforms((0,o.normalizeCollectionHue)(i)),this.renderer=new a.Renderer(this.rendererOptions),this.ticker=new r.Ticker(n.MAX_FPS,this.render.bind(this)),this.analyzer=t,this.createElement(e),this.handleOnResize=this.handleOnResize.bind(this),this.handleOnVisibilityChange=this.handleOnVisibilityChange.bind(this),this.shader=this.createShader(),this.handleOnResize(),this.handleOnVisibilityChange(),this.setupListeners()}get rendererOptions(){return{alpha:!1,antialias:!1,preserveDrawingBuffer:!1}}get vertexAndFragment(){return{vertex:l.VertexShaderV2,fragment:l.FragmentShaderV2}}setupListeners(){window.addEventListener("resize",this.handleOnResize),document.addEventListener("visibilitychange",this.handleOnVisibilityChange)}createElement(e){e.innerHTML="",e.appendChild(this.renderer.gl.canvas)}createShader(){let e=this.renderer.gl,t=new a.Plane(e,{width:2,height:2}),i=new a.Program(e,{...this.vertexAndFragment,uniforms:this.uniforms.toObject()}),o=new a.Mesh(e,{geometry:t,program:i});return o.setParent(this.scene),i}render(e=1){this.uniforms.update(e,this.analyzer),this.shader.uniforms=this.uniforms.toObject(),this.renderer?.render({scene:this.scene})}handleOnResize(){this.renderer.setSize(this.uniforms.width,this.uniforms.height)}handleOnVisibilityChange(){"visible"===document.visibilityState?this.enableRender(s.RenderState.ACTIVE_TAB):this.disableRender(s.RenderState.ACTIVE_TAB)}updateRenderingState(){let e=Object.values(this.renderState).every(e=>e);e?this.ticker.start():this.ticker.stop()}applySettings(e={}){let{hue:t,collectionHue:i,energy:a,backgroundColor:n}=(0,o.normalizeSettings)(e);t&&i&&this.uniforms.updateColor(t,i),a&&this.uniforms.updateEnergy(a),n&&this.uniforms.updateBackgroundColor(n)}likeAnimation(){this.uniforms.updateReactTop(.7),setTimeout(()=>{this.uniforms.updateReactMiddle(.7)},100),setTimeout(()=>{this.uniforms.updateReactBottom(.7)},150),setTimeout(()=>{this.uniforms.updateReactTop(0)},850),setTimeout(()=>{this.uniforms.updateReactMiddle(0)},950),setTimeout(()=>{this.uniforms.updateReactBottom(0)},1050)}playAnimation(e){this.uniforms.updatePlayingState(!0),this.applySettings(e)}idleAnimation(){this.uniforms.updateEnergy(n.DEFAULT_ENERGY),this.uniforms.updatePlayingState(!1)}enableRender(e){this.renderState[e]=!0,this.updateRenderingState()}disableRender(e){this.renderState[e]=!1,this.updateRenderingState()}destroy(){this.handleOnResize&&window.removeEventListener("resize",this.handleOnResize),this.handleOnVisibilityChange&&document.removeEventListener("visibilitychange",this.handleOnVisibilityChange)}}t.VibeAnimationRenderer=d},21691:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGB=void 0;let a=i(19431),o=i(85494),n=i(21461);t.RGB=class{r;g;b;constructor(e){let t=(0,a.hsl2rgb)(e,o.DEFAULT_SATURATION,o.DEFAULT_LIGHTNESS);this.r=new n.DynamicValue(t[0],t[0],3e3),this.g=new n.DynamicValue(t[1],t[1],3e3),this.b=new n.DynamicValue(t[2],t[2],3e3)}get value(){return[this.r.value,this.g.value,this.b.value]}update(e){let t=(0,a.hsl2rgb)(e,o.DEFAULT_SATURATION,o.DEFAULT_LIGHTNESS);this.r.update(t[0]),this.g.update(t[1]),this.b.update(t[2])}next(e){this.r.next(e),this.g.next(e),this.b.next(e)}}},42943:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ticker=void 0,t.Ticker=class{fps;render;isActive=!1;requestId=0;constructor(e,t){this.fps=e,this.render=t}start(){if(this.isActive)return;let e=window.performance.now(),t=1e3/this.fps,i=a=>{this.requestId=requestAnimationFrame(i);let o=a-e;o>=t-.1&&(e=a-o%t,this.render(o))};this.isActive=!0,this.requestId=requestAnimationFrame(i)}stop(){this.isActive&&(this.isActive=!1,cancelAnimationFrame(this.requestId))}}},46558:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Uniforms=void 0;let a=i(95666),o=i(85494),n=i(93283),l=i(21461);class s{isPlaying=!1;quality=.6;background=new a.Vec3(0,0,0);energy=new l.DynamicValue(o.DEFAULT_ENERGY,o.DEFAULT_ENERGY,1e3);time=Math.floor(3600*Math.random());color;rotation=[new a.Vec3(-.3,.3,.2),new a.Vec3(-.3,-.3,-.2),new a.Vec3(-.3,-.3,.2)];audio=[0,0,0];audioLowRatio=new l.DynamicValue(0,0,1e3);audioMiddleRatio=new l.DynamicValue(0,0,1e3);audioHighRatio=new l.DynamicValue(0,0,1e3);reactTop=new l.DynamicValue(0,0,600);reactMiddle=new l.DynamicValue(0,0,600);reactBottom=new l.DynamicValue(0,0,600);point=[0,0];interaction=0;constructor(e){this.color=new n.Color(e)}toValue(e){return{value:e}}get width(){return Math.min(window.innerWidth*this.quality,800)}get height(){let e=window.innerHeight/window.innerWidth;return Math.min(window.innerHeight*this.quality,800*e)}updatePlayingState(e){this.isPlaying=e,e?(this.audioLowRatio.update(1),this.audioMiddleRatio.update(1),this.audioHighRatio.update(1)):(this.audioLowRatio.update(0),this.audioMiddleRatio.update(0),this.audioHighRatio.update(0))}updateColor(e,t){this.color.update(e,t)}updateBackgroundColor(e){this.background=new a.Vec3(e,e,e)}updateEnergy(e){this.energy.update(e)}updateReactTop(e){this.reactTop.update(e)}updateReactMiddle(e){this.reactMiddle.update(e)}updateReactBottom(e){this.reactBottom.update(e)}updateTime(e){let t=this.energy.value*e/1e3;this.time=(this.time+t)%86400}update(e,t){if(this.energy.next(e),this.color.next(e),this.reactTop.next(e),this.reactMiddle.next(e),this.reactBottom.next(e),this.updateTime(e),t){let i=t.getAverageFrequencies({low:0,high:250}),a=t.getAverageFrequencies({low:500,high:2e3}),o=t.getAverageFrequencies({low:2e3,high:4e3});this.audioLowRatio.next(e),this.audioMiddleRatio.next(e),this.audioHighRatio.next(e),this.audio=[i*this.audioLowRatio.value,a*this.audioMiddleRatio.value,o*this.audioHighRatio.value]}}toObject(){return{vScreenSize:this.toValue(new a.Vec2(this.width,this.height)),vTime:this.toValue(this.time),vColorBackground:this.toValue(this.background),vColor:this.toValue(this.color.value),vRotation:this.toValue(this.rotation),vAudio:this.toValue(this.audio),vReact:this.toValue([this.reactTop.value,this.reactMiddle.value,this.reactBottom.value]),vInteractionPoint:this.toValue(this.point),vInteraction:this.toValue(this.interaction)}}}t.Uniforms=s},66026:function(e,t,i){"use strict";t.TP=t.UE=t.nT=t.dr=t.Qz=t.WZ=t.kB=t.wX=void 0;var a=i(19431);Object.defineProperty(t,"wX",{enumerable:!0,get:function(){return a.hsl2rgb}}),Object.defineProperty(t,"kB",{enumerable:!0,get:function(){return a.adjustHue}});var o=i(75307);Object.defineProperty(t,"WZ",{enumerable:!0,get:function(){return o.FrequencyAnalyzer}}),Object.defineProperty(t,"Qz",{enumerable:!0,get:function(){return o.DumbAnalyzer}});var n=i(99566);Object.defineProperty(t,"dr",{enumerable:!0,get:function(){return n.VibeAnimationRenderer}});var l=i(33528);Object.defineProperty(t,"nT",{enumerable:!0,get:function(){return l.RenderState}});var s=i(85494);Object.defineProperty(t,"UE",{enumerable:!0,get:function(){return s.DEFAULT_COLLECTION_SATURATION}}),Object.defineProperty(t,"TP",{enumerable:!0,get:function(){return s.DEFAULT_COLLECTION_LIGHTNESS}})},54104:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FragmentShaderV2=t.VertexShaderV2=void 0,t.VertexShaderV2=`
precision highp float;
attribute vec4 position;

void main() {
    gl_Position = position;
}
`,t.FragmentShaderV2=`
precision highp float;

uniform vec2 vScreenSize;
uniform float vTime;

uniform vec3 vColorBackground;

uniform vec3 vColor[6];
uniform vec3 vRotation[3];

uniform float vAudio[3];
uniform float vReact[3];

uniform vec2 vInteractionPoint;
uniform float vInteraction;

#define CIRCLE_WIDTH_BASE 0.8
#define CIRCLE_WIDTH_STEP 0.2

#define SPARK_STRENGTH_BASE 1.0
#define SPARK_STRENGTH_STEP 0.3

#define CIRCLE_RADIUS_BASE 0.95
#define CIRCLE_RADIUS_STEP 0.15

#define CIRCLE_OFFSET_BASE 0.0
#define CIRCLE_OFFSET_STEP 1.57

vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}
vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}

float snoise3(vec3 v) {
  const vec2 C = vec2(0.1666667, 0.3333333); // vec2(1.0/6.0, 1.0/3.0)
  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

  // First corner
  vec3 i = floor(v + dot(v, C.yyy));
  vec3 x0 = v - i + dot(i, C.xxx);

  // Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min(g.xyz, l.zxy);
  vec3 i2 = max(g.xyz, l.zxy);

  // x0 = x0 - 0. + 0.0 * C
  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
  vec3 x3 = x0 - 1. + 3.0 * C.xxx;

  // Permutations
  i = mod(i, 289.0);
  vec4 p = permute( permute( permute(
             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));

  // Gradients ( N*N points uniformly over a square, mapped onto an octahedron.)
  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
  float n_ = 0.142857142857; // 1.0/7.0
  vec3 ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z *ns.z); //  mod(p,N*N), N=7

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_); // mod(j,N)

  vec4 x = x_ *ns.x + ns.yyyy;
  vec4 y = y_ *ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4( x.xy, y.xy );
  vec4 b1 = vec4( x.zw, y.zw );

  vec4 s0 = floor(b0)*2.0 + 1.0;
  vec4 s1 = floor(b1)*2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;
  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;

  vec3 p0 = vec3(a0.xy,h.x);
  vec3 p1 = vec3(a0.zw,h.y);
  vec3 p2 = vec3(a1.xy,h.z);
  vec3 p3 = vec3(a1.zw,h.w);

  //Normalise gradients
  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

  // Mix final noise value
  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
  m = m * m;
  return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));
}

float tri(in float x){return abs(fract(x)-.5);}
vec3 tri3(in vec3 p){return vec3( tri(p.z+tri(p.y*20.)), tri(p.z+tri(p.x*1.)), tri(p.y+tri(p.x*1.)));}

float triNoise3D(in vec3 p, in float spd)
{
  float z=0.4;
  float rz = 0.1;
  vec3 bp = p;
  for (float i=0.; i<=4.; i++ )
  {
    vec3 dg = tri3(bp*0.01); // Increase the scale factor to make noise less frequent
    p += (dg+vTime*.1*spd);

    bp *= 4.; // Increase the scale factor
    z *= 0.9;
    p *= 1.6; // Increase the scale factor

    rz+= (tri(p.z+tri(0.6*p.x+0.1*tri(p.y))))/z;
  }
  return smoothstep(0.0, 8., rz + sin(rz + sin(z) * 2.8) * 2.2);
}

vec2 rotate(vec2 p, float a) {
  float s = sin(a);
  float c = cos(a);
  return vec2(p.x * c - p.y * s, p.x * s + p.y * c);
}

float light(float intensity, float attenuation, float dist) {
  return intensity / (1.0 + dist + dist * attenuation);
}

vec4 makeNoiseBlob2(vec2 uv, vec3 color1, vec3 color2, float strength, float offset) {
  float len = length(uv);
  float v0, v1, cl;
  float r0, d0, n0;
  float r, d;

  n0 = snoise3( vec3(uv * 1.2 + offset, vTime * 0.5 + offset) ) * 0.5 + 0.5;
  r0 = mix(0.0, 1.0, n0);
  d0 = distance(uv, r0 / len * uv);
  v0 = smoothstep(r0 + 0.1 + (sin(vTime + offset) + 1.0), r0, len);

  v1 = light(0.15 * (1.0 + 1.5 * (-sin(vTime * 2. + offset * 0.5) * 0.5)) + 0.3 * strength, 10.0 , d0);

  vec3 col = mix(color1, color2, uv.y * 2.);
  col = col + v1;
  col.rgb = clamp(col.rgb, 0.0, 1.0);
  return vec4(col, v0);
}

vec4 makeBlob(vec2 uv,
              float blob,
              vec3 color1,
              vec3 color2,
              float width,
              float baseReaction,
              float likeReaction,
              float audioStrength,
              float offset,
              vec2 noiseOffset) {
  float len = length(uv);

  float outerRadius = blob + width * 0.5 + baseReaction * (1.0 + max(likeReaction, audioStrength * 0.6) * 50. * baseReaction);

  float strength = max(likeReaction, audioStrength);

  vec4 noise = makeNoiseBlob2(uv * (1.0 - likeReaction * 0.5) + noiseOffset, color1, color2, strength, offset);
  noise.a = mix(0.0, noise.a, smoothstep(outerRadius, 0.5, len));
  noise.rgb += 0.6 * likeReaction * (1.0 - smoothstep(0.2, outerRadius * 0.8, len));

  return noise;
}

void main() {
  vec2 uv = gl_FragCoord.xy / vScreenSize.xy;

  uv = uv * 2.0 - 1.0;
  uv.y *= vScreenSize.y / min(vScreenSize.x, vScreenSize.y) / 0.55;
  uv.x *= vScreenSize.x / min(vScreenSize.x, vScreenSize.y) / 0.55;

  vec2 ruv = uv * 2.0;
  float pr = length(ruv);
  float pa = atan(ruv.y, ruv.x);

  float idx = (pa/3.1415) / 2.0;   // 0 to 1

  vec2 ruv1 = rotate(uv * 2.0, 3.1415);
  float pa1 = atan(ruv1.y, ruv1.x);
  float idx1 = (pa1/3.1415) / 2.0;   // 0 to 1
  float idx21 = (pa1/3.1415 + 1.0) / 2.0 * 3.1415; // 0 to PI

  float spark = triNoise3D(vec3(idx, 0.0, 0.0), 0.1);
  spark = mix(spark, triNoise3D(vec3(idx1, 0.0, idx1), 0.1), smoothstep(0.9, 1.0, sin(idx21)));
  spark = spark * 0.2 + pow(spark, 10.);
  spark = smoothstep(0.0, spark, 0.3) * spark;

  vec3 color = vColorBackground;
  vec4 blobColor;
  float floatIndex;
  float radius;

  float n0 = snoise3(vec3(uv * 1.2, vTime * 0.5));

  for (int i = 0; i < 3; i++) {
    floatIndex = float(i);
    radius = CIRCLE_RADIUS_BASE - CIRCLE_RADIUS_STEP * floatIndex;
    blobColor = makeBlob(uv,
                         mix(radius, radius + 0.3, n0),
                         vColor[i],
                         vColor[i+3],
                         CIRCLE_WIDTH_BASE - CIRCLE_WIDTH_STEP * floatIndex,
                         (SPARK_STRENGTH_BASE - SPARK_STRENGTH_STEP * floatIndex) * spark,
                         vReact[i],
                         vAudio[i],
                         CIRCLE_OFFSET_BASE + CIRCLE_OFFSET_STEP * floatIndex,
                         rotate(vRotation[i].xy, vTime * vRotation[i].z));
    color = mix(color, blobColor.rgb, blobColor.a);
  }

  gl_FragColor = vec4(color, 1.0);
}
`},33528:function(e,t){"use strict";var i,a;Object.defineProperty(t,"__esModule",{value:!0}),t.RenderState=void 0,(a=i||(t.RenderState=i={})).ACTIVE_TAB="ACTIVE_TAB",a.BLOCK_VISIBILITY="BLOCK_VISIBILITY",a.MANUAL="MANUAL"}}]);