(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8601],{78601:function(e,t,i){"use strict";i.d(t,{Xb:function(){return a.AlbumPage},Lf:function(){return R}});var a=i(93289);i(74488);var l=i(42288),s=i(10542),n=i(95695),o=i(82857),r=i(93490),d=i(10064),u=i(75191),m=i(38360),c=i(38527),b=i(395);let v=(e,t)=>e.map(e=>"".concat(e,":").concat(t));var g=i(44023);let A=e=>({type:m.lf.TEXT,data:e||null}),h=(e,t,i,a,l)=>({type:(null==i?void 0:i.type)||n.Vc.TRACK,id:e,data:i||null,loadingState:t,position:a,isBest:l}),p=e=>"".concat(e,"-text"),E=e=>String(e),x=(e,t,i,a)=>{e.forEach(e=>{var l,s,n,o,r;if(null===(l=e.albums)||void 0===l?void 0:l[0]){let l=i.get(E(e.id));void 0!==l&&(t[l]=h(e.id,c.Gui.RESOLVE,(0,g.Vt)(e),null===(n=e.albums[0])||void 0===n?void 0:null===(s=n.trackPosition)||void 0===s?void 0:s.index,null==a?void 0:a.includes(Number(e.id))));let d=i.get(p(e.id));void 0!==d&&(t[d]=A(null===(r=e.albums[0])||void 0===r?void 0:null===(o=r.trackPosition)||void 0===o?void 0:o.volume))}})},C=(e,t,i,a)=>{let l=0;e.volumes.forEach(s=>{e.volumes.length>1&&s[0]&&(t.push(A()),i.set(p(s[0].id),t.length-1)),s.forEach(e=>{t.push(h(e.id,c.Gui.IDLE)),i.set(E(e.id),t.length-1),a.set(E(e.id),l),l++})})},N=e=>(0,l.pj)({id:e.id,type:e.type,title:e.title,albums:e.albums.map(r.ym)}),S=(e,t,i,a)=>{e.forEach(e=>{let l=i.get(String(e));void 0!==l&&(t[l]=h(e,a))})},I=l.V5.model("AlbumDonations",{loadingState:l.V5.enumeration(Object.values(c.Gui)),items:l.V5.maybeNull(l.V5.array(d.Ew))}),G=l.V5.model("LabelItem",{id:l.V5.number,name:l.V5.string}),f=l.V5.model("RelatedAlbumsPage",{loadingState:l.V5.enumeration(Object.values(c.Gui)),items:l.V5.array(r.ug)}),L=l.V5.model("RelatedContent",{loadingState:l.V5.enumeration(Object.values(c.Gui)),items:l.V5.maybeNull(l.V5.array(o.fd))}),R=l.V5.compose(l.V5.model("AlbumPage",{id:l.V5.maybeNull(l.V5.number),meta:l.V5.maybeNull(r.ug),items:l.V5.array(o.JP),indexItems:l.V5.map(l.V5.number),trackIndexInContext:l.V5.map(l.V5.number),loadingState:l.V5.enumeration(Object.values(c.Gui)),errorStatusCode:l.V5.maybeNull(l.V5.number),deprecationTargetAlbumId:l.V5.maybeNull(l.V5.number),latestGenreAlbums:f,otherArtistAlbums:f,otherAlbumVersions:l.V5.array(r.ug),labels:l.V5.maybeNull(l.V5.array(G)),description:l.V5.maybe(l.V5.string),donations:I,relatedContent:L}),b.ie).views(e=>({get isNonMusicType(){var t;if(null===(t=e.meta)||void 0===t?void 0:t.type)return[n.VZ.PODCAST,n.VZ.AUDIOBOOK].includes(e.meta.type);return!1},get isOtherArtistAlbumsAvailable(){var i,a,l,o;return!!(!this.isNonMusicType&&(null===(a=e.meta)||void 0===a?void 0:null===(i=a.artists)||void 0===i?void 0:i.length)===1&&!(null===(o=e.meta)||void 0===o?void 0:null===(l=o.artists[0])||void 0===l?void 0:l.various))},get isLatestGenreAlbumsAvailable(){var r;return!!(!this.isNonMusicType&&(null===(r=e.meta)||void 0===r?void 0:r.genre))},get isNotFound(){return e.loadingState===c.Gui.REJECT&&e.errorStatusCode===s.CN.NOT_FOUND},get isRejected(){return e.loadingState===c.Gui.REJECT},get hasOtherAlbumVersions(){return!!(e.loadingState===c.Gui.IDLE||e.loadingState===c.Gui.PENDING||e.otherAlbumVersions&&e.otherAlbumVersions.length>0)},get hasLatestGenreAlbums(){return!!(e.latestGenreAlbums.loadingState===c.Gui.IDLE||e.latestGenreAlbums.loadingState===c.Gui.PENDING||e.latestGenreAlbums.items&&e.latestGenreAlbums.items.length>0)},get hasOtherArtistAlbums(){return!!(e.otherArtistAlbums.loadingState===c.Gui.IDLE||e.otherArtistAlbums.loadingState===c.Gui.PENDING||e.otherArtistAlbums.items&&e.otherArtistAlbums.items.length>0)},get isLoading(){return e.loadingState===c.Gui.IDLE||e.loadingState===c.Gui.PENDING},get isLoaded(){return e.loadingState===c.Gui.RESOLVE},get isLatestGenreAlbumsLoading(){return e.latestGenreAlbums.loadingState===c.Gui.IDLE||e.latestGenreAlbums.loadingState===c.Gui.PENDING},get isOtherArtistAlbumsLoading(){return e.otherArtistAlbums.loadingState===c.Gui.IDLE||e.otherArtistAlbums.loadingState===c.Gui.PENDING},get isRelatedContentLoading(){return e.relatedContent.loadingState===c.Gui.IDLE||e.relatedContent.loadingState===c.Gui.PENDING},get contextMeta(){var d,u,b,v,g,A,h,p,E,x;return{id:e.meta.id,title:null===(d=e.meta)||void 0===d?void 0:d.title,coverUri:null===(u=e.meta)||void 0===u?void 0:u.coverUri,type:null===(b=e.meta)||void 0===b?void 0:b.type,year:null===(v=e.meta)||void 0===v?void 0:v.year,version:null===(g=e.meta)||void 0===g?void 0:g.version,contentWarning:null===(A=e.meta)||void 0===A?void 0:A.contentWarning,genre:null===(h=e.meta)||void 0===h?void 0:h.genre,likesCount:null===(p=e.meta)||void 0===p?void 0:p.likesCount,averageColor:null===(E=e.meta)||void 0===E?void 0:E.averageColor,available:null===(x=e.meta)||void 0===x?void 0:x.isAvailable}},get lastEpisodes(){return e.items.filter(e=>e.type!==m.lf.TEXT).slice(0,5).map(e=>e)},get lastEpisodesTrackIds(){return this.lastEpisodes.map(e=>e.id)}})).actions(e=>{let t={getLatestGenreAlbums:(0,l.ls)(function*(t){let{topResource:i,modelActionsLogger:a}=(0,l.dU)(e);if(e.latestGenreAlbums.loadingState!==c.Gui.PENDING)try{e.latestGenreAlbums.loadingState=c.Gui.PENDING;let a=yield i.getTopByGenre(t);e.latestGenreAlbums.items=(0,l.pj)(a.albums.map(r.ym)),e.latestGenreAlbums.loadingState=c.Gui.RESOLVE}catch(t){a.error(t),e.latestGenreAlbums.loadingState=c.Gui.REJECT}}),getOtherArtistAlbums:(0,l.ls)(function*(t,i){let{artistsResource:a,modelActionsLogger:s}=(0,l.dU)(e);if(e.otherArtistAlbums.loadingState!==c.Gui.PENDING)try{if(!t.artistId){e.otherArtistAlbums.loadingState=c.Gui.REJECT;return}e.otherArtistAlbums.loadingState=c.Gui.PENDING;let s=yield a.getSafeDirectAlbums({...t,artistId:t.artistId});e.otherArtistAlbums.items=(0,l.pj)(s.albums.filter(e=>String(e.id)!==String(i)).map(r.ym)),e.otherArtistAlbums.loadingState=c.Gui.RESOLVE}catch(t){s.error(t),e.otherArtistAlbums.loadingState=c.Gui.REJECT}}),getTracks:(0,l.ls)(function*(t){let{trackIds:i}=t,{tracksResource:a,modelActionsLogger:s}=(0,l.dU)(e);try{var n;if(!(null===(n=e.meta)||void 0===n?void 0:n.id))return;S(i,e.items,e.indexItems,c.Gui.PENDING);let t=yield a.getTracksMeta({trackIds:v(i,e.meta.id),withProgress:!0});x(t,e.items,e.indexItems,e.meta.bestAlbumTracks)}catch(t){s.error(t),S(i,e.items,e.indexItems,c.Gui.REJECT)}}),getDonations:(0,l.ls)(function*(t){let{albumId:i}=t,{experiments:a}=(0,l.yj)(e),{donationResource:s,modelActionsLogger:n}=(0,l.dU)(e);if(a.checkExperiment(c.peG.WebNextAlbumDonateChooserButton,"on")&&e.donations.loadingState!==c.Gui.PENDING)try{e.donations.loadingState=c.Gui.PENDING;let{donations:t}=yield s.getAlbumDonations({albumId:i});t&&(e.donations.items=(0,l.pj)(t.map(d.fv))),e.donations.loadingState=c.Gui.RESOLVE}catch(t){n.error(t),e.donations.loadingState=c.Gui.REJECT}}),getData:(0,l.ls)(function*(i){let{albumId:a,resumeStream:o}=i,{albumResource:d,modelActionsLogger:m}=(0,l.dU)(e),{experiments:b,disclaimer:v}=(0,l.yj)(e),g=b.checkExperiment(c.peG.WebNextAlbumDisableVersions,"on"),A=b.checkExperiment(c.peG.WebNextAlbumDisableTracks,"on"),h=b.checkExperiment(c.peG.WebNextAlbumDisableLatestGenreAlbums,"on"),p=b.checkExperiment(c.peG.WebNextAlbumDisableOtherArtistAlbums,"on"),E=b.checkExperiment(c.peG.WebNextLegalRejectAlbum,"on");if(e.id=a,e.loadingState!==c.Gui.PENDING)try{var x,N,S,I;let i,m;e.loadingState=c.Gui.PENDING;let b=yield d.getAlbumWithTracksIds({albumId:a,resumeStream:o});if((null==b?void 0:b.error)==="not-found"){e.errorStatusCode=s.CN.NOT_FOUND,e.loadingState=c.Gui.REJECT,e.otherArtistAlbums.loadingState=c.Gui.REJECT,e.latestGenreAlbums.loadingState=c.Gui.REJECT;return}if(null===(x=b.deprecation)||void 0===x?void 0:x.targetAlbumId){e.deprecationTargetAlbumId=b.deprecation.targetAlbumId,e.loadingState=c.Gui.RESOLVE;return}(null!==(N=b.disclaimers)&&void 0!==N?N:[]).includes(n.em.MODAL)&&E&&(yield v.getAlbumDisclaimer({albumId:a}));let{sonataState:G}=(0,l.yj)(e);if(G.setUnloadedEntitiesData(b.volumes.flat().map(e=>(0,u.RN)(e.id))),e.meta=(0,r.ym)(b),e.labels=(0,l.pj)(b.labels),e.contentWarning=(0,l.pj)(b.contentWarning),e.description=(0,l.pj)(b.description),!g&&b.duplicates&&b.duplicates.length>0&&(e.otherAlbumVersions=(0,l.pj)(null===(S=b.duplicates)||void 0===S?void 0:S.map(r.ym))),!A){C(b,e.items,e.indexItems,e.trackIndexInContext);let i=[];for(let t=0;t<10;t++){let a=e.items[t];(null==a?void 0:a.type)===n.Vc.TRACK&&i.push(String(a.id))}yield t.getTracks({trackIds:i})}!h&&e.isLatestGenreAlbumsAvailable?i=t.getLatestGenreAlbums({category:n.mk.RECENT_ALBUMS,period:n.pH.WEEK,pageSize:8,genre:b.genre}):e.latestGenreAlbums.loadingState=c.Gui.RESOLVE,!p&&e.isOtherArtistAlbumsAvailable?m=t.getOtherArtistAlbums({artistId:String(null===(I=b.artists[0])||void 0===I?void 0:I.id),limit:8},a):e.otherArtistAlbums.loadingState=c.Gui.RESOLVE,yield Promise.allSettled([i,m]),e.loadingState!==c.Gui.IDLE&&(e.loadingState=c.Gui.RESOLVE)}catch(t){m.error(t),t instanceof s.du&&(t.statusCode===s.CN.NOT_FOUND||t.statusCode===s.CN.BAD_REQUEST)&&(e.errorStatusCode=s.CN.NOT_FOUND),e.loadingState!==c.Gui.IDLE&&(e.loadingState=c.Gui.REJECT,e.otherArtistAlbums.loadingState=c.Gui.REJECT,e.latestGenreAlbums.loadingState=c.Gui.REJECT)}}),loadLastEpisodes(){t.getTracks({trackIds:e.lastEpisodesTrackIds})},getRelatedContent:(0,l.ls)(function*(){let{albumResource:t,modelActionsLogger:i}=(0,l.dU)(e);if(e.relatedContent.loadingState!==c.Gui.PENDING)try{var a,s;if(!(null===(a=e.meta)||void 0===a?void 0:a.id))return;e.relatedContent.loadingState=c.Gui.PENDING;let i=yield t.getRelatedContent({albumId:e.meta.id});e.relatedContent.items=(0,l.pj)(null===(s=i.blocks)||void 0===s?void 0:s.map(N)),e.relatedContent.loadingState=c.Gui.RESOLVE}catch(t){i.error(t),e.relatedContent.loadingState=c.Gui.REJECT}}),reset(){let{sonataState:t}=(0,l.yj)(e);t.resetUnloadedEntitiesData(),e.id=null,e.meta=null,e.errorStatusCode=null,e.deprecationTargetAlbumId=null,e.items=(0,l.pj)([]),e.indexItems.clear(),e.trackIndexInContext.clear(),e.loadingState=c.Gui.IDLE,e.donations.loadingState=c.Gui.IDLE,e.donations.items=null,e.latestGenreAlbums.loadingState=c.Gui.IDLE,e.latestGenreAlbums.items=(0,l.pj)([]),e.otherArtistAlbums.loadingState=c.Gui.IDLE,e.otherArtistAlbums.items=(0,l.pj)([]),e.otherAlbumVersions=(0,l.pj)([]),e.description="",e.labels=null,e.relatedContent.loadingState=c.Gui.IDLE,e.relatedContent.items=null}};return t})},74488:function(e,t,i){"use strict";i.d(t,{AlbumNotFoundPage:function(){return r}});var a=i(9753),l=i(9544),s=i(98639),n=i(23948),o=i(38527);let r=(0,l.Pi)(()=>{let{album:e}=(0,o.oR4)();return(0,s.useEffect)(()=>{e.reset()},[]),(0,a.jsx)(n.T,{})})},93289:function(e,t,i){"use strict";i.d(t,{AlbumPage:function(){return P}});var a,l,s=i(9753),n=i(9544),o=i(74717),r=i(98639),d=i(80542),u=i(70171),m=i(68106),c=i(93490),b=i(36084),v=i(20121),g=i(38527),A=i(3084),h=i(60836),p=i(31014),E=i(23881),x=i(84338),C=i(95695),N=i(2570),S=i(88393),I=i(10064),G=i(44023),f=i(38360),L=i(28417),R=i.n(L);let _=(0,n.Pi)(e=>{var t,i,a;let{albumHeaderRef:l,refCallback:n}=e,o=(0,r.useRef)(null),u=(0,g.x5)({pageId:g.Rhz.ALBUM,blockId:g.aUg.ALBUM}),m=(0,r.useRef)(0),{notify:b}=(0,g.d$W)(),{album:v,experiments:L,sonataState:_}=(0,g.oR4)(),{formatMessage:k}=(0,d.Z)(),[T,V]=(0,r.useState)(!1);(0,r.useEffect)(()=>()=>{m.current=0},[v]),(0,r.useEffect)(()=>{(v.otherArtistAlbums.loadingState===g.Gui.REJECT||v.latestGenreAlbums.loadingState===g.Gui.REJECT)&&m&&!(m.current>0)&&(b((0,s.jsx)(A.Q,{error:k({id:"album-errors.error-during-loading-similar-albums"})}),{containerId:g.W$x.ERROR}),m.current++)},[v.isNotFound,v.latestGenreAlbums.loadingState,v.otherArtistAlbums.loadingState,k,b]),(0,r.useEffect)(()=>{v.isLoaded&&v.hasOtherAlbumVersions&&V(!0)},[v.hasOtherAlbumVersions,v.isLoaded]);let j=(0,r.useCallback)(()=>{let e=o.current;null==e||e.scrollIntoView({behavior:"smooth"})},[]),y=(0,r.useMemo)(()=>{if(L.checkExperiment(g.peG.WebNextAlbumDonateChooserButton,"on")&&v.donations.items&&v.donations.items.length){var e,t;return(0,s.jsx)(I.J,{shouldShowModal:Number(null===(t=v.meta)||void 0===t?void 0:null===(e=t.artists)||void 0===e?void 0:e.length)>1,donations:v.donations.items})}return null},[v.donations.items,null===(i=v.meta)||void 0===i?void 0:null===(t=i.artists)||void 0===t?void 0:t.length,L]),D=(0,r.useMemo)(()=>v.isLoading||!v.meta||v.isRejected?(0,s.jsx)(S.KC,{className:R().header,isActive:!0}):(0,s.jsx)(S.hx,{album:v.meta,actionButton:y,className:R().header,ref:l,onVersionClick:T?j:void 0}),[y,v.isLoading,v.isRejected,v.meta,l,j,T]),O=(0,r.useMemo)(()=>({Header:()=>D,Footer:()=>(0,s.jsxs)("div",{className:R().footerContainer,children:[(0,s.jsxs)("div",{className:R().carouselBlocks,children:[v.hasOtherAlbumVersions&&(0,s.jsx)(c.wk,{isShimmerVisible:v.isLoading,isShimmerActive:!0,className:R().carouselContainer,headerClassName:(0,h.W)(R().carouselBlock,R().carouselBlockHeader),containerClassName:R().carouselBlock,title:k({id:"entity-names.other-album-versions"}),albums:v.otherAlbumVersions,...(0,E.BA)(E.Br.album.OTHER_VERSIONS_CAROUSEL),headingRef:o}),v.hasLatestGenreAlbums&&(0,s.jsx)(c.wk,{isShimmerVisible:v.isLatestGenreAlbumsLoading,isShimmerActive:!0,className:R().carouselContainer,headerClassName:(0,h.W)(R().carouselBlock,R().carouselBlockHeader),containerClassName:R().carouselBlock,title:k({id:"entity-names.new-albums-in-genre"}),albums:v.latestGenreAlbums.items,...(0,E.BA)(E.Br.album.GENRE_ALBUMS_CAROUSEL)}),v.hasOtherArtistAlbums&&(0,s.jsx)(c.wk,{isShimmerVisible:v.isOtherArtistAlbumsLoading,isShimmerActive:!0,className:R().carouselContainer,headerClassName:(0,h.W)(R().carouselBlock,R().carouselBlockHeader),containerClassName:R().carouselBlock,title:k({id:"entity-names.other-albums-of-artist"}),albums:v.otherArtistAlbums.items,...(0,E.BA)(E.Br.album.OTHER_ARTIST_ALBUMS_CAROUSEL)})]}),(0,s.jsx)(A.$_,{className:R().footer})]})}),[D,v.hasOtherAlbumVersions,v.isLoading,v.otherAlbumVersions,v.hasLatestGenreAlbums,v.isLatestGenreAlbumsLoading,v.latestGenreAlbums.items,v.hasOtherArtistAlbums,v.isOtherArtistAlbumsLoading,v.otherArtistAlbums.items,k]),B=(0,r.useCallback)(e=>{let t=[];for(let i=e.startIndex;i<=e.endIndex;i++){let e=v.items[i];(null==e?void 0:e.type)===C.Vc.TRACK&&(null==e?void 0:e.loadingState)===g.Gui.IDLE&&t.push(e.id)}t.length&&v.getTracks({trackIds:t})},[v]),P=L.checkExperiment(g.peG.WebNextAlbumDisableTracks,"on")?0:v.items.length||10;return(0,s.jsx)(A.Wv,{className:(0,h.W)(R().root,R().important),listClassName:R().content,context:{listAriaLabel:k({id:"entity-names.albums-tracks-list"},{albumName:(null===(a=v.meta)||void 0===a?void 0:a.title)||""})},customComponents:O,totalCount:P,itemContentCallback:e=>{var t,i;let a=null==v?void 0:null===(t=v.items)||void 0===t?void 0:t[e];if(!a||!v.meta||v.isRejected)return(0,s.jsx)(A.DX,{isActive:!0,className:R().shimmerItem,variant:g.Lxt.ALBUM});if(!(null==a?void 0:a.data))switch(null==a?void 0:a.type){case f.lf.TEXT:return(0,s.jsx)(A.AH,{className:R().shimmerItem});case C.Vc.TRACK:return(0,s.jsx)(A.DX,{isActive:!0,className:R().shimmerItem,variant:g.Lxt.ALBUM})}return(null==a?void 0:a.type)===f.lf.TEXT?(0,s.jsx)("div",{className:(0,h.W)(R().shimmerItem,R().textItem),children:(0,s.jsx)(N.Heading,{variant:"h3",className:R().text,children:(0,s.jsx)(p.Z,{id:"entity-names.disk-number",values:{number:a.data}})})}):a.data?(0,s.jsx)(G.RJ,{withLightning:a.isBest,track:a.data,position:a.position,albumArtists:null==v?void 0:null===(i=v.meta)||void 0===i?void 0:i.artists,playContextParams:{contextData:{type:x.Ak.Album,meta:v.contextMeta,from:u},queueParams:{index:v.trackIndexInContext.get(String(a.id))},loadContextMeta:!0,entitiesData:_.unloadedEntitiesDataFromModels}}):void 0},onGetDataByRange:B,debounceDurationInMs:300,initialItemCount:P,handleRef:n,withHeader:!0,testId:E.Br.album.ALBUM_PAGE})});var k=i(45919),T=i(14102),V=i(82857);(a=l||(l={})).ABOUT="about",a.TRACKS="track-list";let j=[l.ABOUT,l.TRACKS],y=e=>{let{formatMessage:t}=(0,d.Z)(),i=Math.floor(e/60%60),a=Math.floor(e/60/60),l="";return a>0&&(l+=t({id:"time.hours"},{hours:a})),i>0&&(l+=(l.length>0?" ":"")+t({id:"time.minutes-left"},{minutes:i})),l};var D=i(55447),O=i.n(D);let B=(0,n.Pi)(e=>{var t,i,a,n,u,m,c,b;let{nonMusicHeaderRef:v,refCallback:E}=e,I=(0,r.useRef)(0),L=(0,r.useRef)(null),{album:_,experiments:D,sonataState:B}=(0,g.oR4)(),P=(null===(t=_.meta)||void 0===t?void 0:t.isAudiobook)?g.Rhz.AUDIOBOOK:g.Rhz.PODCAST,M=(null===(i=_.meta)||void 0===i?void 0:i.isAudiobook)?g.aUg.AUDIOBOOK:g.aUg.PODCAST,U=(0,g.x5)({pageId:P,blockId:M}),W=(0,r.useId)(),{formatMessage:H}=(0,d.Z)(),F=(0,o.useSearchParams)(),J=(0,g.m5R)(),w=(0,r.useMemo)(()=>{let e=F.get(g.wxR.ACTIVE_TAB),t=j.findIndex(t=>t===e);return t>=0?t:null},[F]),X=(0,T.useTabsState)(null!=w?w:0),[K,z]=(0,r.useState)(j[X.value]);(0,r.useEffect)(()=>()=>{I.current=0},[_]);let Z=(0,r.useMemo)(()=>{var e;return(null===(e=_.meta)||void 0===e?void 0:e.isAudiobook)?{about:H({id:"non-music.audiobook-tab-about"}),"track-list":H({id:"non-music.audiobook-tab-tracks"})}:{about:H({id:"podcast.tab-about"}),"track-list":H({id:"podcast.tab-tracks"},{value:_.items.length})}},[null===(a=_.meta)||void 0===a?void 0:a.isAudiobook,_.items.length,H]),$=(0,r.useMemo)(()=>e=>{var t;if(!X.onTabChange||e===X.value)return;X.onTabChange(e);let i=null!==(t=j[e])&&void 0!==t?t:l.ABOUT;z(i);let a=(0,g.rdz)(g.wxR.ACTIVE_TAB,i);a&&J(a),setTimeout(()=>{var t,i,a;null===(a=L.current)||void 0===a||null===(i=a.children[e])||void 0===i||null===(t=i.focus)||void 0===t||t.call(i)})},[X,J]),Q=(e,t)=>(0,s.jsxs)("div",{className:O().infoBlock,children:[(0,s.jsx)(N.Caption,{variant:"span",type:"entity",size:"m",className:O().infoTitle,children:e}),(0,s.jsx)(N.Caption,{variant:"span",type:"entity",size:"m",children:t})]}),q=(0,r.useMemo)(()=>{var e,t,i,a,l,n,o,r,d,u,m,c,b,v,g,A,h;let p=Number(null===(e=_.labels)||void 0===e?void 0:e.length)>1?H({id:"podcast.publishers-title"}):H({id:"podcast.publisher-title"}),E=null===(t=_.labels)||void 0===t?void 0:t.map(e=>e.name).join(", "),x=H({id:"podcast.age-limit"}),C=Number(null===(a=_.meta)||void 0===a?void 0:null===(i=a.artists)||void 0===i?void 0:i.length)>1?H({id:"non-music.audiobook-artists"}):H({id:"non-music.audiobook-artist"}),S=null===(n=_.meta)||void 0===n?void 0:null===(l=n.artists)||void 0===l?void 0:l.map(e=>e.name).join(", "),I=(null===(r=_.meta)||void 0===r?void 0:null===(o=r.artists)||void 0===o?void 0:o.length)||(null===(d=_.meta)||void 0===d?void 0:d.durationSec)||(null===(u=_.labels)||void 0===u?void 0:u.length)||_.isExplicit,G=Q("".concat(C,":"),String(S)),f=(null===(m=_.meta)||void 0===m?void 0:m.durationSec)&&Q("".concat(H({id:"time.duration"}),":"),"".concat(y(null===(c=_.meta)||void 0===c?void 0:c.durationSec))),L=Q("".concat(p,":"),String(E)),V=Q("".concat(x,":"),"18+");return(0,s.jsx)(T.TabPanel,{name:0,value:X.value,elementId:W,children:(0,s.jsxs)("div",{className:O().contentAbout,children:[_.description&&!!(null===(b=_.description)||void 0===b?void 0:b.length)&&(0,s.jsx)(N.Caption,{variant:"div",type:"entity",size:"m",className:R().text,children:(0,s.jsx)("span",{dangerouslySetInnerHTML:{__html:(0,k.SK)(_.description)}})}),I&&(0,s.jsxs)("div",{className:R().text,children:[!!(null===(g=_.meta)||void 0===g?void 0:null===(v=g.artists)||void 0===v?void 0:v.length)&&G,(null===(A=_.meta)||void 0===A?void 0:A.durationSec)&&f,!!(null===(h=_.labels)||void 0===h?void 0:h.length)&&L,_.isExplicit&&V]})]})})},[H,_.isExplicit,_.labels,_.description,null===(n=_.meta)||void 0===n?void 0:n.artists,null===(u=_.meta)||void 0===u?void 0:u.durationSec,X.value,W]),Y=(0,r.useMemo)(()=>_.isLoading||!_.meta||_.isRejected?(0,s.jsx)(S.KC,{className:R().header,isActive:!0}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.HZ,{album:_.meta,className:R().header,ref:v}),(0,s.jsx)(A.no,{className:O().tabCarousel,...X,onTabChange:$,ref:L,children:j.map((e,t)=>(0,s.jsx)(A.OK,{className:O().tab,title:Z[e],value:t},e))}),q]}),[_.isLoading,_.isRejected,_.meta,q,v,X,Z,$]);(0,r.useEffect)(()=>{_.isLoaded&&(_.loadLastEpisodes(),_.getRelatedContent())},[_,_.isLoaded,_.loadLastEpisodes,_.getRelatedContent]);let ee=K===l.ABOUT&&(null===(m=_.meta)||void 0===m?void 0:m.isPodcast)&&_.lastEpisodes.length>0,et=K===l.ABOUT&&_.relatedContent.items&&_.relatedContent.items.length>0,ei=(0,r.useMemo)(()=>({Header:()=>Y,Footer:()=>(0,s.jsxs)("div",{className:R().footerContainer,children:[ee&&(0,s.jsx)(V.QG,{className:O().lastEpisodes}),et&&(0,s.jsx)(V.$W,{isShimmerVisible:_.isRelatedContentLoading,isShimmerActive:!0}),(0,s.jsx)(A.$_,{className:R().footer})]})}),[Y,ee,et,_.isRelatedContentLoading]),ea=(0,r.useCallback)(e=>{let t=[];for(let i=e.startIndex;i<=e.endIndex;i++){let e=_.items[i];(null==e?void 0:e.type)===C.Vc.TRACK&&(null==e?void 0:e.loadingState)===g.Gui.IDLE&&t.push(e.id)}t.length&&_.getTracks({trackIds:t})},[_]),el=D.checkExperiment(g.peG.WebNextAlbumDisableTracks,"on")||K===l.ABOUT?0:_.items.length||10,es=(0,r.useMemo)(()=>{if(K===l.TRACKS){var e,t,i;return(null===(e=_.meta)||void 0===e?void 0:e.isAudiobook)?{listAriaLabel:H({id:"non-music.audiobook-list"},{albumName:(null===(i=_.meta)||void 0===i?void 0:i.title)||""}),listRole:"tabpanel"}:{listAriaLabel:H({id:"podcast.episodes-list"},{albumName:(null===(t=_.meta)||void 0===t?void 0:t.title)||""}),listRole:"tabpanel"}}return null},[K,null===(c=_.meta)||void 0===c?void 0:c.title,null===(b=_.meta)||void 0===b?void 0:b.isAudiobook,H]);return(0,s.jsx)(A.Wv,{className:(0,h.W)(R().root,R().important),listClassName:(0,h.W)(R().content,O().content),context:es,customComponents:ei,totalCount:el,itemContentCallback:e=>{var t;let i=null==_?void 0:null===(t=_.items)||void 0===t?void 0:t[e];if(!i||!_.meta||_.isRejected)return(0,s.jsx)(A.DX,{isActive:!0,className:R().shimmerItem,variant:g.Lxt.ALBUM});if(!(null==i?void 0:i.data))switch(null==i?void 0:i.type){case f.lf.TEXT:return(0,s.jsx)(A.AH,{className:R().shimmerItem});case C.Vc.TRACK:return(0,s.jsx)(A.DX,{isActive:!0,className:R().shimmerItem,variant:g.Lxt.ALBUM});default:return(0,s.jsx)(A.DX,{isActive:!0,className:O().shimmerItem,variant:g.Lxt.PLAYLIST})}return(null==i?void 0:i.type)===f.lf.TEXT?(0,s.jsx)("div",{className:(0,h.W)(R().shimmerItem,R().textItem),children:(0,s.jsx)(N.Heading,{variant:"h3",className:R().text,children:(0,s.jsx)(p.Z,{id:"entity-names.season-number",values:{number:i.data}})})}):i.data?(0,s.jsx)(G.FP,{track:i.data,viewType:G.cO.ALBUM,position:i.position,playContextParams:{contextData:{type:x.Ak.Album,meta:_.contextMeta,from:U},queueParams:{index:_.trackIndexInContext.get(String(i.id))},loadContextMeta:!1,entitiesData:B.unloadedEntitiesDataFromModels}}):void 0},onGetDataByRange:ea,debounceDurationInMs:300,initialItemCount:el,handleRef:E,withHeader:!0})}),P=(0,n.Pi)(e=>{var t,i,a,l;let{albumId:n}=e,h=(0,r.useRef)(0),[p,E]=(0,g.zU3)(),{notify:x}=(0,g.d$W)(),{album:C,disclaimer:N}=(0,g.oR4)(),{formatMessage:S}=(0,d.Z)(),{ref:I,offsetY:G}=(0,u.e)(),f=(0,r.useMemo)(()=>{var e;return(0,g.XGV)(null===(e=C.meta)||void 0===e?void 0:e.averageColor)},[null===(t=C.meta)||void 0===t?void 0:t.averageColor]),[L,k]=(0,b.at)(f,G),{href:T}=(0,g.zBm)("/album/".concat(C.deprecationTargetAlbumId)),V=(0,c.jV)({album:C.meta,shouldHistoryBack:!0}),j=(0,g.RVp)();if((0,r.useEffect)(()=>{var e;(null===(e=C.meta)||void 0===e?void 0:e.isUnsafeLegal)&&V()},[null===(i=C.meta)||void 0===i?void 0:i.isUnsafeLegal,V]),(0,r.useEffect)(()=>()=>{C.reset()},[C,n]),n&&C.loadingState===g.Gui.IDLE){let e=Promise.allSettled([C.getData({albumId:Number(n),resumeStream:!1}),C.getDonations({albumId:Number(n)})]);(0,r.use)(e)}C.deprecationTargetAlbumId&&(0,o.redirect)(T),(0,r.useMemo)(()=>()=>{if(!C.isNotFound&&(C.isRejected||!C.meta&&!C.isLoading)){var e;if(!h||h.current>0)return;let t=(null===(e=C.meta)||void 0===e?void 0:e.isPodcast)?S({id:"podcast-errors.error-during-loading-podcast"}):S({id:"album-errors.error-during-loading-album"});x((0,s.jsx)(A.Q,{error:t}),{containerId:g.W$x.ERROR}),h.current++}},[C.isRejected,C.isNotFound,C.meta,C.isLoading,x,S])(),(0,g.NOh)(C.loadingState===g.Gui.RESOLVE),C.isNotFound&&(0,o.notFound)();let y=(0,r.useMemo)(()=>{var e;return(null===(e=C.meta)||void 0===e?void 0:e.isNonMusic)&&j?(0,s.jsx)(B,{nonMusicHeaderRef:I,refCallback:E}):(0,s.jsx)(_,{albumHeaderRef:I,refCallback:E})},[null===(a=C.meta)||void 0===a?void 0:a.isNonMusic,j,I,E]);return(null===(l=C.meta)||void 0===l?void 0:l.isLegalRejected)?N.isRejected?(0,s.jsx)(m.D,{}):(0,s.jsx)(v.em,{disclaimer:N}):(0,s.jsx)(g.Lh6,{pageId:g.Rhz.ALBUM,children:(0,s.jsxs)(b.I7,{scrollElement:p,children:[(0,s.jsx)(A.h4,{style:k}),(0,s.jsx)("div",{className:R().averageColorBackground,style:L}),y]})})})},82857:function(e,t,i){"use strict";i.d(t,{QG:function(){return a.LastEpisodes},$W:function(){return l.RelatedContent},fd:function(){return o},JP:function(){return v}});var a=i(39064),l=i(54964),s=i(42288),n=i(93490);let o=s.V5.model("RelatedContentItem",{id:s.V5.string,type:s.V5.string,title:s.V5.string,albums:s.V5.array(n.ug)});var r=i(95695),d=i(44023),u=i(38360),m=i(38527);let c=s.V5.model("VolumeItemTrack",{type:s.V5.enumeration(Object.values(r.Vc)),id:s.V5.union(s.V5.string,s.V5.number),data:s.V5.maybeNull(d.le),position:s.V5.maybe(s.V5.number),isBest:s.V5.maybe(s.V5.boolean),loadingState:s.V5.enumeration(Object.values(m.Gui))}),b=s.V5.model("VolumeItemText",{type:s.V5.literal(u.lf.TEXT),data:s.V5.maybeNull(s.V5.number)}),v=s.V5.union(b,c)},39064:function(e,t,i){"use strict";i.d(t,{LastEpisodes:function(){return v}});var a=i(9753),l=i(60836),s=i(9544),n=i(98639),o=i(80542),r=i(84338),d=i(44023),u=i(38527),m=i(3084),c=i(631),b=i.n(c);let v=(0,s.Pi)(e=>{let{className:t}=e,{formatMessage:i}=(0,o.Z)(),{album:s,sonataState:c}=(0,u.oR4)(),v=(0,u.x5)({pageId:u.Rhz.PODCAST,blockId:u.aUg.PODCAST}),g=(0,n.useMemo)(()=>s.lastEpisodes.map((e,t)=>s.isLoaded&&e.data?(0,a.jsx)(d.FP,{track:e.data,playContextParams:{contextData:{type:r.Ak.Album,meta:s.contextMeta,from:v},queueParams:{index:s.trackIndexInContext.get(String(e.id))},loadContextMeta:!1,entitiesData:c.unloadedEntitiesDataFromModels}},e.data.id):(0,a.jsx)(m.DX,{isActive:!0,className:b().shimmerItem,variant:u.Lxt.ALBUM},t)),[s.lastEpisodes,s.isLoaded,s.contextMeta,s.trackIndexInContext,v,c.unloadedEntitiesDataFromModels]);return(0,a.jsxs)("div",{className:(0,l.W)(t,b().root),children:[(0,a.jsx)(m.ti,{className:b().blockHeader,title:i({id:"entity-names.podcast-last-episodes"})}),(0,a.jsx)("div",{role:"list","aria-label":i({id:"podcast.last-episodes-list"}),tabIndex:0,children:g})]})})},54964:function(e,t,i){"use strict";i.d(t,{RelatedContent:function(){return v}});var a=i(9753),l=i(60836),s=i(9544),n=i(23881),o=i(93490),r=i(38527),d=i(3084);let u={AUTHORS_BOOKS:"authors-books",CATEGORY_ALBUMS:"category-albums",LABELS_ALBUMS:"labels-albums",SIMILAR_ALBUMS:"similar-albums"},m=e=>{let t=Object.keys(u).find(t=>u[t]===e);return n.QM.album[t]||""};var c=i(38359),b=i.n(c);let v=(0,s.Pi)(e=>{var t,i;let{isShimmerVisible:s,isShimmerActive:u,className:c}=e,{album:v}=(0,r.oR4)();return(0,a.jsx)("div",{className:(0,l.W)(c,b().root),children:null===(i=v.relatedContent)||void 0===i?void 0:null===(t=i.items)||void 0===t?void 0:t.map((e,t)=>{let i=m(e.type);return(0,a.jsx)(d.HY,{title:e.title,isShimmerVisible:s,isShimmerActive:u,className:(0,l.W)(b().root,c),containerClassName:b().carousel,headerClassName:b().header,...i?(0,n.BA)(i):{},children:e.albums.map(e=>(0,a.jsx)(o.rf,{album:e,contentLinesCount:3,withLikesCount:!0,withAddition:!1},e.id))},"".concat(e.type).concat(t))})})})},28417:function(e){e.exports={root:"AlbumPage_root__RMrFx",important:"AlbumPage_important__x2o8I",averageColorBackground:"AlbumPage_averageColorBackground__PmVaF",header:"AlbumPage_header__TDpqp",content:"AlbumPage_content__1JXxB",footerContainer:"AlbumPage_footerContainer__1IxWF",carouselBlocks:"AlbumPage_carouselBlocks__VIvNT",carouselBlock:"AlbumPage_carouselBlock__oWYmS",carouselBlockHeader:"AlbumPage_carouselBlockHeader__Bb3Ts",carouselContainer:"AlbumPage_carouselContainer__9clXz",textItem:"AlbumPage_textItem__1T3qL",text:"AlbumPage_text__rCU1L",shimmerItem:"AlbumPage_shimmerItem___Yecm",footer:"AlbumPage_footer__6_0Ei"}},55447:function(e){e.exports={tabCarousel:"NonMusicContent_tabCarousel__EBHWC",tab:"NonMusicContent_tab__LIh_U",contentAbout:"NonMusicContent_contentAbout__BMIP5",infoBlock:"NonMusicContent_infoBlock__IyjXA",infoTitle:"NonMusicContent_infoTitle__Wf9EC",content:"NonMusicContent_content__8Q0I8",lastEpisodes:"NonMusicContent_lastEpisodes__Xa8Xp"}},631:function(e){e.exports={root:"LastEpisodes_root__4JPKj",blockHeader:"LastEpisodes_blockHeader__se7bd",shimmerItem:"LastEpisodes_shimmerItem__Iirx5"}},38359:function(e){e.exports={root:"RelatedContent_root__Dl1Nr",carousel:"RelatedContent_carousel__pmv5c",header:"RelatedContent_header__527S3"}}}]);