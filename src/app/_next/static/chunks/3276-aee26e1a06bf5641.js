(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3276],{73276:function(i,e,t){"use strict";t.d(e,{vY:function(){return s.EmptyPlaylistBlock},ZL:function(){return l.PlaylistCard},Nn:function(){return k},d2:function(){return u},VD:function(){return n.PlaylistsCarousel},RE:function(){return P},Q9:function(){return _},VB:function(){return f},PB:function(){return h}});var l=t(22003),n=t(18921),s=t(6030),a=t(42288),r=t(33589),o=t(10668);let u=o.$h.props({artists:a.V5.maybe(a.V5.array(r.Go))});var c=t(38527),d=t(395),p=t(95695);let y=a.V5.model("PlaylistOwner",{uid:a.V5.number,login:a.V5.string,name:a.V5.string,sex:a.V5.enumeration(Object.values(p.oF)),verified:a.V5.boolean}),m=a.V5.model("PlaylistOwner",{userInfo:a.V5.maybeNull(y),caseForms:a.V5.maybeNull(d.S2)}),k=o.Cd.props({owner:a.V5.maybe(y),modified:a.V5.string,description:a.V5.maybe(a.V5.string),madeFor:a.V5.maybeNull(m)}).views(i=>({get seeds(){var e;return["playlist:".concat(null===(e=i.owner)||void 0===e?void 0:e.login,"_").concat(i.kind)]}})).actions(i=>({changeDescription:(0,a.ls)(function*(e){if(!(0,a.fh)(i))return c.SLo.ERROR;if(i.description===e)return c.SLo.OK;if(e.length>o.Zn)return c.SLo.ERROR;let{usersResource:t,modelActionsLogger:l}=(0,a.dU)(i);if(i.canUserChange){let n=i.description;i.description=e;try{let l=yield t.changePlaylistDescription({description:e,userId:i.uid,playlistKind:i.kind});return i.description=l.description,c.SLo.OK}catch(e){i.description=n,l.error(e)}}return c.SLo.ERROR}),changePlaylistCover:(0,a.ls)(function*(e){if(!(0,a.fh)(i))return c.SLo.ERROR;let{usersResource:t,modelActionsLogger:l}=(0,a.dU)(i);try{return yield t.uploadPlaylistCover({userId:i.uid,formData:e,playlistKind:i.kind}),c.SLo.OK}catch(i){l.error(i)}return c.SLo.ERROR})})),v=i=>({uid:i.uid,login:i.login,name:i.name,sex:i.sex,verified:i.verified}),C=i=>(0,a.pj)({userInfo:i.userInfo?v(i.userInfo):null,caseForms:i.caseForms?(0,c.GA0)(i.caseForms):null}),_=i=>(0,a.pj)({...(0,o.PV)(i),owner:i.owner?v(i.owner):void 0,description:i.description,modified:i.modified,madeFor:i.madeFor?C(i.madeFor):null}),f=i=>{var e,t;return(0,a.pj)({...(0,o.PV)(i),artists:null!==(t=null==i?void 0:null===(e=i.artists)||void 0===e?void 0:e.map(r.d))&&void 0!==t?t:[]})},P=i=>{var e,t;let{playlist:l,generatedPlaylistType:n,likesCount:s,trailer:r}=i;return(0,a.pj)({isAvailable:null===(t=l.available)||void 0===t||t,uuid:l.playlistUuid,title:l.title,uid:l.uid,kind:l.kind,coverUri:null===(e=l.cover)||void 0===e?void 0:e.uri,generatedPlaylistType:n,likesCount:s,trailer:(0,c.GFX)(r)})};var x=t(78604);let h=i=>{var e,t;return(0,a.pj)({...(0,o.PV)(i),tracks:null!==(t=null==i?void 0:null===(e=i.tracks)||void 0===e?void 0:e.map(x.wM))&&void 0!==t?t:[]})}},6030:function(i,e,t){"use strict";t.d(e,{EmptyPlaylistBlock:function(){return d}});var l=t(9753),n=t(60836),s=t(98639),a=t(31014),r=t(28852),o=t(2570),u=t(98746),c=t.n(u);let d=i=>{let{className:e,isEmptySearch:t}=i,u=(0,s.useMemo)(()=>t?(0,l.jsx)(a.Z,{id:"search-results.not-found-title"}):(0,l.jsx)(a.Z,{id:"error-messages.empty-collection-playlist-title"}),[t]),d=(0,s.useMemo)(()=>t?(0,l.jsx)(a.Z,{id:"search-results.not-found-description"}):(0,l.jsx)(a.Z,{id:"error-messages.empty-collection-playlist-description"}),[t]);return(0,l.jsxs)("div",{className:(0,n.W)(c().root,e),children:[(0,l.jsx)("div",{className:c().iconBackground,children:(0,l.jsx)(r.J,{variant:"search",size:"l",className:c().icon})}),(0,l.jsx)(o.Heading,{variant:"h3",size:"xs",className:c().title,children:u}),(0,l.jsx)(o.Caption,{variant:"span",size:"l",className:c().subtitle,children:d})]})}},22003:function(i,e,t){"use strict";t.d(e,{PlaylistCard:function(){return B}});var l=t(9753),n=t(60836),s=t(9544),a=t(98639),r=t(80542),o=t(18375),u=t(23881),c=t(84338),d=t(27491),p=t(28852),y=t(12404),m=t(2570),k=t(33589),v=t(10668),C=t(38527),_=t(3084);let f=i=>{let{formatMessage:e}=(0,r.Z)();return(0,a.useMemo)(()=>{let t="";i.isLiked&&!i.actualLikesCount?t=e({id:"entity-names.has-your-like"}):"number"==typeof i.actualLikesCount&&(t=i.actualLikesCount>0?e({id:"entity-names.likes-counter"},{counter:i.actualLikesCount}):e({id:"entity-names.likes-counter-empty"}));let l=e({id:"entity-names.playlist-name"},{playlistName:i.title});return"".concat(l," ").concat(t)},[e,i])};var P=t(385);let x=(0,s.Pi)(i=>{var e;let{playlist:t,onOpenChange:n,open:s,...u}=i,{settings:c,trailer:d}=(0,C.oR4)(),p=(0,v.SB)(t),y=(0,v.BV)(t),m=(0,C.FTC)(),k=c.layout===C.t8m.Mobile,{formatMessage:f}=(0,r.Z)();(0,C.ZP4)(s);let x=(0,a.useCallback)(()=>{d.openPlaylistTrailer(t.id),m(o.OB.Playlist,t.id)},[t.id,m,d]);return(0,l.jsxs)(P.v2,{title:t.title,onOpenChange:n,open:s,offsetOptions:10,isMobile:k,ariaLabel:f({id:"interface-actions.context-menu"}),...u,children:[!k&&(0,l.jsx)(_.Zd,{onClick:y,isPinned:t.isPinned}),!t.isFavouritePlaylist&&(0,l.jsx)(_.xZ,{onClick:p,isLiked:t.isLiked}),(null===(e=t.trailer)||void 0===e?void 0:e.canShow)&&(0,l.jsx)(_.NB,{onClick:x})]})});var h=t(88308),L=t.n(h);let B=(0,s.Pi)(i=>{let{className:e,playlist:t,children:s,contentLinesCount:P,customDescription:h}=i,{ref:B,intersectionPropertyId:j}=(0,C.VfV)(),{trailer:b}=(0,C.oR4)(),g=(0,C.x5)(),{formatMessage:N}=(0,r.Z)(),{sendLikeSearchFeedback:S,sendNavigateSearchFeedback:V,sendPlaySearchFeedback:R}=(0,C.sAF)(),[w,E]=(0,a.useState)(!1),[A,O]=(0,a.useState)(!1),[T,z]=(0,a.useState)(!1),F=f(t),M=(0,v.SB)(t),K=(0,v.BV)(t),U=(0,C.zxW)(),I=(0,C.s0h)(t.url),Z=(0,C.s0h)(t.url,!0),W=(0,k.ik)(Z,I),Y=(0,C.FTC)(),D=(0,a.useCallback)(i=>{i.stopPropagation(),b.openPlaylistTrailer(t.id),Y(o.OB.Playlist,t.id)},[t.id,Y,b]),[G,H]=(0,a.useState)(!1),{isPlaying:q,togglePlay:J}=(0,C.qmq)({playContextParams:{contextData:{type:c.Ak.Playlist,meta:{id:t.id,uuid:t.uuid},from:g},loadContextMeta:!0}}),Q=(0,a.useCallback)(()=>{U({to:o.qU.PlaylistScreen}),null==V||V()},[U,V]),X=(0,a.useCallback)(i=>{Q(),W(i)},[W,Q]),$=(0,a.useCallback)(()=>{w||q||(E(!0),null==R||R()),J()},[q,w,R,J]),ii=(0,a.useCallback)(()=>{A||t.isLiked||(O(!0),null==S||S()),M()},[M,A,t.isLiked,S]),ie=(0,a.useCallback)(i=>{i.preventDefault(),i.stopPropagation()},[]),it=(0,a.useCallback)(()=>{z(!T),H(!T)},[T]),il=(0,a.useMemo)(()=>{var i;return h?(0,l.jsx)(m.Caption,{variant:"span",type:"entity",size:"s",weight:"medium",lineClamp:2,children:h},t.getKey("description")):(null===(i=t.artists)||void 0===i?void 0:i.length)?(0,l.jsx)(k.jO,{className:L().artists,artists:t.artists,lineClamp:1,linkClassName:L().artistLink,captionSize:"s"},t.getKey("description")):void 0},[h,t]),is=(0,a.useMemo)(()=>{if(!t.isFavouritePlaylist)return(0,l.jsx)(_.dJ,{className:(0,n.W)(L().likeButton,L().control),isLiked:t.isLiked,onClick:ii,variant:"default",size:"s",iconSize:"xxs"},t.getKey("LikeButton"))},[ii,t]),ia=(0,a.useMemo)(()=>{var i;if(null==t?void 0:null===(i=t.trailer)||void 0===i?void 0:i.canShow)return(0,l.jsx)(_.eP,{className:(0,n.W)(L().trailerButton,L().control),radius:"round",size:"s",iconSize:"xxs",enabledTooltip:!0,onClick:D},t.getKey("TrailerButton"))},[D,t]),ir=(0,a.useMemo)(()=>(0,l.jsx)(y.Paper,{className:L().cover,radius:"s",withShadow:!0,...(0,u.BA)(u.bG.playlist.PLAYLIST_CARD),children:(0,l.jsxs)("div",{className:L().coverBlock,onClick:X,children:[(0,l.jsx)(_.BE,{className:L().image,src:t.coverUri,size:200,fit:"cover",alt:F,withAvatarReplace:!0,"aria-hidden":!0}),(0,l.jsx)(d.kk,{isVisible:T||G,className:L().controls,playControl:(0,l.jsx)(_.JM,{className:(0,n.W)(L().playButton,L().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",onClick:$,isPlaying:q,disabled:!t.isAvailable},t.getKey("PlayButton")),likeControl:is,menuControl:(0,l.jsx)(x,{playlist:t,onOpenChange:it,open:T,onClick:ie,className:(0,n.W)(L().menuButton,L().control),icon:(0,l.jsx)(p.J,{size:"xxs",variant:"more"}),size:"s",...(0,u.BA)(u.bG.playlist.PLAYLIST_CONTEXT_MENU_BUTTON)},t.getKey("PlaylistContextMenu")),pinControl:(0,l.jsx)(_.RT,{onClick:K,isPinned:t.isPinned,className:(0,n.W)(L().pinButton,L().control),withRipple:!1},t.getKey("PinButton")),trailerControl:ia})]})}),[X,t,F,T,G,$,q,is,it,ie,K,ia]),io=!!t.actualLikesCount&&!t.isLikesCountHidden;return(0,l.jsxs)(d.m7,{ref:B,"aria-label":F,className:(0,n.W)(L().root,e),title:(0,l.jsx)(m.Caption,{variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,...(0,u.BA)(u.bG.playlist.PLAYLIST_TITLE),children:(0,l.jsx)(_.rU,{className:L().titleLink,href:t.url,onClick:Q,children:t.title})}),srTitle:(0,l.jsx)(_.rU,{href:t.url,onClick:Q,children:t.title}),"data-intersection-property-id":j,contentLinesCount:P,view:ir,description:il,...(0,u.BA)(u.bG.playlist.PLAYLIST_ITEM),children:[io&&(0,l.jsx)(_.DB,{ariaLabel:N({id:"entity-names.likes-counter"},{counter:t.actualLikesCount}),likesCount:t.actualLikesCount,isLiked:t.isLiked,handleLikeClick:M}),s]})})},18921:function(i,e,t){"use strict";t.d(e,{PlaylistsCarousel:function(){return o}});var l=t(9753),n=t(98639),s=t(3084),a=t(22003);let r=i=>{let{forwardRef:e,isShimmerVisible:t,isShimmerActive:n,title:r,description:o,playlists:u,containerClassName:c,className:d,headerClassName:p,viewAllActionLink:y,...m}=i;return(0,l.jsx)(s.HY,{isShimmerVisible:t,isShimmerActive:n,className:d,headerClassName:p,containerClassName:c,ref:e,title:r,description:o,viewAllActionLink:y,...m,children:null==u?void 0:u.map(i=>(0,l.jsx)(a.PlaylistCard,{playlist:i,contentLinesCount:3},i.key))})},o=(0,n.forwardRef)((i,e)=>(0,l.jsx)(r,{forwardRef:e,...i}))},98746:function(i){i.exports={root:"EmptyPlaylistBlock_root__wpA0j",iconBackground:"EmptyPlaylistBlock_iconBackground__pnUlz",title:"EmptyPlaylistBlock_title__pQQLf",subtitle:"EmptyPlaylistBlock_subtitle__P4Q7x"}},88308:function(i){i.exports={root:"PlaylistCard_root__i3pR4",controls:"PlaylistCard_controls__Ej8Rz",cover:"PlaylistCard_cover__tpK5L",coverBlock:"PlaylistCard_coverBlock__1slsN",image:"PlaylistCard_image__Li6oy",titleLink:"PlaylistCard_titleLink__H8qEc",artists:"PlaylistCard_artists__HtVIF",artistLink:"PlaylistCard_artistLink__jx3KB",playButton:"PlaylistCard_playButton__eaduk",likeButton:"PlaylistCard_likeButton__RYXJz",menuButton:"PlaylistCard_menuButton__jFcWr",pinButton:"PlaylistCard_pinButton__jhWnL",trailerButton:"PlaylistCard_trailerButton__Qjg_U",control:"PlaylistCard_control__73YUq"}}}]);