(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6410],{7042:function(e,t,i){"use strict";i.d(t,{em:function(){return j},F8:function(){return S},nU:function(){return u},$H:function(){return r}});var a=i(99616),n=i(42503),l=i(5674);let r=e=>{let{entityType:t,isLegalRejected:i,isUnsafeLegal:r,entityId:s,callback:o}=e,{disclaimer:c,modals:{disclaimerModal:d}}=(0,l.oR)(),u=(0,a.useRef)(String((0,n.Z)())),m=(0,a.useRef)(!1),k=(0,l.uK)(),v=k.get(l.ce);return(0,a.useEffect)(()=>{c.isUnsafeDisclaimerConfirmed&&c.id===u.current&&!m.current&&(null==o||o(),m.current=!0)},[o,c.isUnsafeDisclaimerConfirmed,c.id]),(0,a.useCallback)(async e=>{if(s&&(i||r)){let i=v.get(l.BU.ExEx);if(r&&(null==i?void 0:i.includes("".concat(t,"_").concat(s)))){null==o||o();return}switch(e.preventDefault(),t){case l.co.ARTIST:await c.getArtistDisclaimer({artistId:String(s)});break;case l.co.ALBUM:case l.co.PODCAST:await c.getAlbumDisclaimer({albumId:Number(s)});break;case l.co.TRACK:await c.getTrackDisclaimer({trackId:String(s)})}r&&c.setType(l.Gq.UNSAFE),c.setId(u.current),c.setEntityId(s),c.setEntityType(t),m.current=!1,d.open();return}null==o||o()},[o,c,d,s,t,i,r,v])};var s=i(96555);let o=e=>e.details?(0,s.pj)({title:e.title,description:e.description,details:{text:e.details.text,url:e.details.url}}):(0,s.pj)({title:e.title,description:e.description}),c=s.V5.model("DisclaimerDetails",{text:s.V5.maybe(s.V5.string),url:s.V5.maybe(s.V5.string)}),d=s.V5.model("DisclaimerData",{title:s.V5.maybe(s.V5.string),description:s.V5.maybe(s.V5.string),details:s.V5.maybe(c)}),u=s.V5.model("Disclaimer",{loadingState:s.V5.enumeration(Object.values(l.Gu)),data:s.V5.maybeNull(d),type:s.V5.maybeNull(s.V5.enumeration(Object.values(l.Gq))),id:s.V5.maybeNull(s.V5.string),entityType:s.V5.maybeNull(s.V5.enumeration(Object.values(l.co))),entityId:s.V5.maybeNull(s.V5.union(s.V5.string,s.V5.number)),isUnsafeDisclaimerConfirmed:s.V5.optional(s.V5.boolean,!1),shouldHistoryBack:s.V5.optional(s.V5.boolean,!1)}).views(e=>({get isLoading(){return e.loadingState===l.Gu.IDLE||e.loadingState===l.Gu.PENDING},get isRejected(){return e.loadingState===l.Gu.REJECT}})).actions(e=>{let t={getArtistDisclaimer:(0,s.ls)(function*(t){let{artistId:i}=t,{artistsResource:a,modelActionsLogger:n}=(0,s.dU)(e);if(e.loadingState!==l.Gu.PENDING)try{e.loadingState=l.Gu.PENDING;let t=yield a.getDisclaimer({artistId:i});t.modal&&(e.data=o(t.modal)),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.RESOLVE)}catch(t){n.error(t),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.REJECT)}}),getAlbumDisclaimer:(0,s.ls)(function*(t){let{albumId:i}=t,{albumResource:a,modelActionsLogger:n}=(0,s.dU)(e);if(e.loadingState!==l.Gu.PENDING)try{e.loadingState=l.Gu.PENDING;let t=yield a.getDisclaimer({albumId:i});t.modal&&(e.data=o(t.modal)),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.RESOLVE)}catch(t){n.error(t),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.REJECT)}}),getTrackDisclaimer:(0,s.ls)(function*(t){let{trackId:i}=t,{tracksResource:a,modelActionsLogger:n}=(0,s.dU)(e);if(e.loadingState!==l.Gu.PENDING)try{e.loadingState=l.Gu.PENDING;let t=yield a.getDisclaimer({trackId:i});t.modal&&(e.data=o(t.modal)),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.RESOLVE)}catch(t){n.error(t),e.loadingState!==l.Gu.IDLE&&(e.loadingState=l.Gu.REJECT)}}),setId(t){e.id=t},setType(t){e.type=t},setEntityType(t){e.entityType=t},setEntityId(t){e.entityId=t},setConfirmUnsafeDisclaimer(t){e.isUnsafeDisclaimerConfirmed=t},setShouldHistoryBack(t){e.shouldHistoryBack=t},reset(){e.loadingState=l.Gu.IDLE,e.data=null,e.id=null,e.type=null,e.entityType=null,e.entityId=null,e.isUnsafeDisclaimerConfirmed=!1,e.shouldHistoryBack=!1}};return t});var m=i(8759),k=i(35338),v=i(33423),_=i(2814),p=i(454),C=i(15527),x=i(12670),y=i(1918),f=i(44285),b=i(77263),h=i.n(b);let g={[l.co.ALBUM]:(0,m.jsx)(_.Z,{id:"extra-explicit.confirm-unsafe-album"}),[l.co.PODCAST]:(0,m.jsx)(_.Z,{id:"extra-explicit.confirm-unsafe-podcast"}),[l.co.ARTIST]:(0,m.jsx)(_.Z,{id:"extra-explicit.confirm-unsafe-artist"}),[l.co.TRACK]:(0,m.jsx)(_.Z,{id:"extra-explicit.confirm-unsafe-track"})},j=(0,v.Pi)(e=>{var t,i,n,r;let{disclaimer:s,onClose:o,className:c}=e,{data:d,isLoading:u}=null!=s?s:{},{href:v}=(0,l.zB)(null!==(r=null==s?void 0:null===(i=s.data)||void 0===i?void 0:null===(t=i.details)||void 0===t?void 0:t.url)&&void 0!==r?r:""),b=(0,l.k6)(),j=(0,l.s0)("/"),N=(0,l.uK)(),T=N.get(l.ce),D=(0,a.useCallback)(()=>{if(o)return o();b.canBack&&b.back(),j()},[o,b,j]),S=(null==d?void 0:null===(n=d.details)||void 0===n?void 0:n.url)&&d.details.text,E=(0,a.useCallback)(()=>{null==s||s.setConfirmUnsafeDisclaimer(!0);let e=T.get(l.BU.ExEx),t=new Date,i=t.setMinutes(t.getMinutes()+15);e?T.set(l.BU.ExEx,[...e,"".concat(null==s?void 0:s.entityType,"_").concat(null==s?void 0:s.entityId)],{expires:new Date(i)}):T.set(l.BU.ExEx,["".concat(null==s?void 0:s.entityType,"_").concat(null==s?void 0:s.entityId)],{expires:new Date(i)}),null==o||o()},[s,T,o]),L=(0,a.useCallback)(()=>{(null==s?void 0:s.shouldHistoryBack)?(null==o||o(),b.canBack&&b.back(),j()):null==o||o()},[null==s?void 0:s.shouldHistoryBack,b,j,o]);(0,a.useEffect)(()=>()=>{null==s||s.reset()},[s]);let A=(0,a.useMemo)(()=>{if(u)return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(x.Shimmer,{radius:"l",width:200,height:24,className:h().shimmer}),(0,m.jsx)(x.Shimmer,{radius:"l",width:250,height:16,className:h().shimmer})]});if(d&&!u){var e;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(y.Heading,{variant:"h4",size:"l",className:(0,k.W)(h().title,h().text),...(0,p.BA)(p.FK.disclaimer.DISCLAIMER_TITLE),children:d.title}),(0,m.jsx)(y.Caption,{variant:"div",size:"l",weight:"normal",className:h().text,...(0,p.BA)(p.FK.disclaimer.DISCLAIMER_DESCRIPTION),children:d.description}),S&&(0,m.jsx)(f.rU,{href:v,className:h().link,children:(0,m.jsx)(y.Caption,{variant:"span",size:"l",weight:"normal",children:null===(e=d.details)||void 0===e?void 0:e.text})})]})}},[u,d,v,S]),I=(0,a.useMemo)(()=>u?(0,m.jsx)(x.Shimmer,{radius:"xl",width:190,height:50,className:h().shimmer}):(null==s?void 0:s.type)===l.Gq.UNSAFE?(0,m.jsxs)("div",{className:h().buttons,children:[(0,m.jsx)(C.z,{color:"primary",onClick:L,size:"l",radius:"xxxl",className:h().button,children:(0,m.jsx)(_.Z,{id:"extra-explicit.reject-unsafe-entity"})}),(0,m.jsx)(C.z,{color:"secondary",onClick:E,size:"l",radius:"xxxl",className:h().button,children:s.entityType&&g[s.entityType]})]}):(0,m.jsx)("div",{className:h().buttons,children:(0,m.jsx)(C.z,{color:"primary",onClick:D,size:"l",radius:"xxxl",className:h().button,...(0,p.BA)(p.FK.disclaimer.DISCLAIMER_REJECT_BUTTON),children:(0,m.jsx)(_.Z,{id:"interface-actions.confirm"})})}),[E,null==s?void 0:s.entityType,null==s?void 0:s.type,D,u,L]);return(0,m.jsx)("div",{className:(0,k.W)(h().root,c),...(0,p.BA)(p.FK.disclaimer.DISCLAIMER_MODAL),children:(0,m.jsxs)("div",{className:h().container,children:[A,I]})})});var N=i(31476),T=i(13327),D=i.n(T);let S=(0,v.Pi)(()=>{let{disclaimer:e,modals:{disclaimerModal:t}}=(0,l.oR)();return(0,m.jsx)(N.u,{size:"fitContent",placement:"center",open:t.isOpened,onOpenChange:t.onOpenChange,onClose:t.close,showHeader:!1,className:D().root,contentClassName:D().content,children:(0,m.jsx)(j,{disclaimer:e,onClose:t.close})})})},43310:function(e,t,i){"use strict";i.d(t,{yp:function(){return o},bP:function(){return _},Yc:function(){return v.NotificationLike},v$:function(){return c},Ni:function(){return u},jp:function(){return p},KX:function(){return m.useOnDislikeClick},SB:function(){return k.useOnLikeClick}});var a=i(96555),n=i(34603),l=i(5674),r=i(65704);let s=a.V5.model("TrackParameters",{bpm:a.V5.maybe(a.V5.number),energy:a.V5.maybe(a.V5.number),hue:a.V5.maybe(a.V5.number),userCollectionHue:a.V5.maybe(a.V5.number)}),o=a.V5.compose(a.V5.model("BaseTrack",{id:a.V5.string,isAvailable:a.V5.boolean,isRemoved:a.V5.boolean,title:a.V5.string,trackSource:a.V5.maybe(a.V5.enumeration(Object.values(n.zu))),version:a.V5.maybe(a.V5.string),durationMs:a.V5.maybe(a.V5.number),coverUri:a.V5.maybe(a.V5.string),averageColor:a.V5.maybe(a.V5.string),trackParameters:a.V5.maybe(s),albumId:a.V5.maybe(a.V5.number),disclaimers:a.V5.maybe(a.V5.array(a.V5.string)),type:a.V5.maybe(a.V5.enumeration(Object.values(n.Vc))),pubDate:a.V5.maybe(a.V5.string),hasSyncLyrics:a.V5.maybe(a.V5.boolean)}),r.ie).views(e=>({get isLiked(){if((0,a.fh)(e)){let{library:t}=(0,a.yj)(e);return t.isTrackLiked(e.id)}return!1},get url(){if(e.albumId)return"/album/".concat(e.albumId,"/track/").concat(e.id);return"/track/".concat(e.id)},get isDisliked(){if((0,a.fh)(e)){let{library:t}=(0,a.yj)(e);return t.isTrackDisliked(e.id)}return!1},get isTrackPodcast(){if((0,a.fh)(e))return n.Vc.PODCAST===e.type;return!1},get isUGC(){if((0,a.fh)(e))return e.trackSource===n.zu.UGC;return},get seeds(){return["track:".concat(e.id)]},get isLegalRejected(){if(!(0,a.fh)(e))return!1;let{experiments:t}=(0,a.yj)(e),i=t.checkExperiment(l.pe.WebNextLegalRejectTrack,"on");if(e.disclaimers&&i)return!e.isAvailable&&e.disclaimers.includes(n.em.MODAL);return!1},get isUnsafeLegal(){if(!(0,a.fh)(e))return!1;let{experiments:t}=(0,a.yj)(e),i=t.checkExperiment(l.pe.WebNextLegalUnsafeTrack,"on");if(e.disclaimers&&i)return e.isAvailable&&e.disclaimers.includes(n.em.MODAL);return!1}})).actions(e=>{let t={afterCreate(){e.trackType=e.type},toggleLike:(0,a.ls)(function*(){if(!(0,a.fh)(e))return;let{library:t,user:i}=(0,a.yj)(e);if(i.isAuthorized)return yield t.toggleTrackLike({entityId:e.id,albumId:e.albumId,userId:i.account.uid})}),toggleDislike:(0,a.ls)(function*(){if(!(0,a.fh)(e))return;let{library:t,user:i}=(0,a.yj)(e);if(i.isAuthorized)return yield t.toggleTrackDislike({entityId:e.id,albumId:e.albumId,userId:i.account.uid})})};return t}),c=a.V5.model("Ugc"),d=e=>(0,a.pj)({bpm:null==e?void 0:e.bpm,energy:null==e?void 0:e.energy,hue:null==e?void 0:e.hue,userCollectionHue:null==e?void 0:e.userCollectionHue}),u=(e,t)=>{var i,n,r,s,o,c,u,m,k,v,_,p,C,x,y;e=e||{};let{isSmartPreview:f}=t||{},b=(0,l.Us)(null===(i=e)||void 0===i?void 0:i.derivedColors),h=f?null===(n=e.smartPreviewParams)||void 0===n?void 0:n.durationMs:null===(r=e)||void 0===r?void 0:r.durationMs;return(0,a.pj)({id:(e.id||0).toString(),isAvailable:!!(null===(s=e)||void 0===s?void 0:s.available),isRemoved:(null===(o=e)||void 0===o?void 0:o.error)==="not-found",title:null!==(y=null===(c=e)||void 0===c?void 0:c.title)&&void 0!==y?y:"",contentWarning:null===(u=e)||void 0===u?void 0:u.contentWarning,version:null===(m=e)||void 0===m?void 0:m.version,durationMs:h,coverUri:null===(k=e)||void 0===k?void 0:k.coverUri,averageColor:b,trackParameters:d(null===(v=e)||void 0===v?void 0:v.trackParameters),trackSource:null===(_=e)||void 0===_?void 0:_.trackSource,albumId:null===(C=e.albums)||void 0===C?void 0:null===(p=C[0])||void 0===p?void 0:p.id,disclaimers:e.disclaimers,type:e.type,pubDate:e.pubDate,hasSyncLyrics:null===(x=e.lyricsInfo)||void 0===x?void 0:x.hasAvailableSyncLyrics})};var m=i(45431),k=i(50818),v=i(20766);i(5889);let _=a.V5.model("MajorModel",{id:a.V5.number,name:a.V5.string,prettyName:a.V5.maybe(a.V5.string)}),p=e=>(0,a.pj)({id:e.id,name:e.name,prettyName:e.prettyName})},45431:function(e,t,i){"use strict";i.r(t),i.d(t,{useOnDislikeClick:function(){return m}});var a=i(8759),n=i(93043),l=i(99616),r=i(65244),s=i(57413),o=i(34603),c=i(5674),d=i(44285),u=i(5889);let m=e=>{let{user:t,modals:{fullscreenPlayerModal:i}}=(0,c.oR)(),m=(0,c.R$)(),{notify:k}=(0,c.d$)(),[v,_]=(0,l.useState)(!1),{formatMessage:p}=(0,r.Z)(),C=(0,c.uK)(),x=C.get(c.U5);return(0,l.useCallback)(async()=>{if(e){let r=i.isOpened?c.W$.FULLSCREEN_INFO:c.W$.INFO,C=i.isOpened?c.W$.FULLSCREEN_ERROR:c.W$.ERROR;if(!t.isAuthorized){k((0,a.jsx)(d.Q,{error:p({id:"authorization-messages.need-to-authorizate"})}),{containerId:C});return}if(v)return;let y={...(0,n.ZN)(e),isDisliked:!e.isDisliked};_(!0);let f=await e.toggleDislike();_(!1);let b=d.j9.TRACK;if(e.isTrackPodcast&&x.features.nonMusic&&(b=d.j9.PODCAST_EPISODE),f===o.Bi.OK){var l;k((0,a.jsx)(u.NotificationDislike,{coverUri:y.coverUri,isDisliked:y.isDisliked,title:y.title,entityVariant:b}),{containerId:r});let e=y.isDisliked?o.C.DISLIKE:o.C.UNDISLIKE;m&&(0,s.xA)(m.state.currentContext.value)&&await m.state.currentContext.value.sendFeedback(m.state.playerState,m.state.queueState,e),y.isDisliked&&y.id===(null==m?void 0:null===(l=m.state.queueState.currentEntity.value)||void 0===l?void 0:l.entity.data.meta.id)&&(null==m||m.moveForward())}else k((0,a.jsx)(d.Q,{error:p({id:"error-messages.error-during-action"})}),{containerId:C})}},[x.features.nonMusic,p,i.isOpened,k,v,m,e,t.isAuthorized])}},50818:function(e,t,i){"use strict";i.r(t),i.d(t,{useOnLikeClick:function(){return m}});var a=i(8759),n=i(93043),l=i(99616),r=i(65244),s=i(57413),o=i(34603),c=i(5674),d=i(44285),u=i(20766);let m=e=>{let{user:t,modals:{fullscreenPlayerModal:i}}=(0,c.oR)(),{notify:m}=(0,c.d$)(),[k,v]=(0,l.useState)(!1),{formatMessage:_}=(0,r.Z)(),p=(0,c.R$)();return(0,l.useCallback)(async()=>{if(e){let l=i.isOpened?c.W$.FULLSCREEN_INFO:c.W$.INFO,r=i.isOpened?c.W$.FULLSCREEN_ERROR:c.W$.ERROR;if(!t.isAuthorized){m((0,a.jsx)(d.Q,{error:_({id:"authorization-messages.need-to-authorizate"})}),{containerId:r});return}if(k)return;let C={...(0,n.ZN)(e),isLiked:!e.isLiked,isTrackPodcast:e.isTrackPodcast};v(!0);let x=await e.toggleLike();if(v(!1),x===o.Bi.OK){m((0,a.jsx)(u.NotificationLike,{track:C}),{containerId:l});let e=C.isLiked?o.C.LIKE:o.C.UNLIKE;p&&(0,s.xA)(p.state.currentContext.value)&&p.state.currentContext.value.sendFeedback(p.state.playerState,p.state.queueState,e)}else m((0,a.jsx)(d.Q,{error:_({id:"error-messages.error-during-action"})}),{containerId:r})}},[_,i.isOpened,m,k,p,e,t.isAuthorized])}},5889:function(e,t,i){"use strict";i.r(t),i.d(t,{NotificationDislike:function(){return m}});var a=i(8759),n=i(35338),l=i(99616),r=i(2814),s=i(96437),o=i(1918),c=i(44285),d=i(85204),u=i.n(d);let m=e=>{let{coverUri:t,title:i,isDisliked:d,closeToast:m,className:k,entityVariant:v}=e,_=(0,l.useMemo)(()=>(0,a.jsx)(s.Paper,{className:u().cover,radius:"s",children:(0,a.jsx)(c.BE,{className:u().image,src:t,alt:i,size:100,fit:"cover",withAvatarReplace:!0})}),[t,i]),p=(0,l.useMemo)(()=>d?v===c.j9.PODCAST_EPISODE?(0,a.jsx)(r.Z,{id:"notifications-info.podcast-episode-unavailable-in-recommendations"}):(0,a.jsx)(r.Z,{id:"notifications-info.track-unavailable-in-recommendations"}):v===c.j9.PODCAST_EPISODE?(0,a.jsx)(r.Z,{id:"notifications-info.podcast-episode-available-in-recommendations"}):(0,a.jsx)(r.Z,{id:"notifications-info.track-available-in-recommendations"}),[v,d]);return(0,a.jsx)(c.Yj,{className:(0,n.W)(u().root,k),closeToast:m,message:(0,a.jsxs)("div",{className:u().message,children:[_,(0,a.jsx)(o.Caption,{className:u().text,variant:"div",type:"controls",size:"m",children:p})]})})}},20766:function(e,t,i){"use strict";i.r(t),i.d(t,{NotificationLike:function(){return s}});var a=i(8759),n=i(33423),l=i(5674),r=i(44285);let s=(0,n.Pi)(e=>{let{track:t,closeToast:i}=e,n=(0,l.uK)(),s=n.get(l.U5),o=s.features.nonMusic&&t.isTrackPodcast,c=o?r.j9.PODCAST_EPISODE:r.j9.TRACK;return(0,a.jsx)(r.AP,{closeToast:i,entityVariant:c,entityTitle:t.title,collectionUrl:o?"/collection/shelf/liked":"/collection",coverUri:t.coverUri,isLiked:t.isLiked})})},95539:function(e,t,i){"use strict";i.d(t,{jt:function(){return h.ControlsBar},Jx:function(){return x},wT:function(){return T.PodcastMeta},RJ:function(){return s.TrackAlbum},G7:function(){return f.TrackCard},_3:function(){return r.TrackChart},hz:function(){return g.TrackContextMenu},ko:function(){return N.TrackMeta},le:function(){return k},O2:function(){return a.TrackPlaylist},VZ:function(){return n.TrackPlaylistAddition},N6:function(){return l.TrackPodcast},bc:function(){return _},S7:function(){return y},Er:function(){return j},E5:function(){return S},Vt:function(){return C},Z2:function(){return b},Wc:function(){return E.W},nD:function(){return L.useTrackDisclaimer}});var a=i(8425),n=i(60362),l=i(17734),r=i(63402),s=i(48765),o=i(96555),c=i(96169),d=i(81446),u=i(16121),m=i(43310);let k=m.yp.props({artists:o.V5.array(d.Go),albums:o.V5.array(c.KX),chart:o.V5.maybe(u.BH)}).views(e=>({get artistsNames(){var t;return null===(t=e.artists)||void 0===t?void 0:t.map(e=>e.name).join(", ")},get mainAlbum(){var i,a;return null!==(a=null===(i=e.albums)||void 0===i?void 0:i[0])&&void 0!==a?a:null},get index(){var n,l,r;return null!==(r=null===(l=e.albums[0])||void 0===l?void 0:null===(n=l.trackPosition)||void 0===n?void 0:n.index)&&void 0!==r?r:null}})).named("Track"),v=o.V5.model("Credit",{title:o.V5.string,value:o.V5.string}),_=o.V5.compose(k,m.v$).named("UgcTrack");var p=i(5674);let C=(e,t)=>{var i,a;let n=null===(i=e.artists)||void 0===i?void 0:i.map(d.d),l=null===(a=e.albums)||void 0===a?void 0:a.map(c.N);return(0,o.pj)({...(0,m.Ni)(e,t),artists:n,albums:l})},x=o.V5.model("CurrentTrackInfo",{id:o.V5.maybeNull(o.V5.union(o.V5.string,o.V5.number)),albumId:o.V5.maybeNull(o.V5.number),isUGC:o.V5.maybeNull(o.V5.boolean),trackLoadingState:o.V5.enumeration(Object.values(p.Gu)),fullTrack:o.V5.maybeNull(k),creditsLoadingState:o.V5.enumeration(Object.values(p.Gu)),credits:o.V5.maybeNull(o.V5.array(v))}).views(e=>({get isTrackIdle(){return e.trackLoadingState===p.Gu.IDLE},get isCreditsIdle(){return e.creditsLoadingState===p.Gu.IDLE},get isTrackLoading(){return e.trackLoadingState===p.Gu.PENDING||e.trackLoadingState===p.Gu.IDLE},get isTrackRejected(){return e.trackLoadingState===p.Gu.REJECT},get isCreditsLoading(){return e.creditsLoadingState===p.Gu.PENDING||e.creditsLoadingState===p.Gu.IDLE},get isCreditsRejected(){return e.creditsLoadingState===p.Gu.REJECT},get isRejected(){return e.creditsLoadingState===p.Gu.REJECT&&e.trackLoadingState===p.Gu.REJECT}})).actions(e=>{let t={setTrack(t){let{id:i,albumId:a,isUGC:n}=t;e.id=i,e.albumId=a,e.isUGC=n},getFullTrack:(0,o.ls)(function*(){let{tracksResource:t,modelActionsLogger:i}=(0,o.dU)(e);if(!e.id||e.trackLoadingState===p.Gu.PENDING)return null;try{e.trackLoadingState=p.Gu.PENDING;let i=yield t.getFullInfoTrack({trackId:e.id,albumId:e.albumId});if(!i)return null;e.fullTrack=(0,o.pj)(C(i.track)),e.trackLoadingState=p.Gu.RESOLVE}catch(t){i.error(t),e.trackLoadingState=p.Gu.REJECT}return null}),getTrackMeta:(0,o.ls)(function*(){let{tracksResource:t,modelActionsLogger:i}=(0,o.dU)(e);if(!e.id||e.trackLoadingState===p.Gu.PENDING)return null;try{e.trackLoadingState=p.Gu.PENDING;let i=yield t.getTracksMeta({trackIds:[e.id],removeDuplicates:!0});if(!i||!i.length)return null;i[0]&&(e.fullTrack=(0,o.pj)(C(i[0])),e.trackLoadingState=p.Gu.RESOLVE)}catch(t){i.error(t),e.trackLoadingState=p.Gu.REJECT}return null}),getCreditsInfo:(0,o.ls)(function*(){let{tracksResource:t,modelActionsLogger:i}=(0,o.dU)(e);if(!e.id||e.creditsLoadingState===p.Gu.PENDING)return null;try{e.creditsLoadingState=p.Gu.PENDING;let i=yield t.getCredits({trackId:e.id});e.credits=(0,o.pj)(null==i?void 0:i.credits),e.creditsLoadingState=p.Gu.RESOLVE}catch(t){i.error(t),e.creditsLoadingState=p.Gu.REJECT}return null}),reset(){e.id=null,e.albumId=null,e.isUGC=null,e.trackLoadingState=p.Gu.IDLE,e.creditsLoadingState=p.Gu.IDLE,e.fullTrack=null,e.credits=null}};return t}),y=(e,t)=>(0,o.pj)({...C(e),chart:t&&(0,u.W5)(t)});var f=i(84270);let b=e=>{var t,i;return(0,o.pj)({...C(e),artists:null!==(i=null==e?void 0:null===(t=e.artists)||void 0===t?void 0:t.map(d.d))&&void 0!==i?i:[]})};var h=i(59741),g=i(50429);let j=(e,t)=>{if(!t)return;let{h:i,s:a}=(0,p.sE)(t);return"hsl(".concat(i,", ").concat(a,"%, ").concat(e===p.Q2.Light?60:20,"%)")};var N=i(81360),T=i(19708),D=i(86502);let S=e=>({type:D.RX.Unloaded,meta:{id:e.albumId?"".concat(e.id,":").concat(e.albumId):e.id}});var E=i(54272),L=i(5658)},54272:function(e,t,i){"use strict";i.d(t,{W:function(){return o}});var a=i(8759),n=i(99616),l=i(3515),r=i(5674),s=i(44285);let o=()=>{let{notify:e}=(0,r.d$)(),{playlist:t,modals:{fullscreenPlayerModal:i}}=(0,r.oR)(),o=(0,r.uK)(),c=o.get(r.U5),d=(0,n.useCallback)(n=>{var o,d;let{withSuccessNotification:u,withPageRefresh:m,playlist:k,track:v}=n;if(u){let t=s.j9.TRACK;v.isTrackPodcast&&c.features.nonMusic&&(t=s.j9.PODCAST_EPISODE),e((0,a.jsx)(l.XD,{entityTitle:v.title,entityVariant:t,entityCoverUri:null!==(d=v.coverUri)&&void 0!==d?d:"",playlist:k}),{containerId:i.isOpened?r.W$.FULLSCREEN_INFO:r.W$.INFO})}m&&k.uuid===(null===(o=t.meta)||void 0===o?void 0:o.uuid)&&t.refresh()},[c.features.nonMusic,i.isOpened,e,t]),u=(0,n.useCallback)(t=>{let{withFailNotification:n}=t;n&&e((0,a.jsx)(l.wi,{}),{containerId:i.isOpened?r.W$.FULLSCREEN_ERROR:r.W$.ERROR})},[i.isOpened,e]);return(0,n.useCallback)(async e=>{var t;let{playlist:i,track:a,withSuccessNotification:n=!0,withFailNotification:r=!0,withPageRefresh:s=!0}=e,o=await i.changePlaylist((0,l.PG)({operation:l.aL.INSERT,position:0,tracks:[{id:a.id,albumId:null===(t=a.mainAlbum)||void 0===t?void 0:t.id}]}));return o===l.pX.OK?d({withSuccessNotification:n,withPageRefresh:s,playlist:i,track:a}):u({withFailNotification:r}),o},[d,u])}},5658:function(e,t,i){"use strict";i.r(t),i.d(t,{useTrackDisclaimer:function(){return r}});var a=i(99616),n=i(42503),l=i(5674);let r=e=>{let{track:t,callback:i}=e,{disclaimer:r,modals:{disclaimerModal:s}}=(0,l.oR)(),o=(0,a.useRef)(String((0,n.Z)())),c=(0,a.useRef)(!1),d=(0,l.uK)(),u=d.get(l.ce);return(0,a.useEffect)(()=>{r.isUnsafeDisclaimerConfirmed&&r.id===o.current&&!c.current&&(null==i||i(),c.current=!0)},[i,r.isUnsafeDisclaimerConfirmed,r.id]),(0,a.useCallback)(async e=>{if(t.isLegalRejected||t.isUnsafeLegal){let a=u.get(l.BU.ExEx);if(t.isUnsafeLegal&&(null==a?void 0:a.includes("".concat(l.co.TRACK,"_").concat(t.id)))){null==i||i();return}null==e||e.preventDefault(),await r.getTrackDisclaimer({trackId:t.id}),t.isUnsafeLegal&&r.setType(l.Gq.UNSAFE),r.setId(o.current),r.setEntityId(t.id),r.setEntityType(l.co.TRACK),c.current=!1,s.open();return}null==i||i()},[i,r,s,u,t.id,t.isLegalRejected,t.isUnsafeLegal])}},59741:function(e,t,i){"use strict";i.r(t),i.d(t,{ControlsBar:function(){return x}});var a=i(8759),n=i(35338),l=i(33423),r=i(99616),s=i(65244),o=i(15527),c=i(33066),d=i(14581),u=i(1918),m=i(43310),k=i(5674),v=i(44285),_=i(50429),p=i(59781),C=i.n(p);let x=(0,l.Pi)(e=>{let{className:t,track:i,withLightning:l}=e,{user:p}=(0,k.oR)(),{formatMessage:x}=(0,s.Z)(),{sendLikeSearchFeedback:y}=(0,k.sA)(),[f,b]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),j=(0,m.SB)(i),N=(0,m.KX)(i),T=(0,r.useMemo)(()=>{let e=Math.round((i.durationMs||0)/1e3);return(0,k.gf)(e)},[i.durationMs]),D=(0,r.useCallback)(()=>{f||i.isLiked||(b(!0),null==y||y()),j()},[j,f,y,i.isLiked]),S=(0,r.useCallback)(e=>{e.stopPropagation()},[]),E=(0,r.useMemo)(()=>{if(p.isAuthorized&&!i.isRemoved&&i.isAvailable)return(0,a.jsx)(_.TrackContextMenu,{track:i,open:h,onOpenChange:g,placement:"bottom",reference:(0,a.jsx)(o.z,{onClick:S,variant:"text",size:"xs",withRipple:!1,radius:"round",className:(0,n.W)(C().contextMenu,{[C().contextMenu_visible]:h}),"aria-label":x({id:"interface-actions.context-menu"}),icon:(0,a.jsx)(d.J,{variant:"more",size:"xxs"})})})},[x,S,h,i,p.isAuthorized]);return(0,a.jsxs)("div",{className:(0,n.W)(C().root,C().controls,t,{[C().controls_disliked]:i.isDisliked,[C().controls_disabled]:!i.isAvailable}),children:[(i.trackExplicitMark||l)&&(0,a.jsxs)("div",{className:C().icons,children:[l&&(0,a.jsx)(d.J,{size:"xxs",className:C().lightning,variant:"lightning"}),i.trackExplicitMark&&(0,a.jsx)(c.ExplicitMark,{variant:i.trackExplicitMark,className:C().explicitMark,iconSize:i.isTrackPodcast?"xs":"xxxs"})]}),p.isAuthorized&&!i.isRemoved&&i.isAvailable&&(0,a.jsx)(v.dJ,{size:"xs",iconSize:"xxs",className:(0,n.W)(C().item,C().likeIcon),isLiked:i.isLiked,onClick:D}),p.isAuthorized&&!i.isRemoved&&i.isAvailable&&(0,a.jsx)(v.Q1,{size:"xs",iconSize:"xxs",className:(0,n.W)(C().item,C().dislikeIcon),isDisliked:i.isDisliked,onClick:N}),(0,a.jsxs)("div",{className:(0,n.W)(C().item,C().contextMenuWrapper),children:["number"==typeof i.durationMs&&(0,a.jsx)(u.Caption,{variant:"span",className:(0,n.W)(C().duration,{[C().duration_hidden]:h}),type:"entity",size:"m",weight:"medium",children:T}),E]})]})})},19708:function(e,t,i){"use strict";i.r(t),i.d(t,{PodcastMeta:function(){return y}});var a=i(8759),n=i(35338),l=i(33423),r=i(99616),s=i(65244),o=i(2814),c=i(54064),d=i(33066),u=i(1918),m=i(7042),k=i(5674),v=i(44285),_=i(73473),p=i.n(_),C=i(70434),x=i.n(C);let y=(0,l.Pi)(e=>{let{track:t,className:i,withPodcastName:l=!1,withDate:_=!0,withSecondaryColor:C=!1,captionSize:y="m",explicitSize:f="xs",withExplicitMark:b,titleContainerClassName:h,textClassName:g}=e,{modals:{fullscreenPlayerModal:j}}=(0,k.oR)(),{formatMessage:N}=(0,s.Z)(),T=t.mainAlbum,D=T&&l,S=t.pubDate?new Date(t.pubDate):new Date,E=(0,k.u9)(S),L=!1,A=(0,k.s0)("/album/".concat(null==T?void 0:T.id)),I=(0,m.$H)({entityType:k.co.PODCAST,entityId:null==T?void 0:T.id,isLegalRejected:!!(null==T?void 0:T.isLegalRejected),isUnsafeLegal:!!(null==T?void 0:T.isUnsafeLegal),callback:A}),P=(0,r.useCallback)(()=>{switch(E){case k.Uv.TODAY:return(0,a.jsx)(o.Z,{id:"interface-actions.date-today"});case k.Uv.YESTERDAY:return(0,a.jsx)(o.Z,{id:"interface-actions.date-yesterday"});case k.Uv.DATE_WITH_YEAR:return(0,a.jsx)(c.Ji,{value:t.pubDate,month:"long",day:"numeric",year:"numeric"});default:return(0,a.jsx)(c.Ji,{value:t.pubDate,month:"long",day:"numeric"})}},[t.pubDate,E]);t.pubDate&&_&&(L=[k.Uv.TODAY,k.Uv.YESTERDAY].includes(E));let R=(0,r.useCallback)(e=>{j.isOpened&&j.close(),I(e)},[j,I]),M=(0,r.useMemo)(()=>t.isRemoved?(0,a.jsx)(o.Z,{id:"track-title.podcast-not-found"}):(0,a.jsx)(u.Caption,{className:p().title,type:"entity",size:y,variant:"div",children:t.title}),[t.isRemoved,t.title,y]);return(0,a.jsx)("div",{className:(0,n.W)(p().root,{[p().root_disabled]:!t.isAvailable,[p().root_disliked]:t.isDisliked,[p().root_withSecondaryColor]:C},i),children:(0,a.jsxs)("div",{className:p().metaContainer,children:[(0,a.jsxs)("div",{className:(0,n.W)(p().titleContainer,h),children:[(0,a.jsx)(u.Caption,{className:(0,n.W)(p().text,g),type:"entity",size:y,variant:"div",lineClamp:1,children:M}),t.trackExplicitMark&&b&&(0,a.jsx)(d.ExplicitMark,{variant:d.ExplicitMarkVariant.NUMERIC,className:(0,n.W)(p().explicitMark,x().explicitMark),iconSize:f})]}),(0,a.jsxs)(u.Caption,{type:"entity",size:y,variant:"div",lineClamp:1,className:(0,n.W)(p().text,x().podcastName,g),children:[D&&(0,a.jsx)(v.rU,{"aria-label":N({id:"entity-names.podcast-name"},{podcastName:T.title}),className:p().link,href:"/album/".concat(T.id),title:T.title,onClick:R,children:(0,a.jsx)(u.Caption,{variant:"span",type:"entity",size:y,className:p().albumTitle,children:T.title})}),t.pubDate&&_&&(0,a.jsx)(u.Caption,{variant:"span",type:"entity",size:y,className:(0,n.W)({[x().dateWithName]:D,[x().soonDate]:L,[x().dateDisabled]:!t.isAvailable,[x().dateDisliked]:t.isDisliked}),children:P()})]})]})})})},81360:function(e,t,i){"use strict";i.r(t),i.d(t,{TrackMeta:function(){return b}});var a=i(8759),n=i(35338),l=i(33423),r=i(99616),s=i(65244),o=i(2814),c=i(454),d=i(34603),u=i(33066),m=i(1918),k=i(81446),v=i(5674),_=i(44285),p=i(14616);let C=function(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null===(t=i[0])||void 0===t?void 0:null===(e=t.decomposed)||void 0===e?void 0:e.length)return i;let n=a.map(e=>e.id).sort(),l=i.map(e=>e.id).sort();return(0,p.Z)(n,l)?[]:i.filter(e=>!e.various)};var x=i(5658),y=i(73473),f=i.n(y);let b=(0,l.Pi)(e=>{let{className:t,titleContainerClassName:i,track:l,albumArtists:p,withExplicitMark:y,withSecondaryColor:b,captionSize:h="m",explicitSize:g,withAlbumLink:j,withAllArtistsTitle:N,textClassName:T}=e,{formatMessage:D}=(0,s.Z)(),{modals:{fullscreenPlayerModal:S}}=(0,v.oR)(),E=(0,v.s0)("/album/".concat(l.albumId)),L=(0,r.useMemo)(()=>{var e;let t=D({id:"entity-names.track-name"},{trackName:l.title});return"".concat(t," ").concat(null!==(e=l.version)&&void 0!==e?e:"")},[D,l.title,l.version]),A=(0,x.useTrackDisclaimer)({track:l,callback:E}),I=(0,r.useCallback)(e=>{S.isOpened&&S.close(),A(e)},[S,A]),P=(0,r.useMemo)(()=>l.isRemoved?(0,a.jsx)(m.Caption,{className:(0,n.W)(f().text,f().title),type:"entity",size:h,weight:"medium",variant:"div",children:(0,a.jsx)(o.Z,{id:"track-title.error-not-found"})}):l.albumId&&j&&l.trackSource===d.zu.OWN&&l.isAvailable?(0,a.jsx)(_.rU,{onClick:I,className:f().albumLink,href:"/album/".concat(l.albumId),"aria-label":L,...(0,c.BA)(c.bG.track.TRACK_TITLE),children:(0,a.jsx)(m.Caption,{className:(0,n.W)(f().text,f().title),type:"entity",size:h,weight:"medium",variant:"div",children:l.title})}):(0,a.jsx)(m.Caption,{className:(0,n.W)(f().text,f().title),type:"entity",size:h,weight:"medium",variant:"div",...(0,c.BA)(c.bG.track.TRACK_TITLE),children:l.title}),[h,I,l.albumId,l.isAvailable,l.isRemoved,l.title,l.trackSource,L,j]),R=(0,r.useMemo)(()=>C(l.artists,p),[l.artists,p,l.id]);return(0,a.jsx)("div",{className:(0,n.W)(f().root,{[f().root_disabled]:!l.isAvailable,[f().root_disliked]:l.isDisliked,[f().root_withSecondaryColor]:b},t),children:(0,a.jsxs)("div",{className:f().metaContainer,children:[(0,a.jsxs)("div",{className:(0,n.W)(f().titleContainer,{[f().titleContainer_withVersion]:l.version},i),children:[(0,a.jsxs)(m.Caption,{className:(0,n.W)(f().text,T),type:"entity",size:h,weight:"medium",variant:"div",lineClamp:1,children:[P,!l.isRemoved&&l.version&&(0,a.jsx)(m.Caption,{className:(0,n.W)(f().text,f().version),type:"entity",size:h,weight:"medium",variant:"div",children:" ".concat(l.version)})]}),l.trackExplicitMark&&y&&(0,a.jsx)(u.ExplicitMark,{iconSize:g,variant:l.trackExplicitMark,className:f().explicitMark})]}),R.length>0&&(0,a.jsx)(k.jO,{className:(0,n.W)(f().text,f().artists,T),linkClassName:(0,n.W)(f().text,f().link),captionClassName:(0,n.W)(f().text,f().artistCaption),artists:R,withLink:!l.isUGC,lineClamp:1,captionSize:h,withAllArtistsTitle:N})]})})})},50429:function(e,t,i){"use strict";i.r(t),i.d(t,{TrackContextMenu:function(){return S}});var a=i(8759),n=i(33423),l=i(99616),r=i(2814),s=i(34603),o=i(14581),c=i(52317),d=i(96169),u=i(43310),m=i(5674),k=i(44285),v=i(65244),_=i(3515);let p=()=>{let{playlist:e,trackIndex:t}=(0,l.useContext)(_.jK)||{},{notify:i}=(0,m.d$)(),{playlist:n}=(0,m.oR)(),{formatMessage:r}=(0,v.Z)(),s=(0,l.useCallback)(async()=>{let l=!1;if(e&&"number"==typeof t){let i=await e.changePlaylist((0,_.PG)({operation:_.aL.DELETE,startPosition:t,endPosition:t+1}));i===_.pX.OK&&(l=!0)}if(l){if(e&&"number"==typeof t){var s;e.uuid===(null===(s=n.meta)||void 0===s?void 0:s.uuid)&&n.removeTracksFromItems(t,1)}}else i((0,a.jsx)(k.Q,{error:r({id:"playlist-errors.failed-to-remove-track"})}),{containerId:m.W$.ERROR})},[e,t,n,i,r]);return{canRemoveTrackFromPlaylist:!!(null==e?void 0:e.canUserChange),removeTrackFromPlaylist:s}};var C=i(35338),x=i(12670),y=i(11769),f=i(54272);let b=e=>{let{createPlaylist:t,modals:{fullscreenPlayerModal:i}}=(0,m.oR)(),{notify:n}=(0,m.d$)(),r=(0,y.useRouter)(),{formatMessage:o}=(0,v.Z)(),c=(0,f.W)(),d=(0,l.useCallback)(async e=>{var i;if(await t.create({title:o({id:"entity-names.new-playlist"}),visibility:s.we.PUBLIC}),!(null==t?void 0:null===(i=t.meta)||void 0===i?void 0:i.uuid))return null;let a=await c({playlist:t.meta,track:e,withPageRefresh:!1,withFailNotification:!1,withSuccessNotification:!1});if(a===_.pX.OK){let e=(0,m.SZ)("/playlist/".concat(t.meta.uuid));return t.reset(),e}return null},[c,t,o]);return(0,l.useCallback)(async()=>{let t=await d(e);t?(i.isOpened&&i.close(),r.push(t)):n((0,a.jsx)(_.wi,{}),{containerId:i.isOpened?m.W$.FULLSCREEN_ERROR:m.W$.ERROR})},[d,i,n,r,e])};var h=i(1918);let g=e=>{let{playlist:t,track:i}=e,n=(0,f.W)(),r=(0,l.useCallback)(()=>{n({playlist:t,track:i})},[n,t,i]);return(0,a.jsx)(c.sN,{onClick:r,children:(0,a.jsx)(h.Caption,{variant:"div",lineClamp:1,children:t.title})})};var j=i(77124),N=i.n(j);let T=()=>(0,a.jsx)(c.sN,{children:(0,a.jsx)(x.Shimmer,{className:N().shimmer})}),D=(0,n.Pi)(e=>{var t;let{track:i}=e,{user:n,contextMenuPlaylists:s,modals:{fullscreenPlayerModal:d}}=(0,m.oR)(),v=(0,u.SB)(i),{notify:_}=(0,m.d$)(),p=b(i),x=(0,l.useCallback)(()=>{if(!i.isLiked){v();return}_((0,a.jsx)(u.Yc,{track:i}),{containerId:d.isOpened?m.W$.FULLSCREEN_INFO:m.W$.INFO})},[d.isOpened,v,_,i]),y=(0,l.useCallback)(e=>{n.account.uid&&s.getData({userId:n.account.uid,page:e,pageSize:20})},[s,n.account.uid]),f=(0,l.useCallback)(async()=>{n.account.uid&&await s.getData({userId:n.account.uid,page:0,pageSize:20})},[s,n.account.uid]);(0,l.useEffect)(()=>()=>{s.reset()},[s]);let h=e=>{var t;let n=null==s?void 0:null===(t=s.items)||void 0===t?void 0:t[e];return n?(0,a.jsx)(g,{track:i,playlist:n},n.uuid):(0,a.jsx)(T,{})},j=(0,l.useMemo)(()=>{var e,t,i;return s.isLoaded?(0,a.jsx)(k.Wv,{className:(0,C.W)(N().virtualScroll,N().important),listClassName:N().content,customComponents:{Header:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.sN,{onClick:p,icon:(0,a.jsx)(o.J,{variant:"add"}),children:(0,a.jsx)(r.Z,{id:"playlist-actions.create-playlist"})}),(0,a.jsx)(c.sN,{onClick:x,children:(0,a.jsx)(r.Z,{id:"entity-names.liked-playlist"})})]})},itemContentCallback:h,totalCount:null!==(t=null==s?void 0:null===(e=s.pager)||void 0===e?void 0:e.total)&&void 0!==t?t:0,onGetDataByPage:y,pageSize:20,withFooter:!1,totalRequests:null!==(i=s.requests)&&void 0!==i?i:0,alwaysShowScrollbar:!0}):[...Array(7)].map((e,t)=>(0,a.jsx)(T,{},t))},[s.loadingState,null==s?void 0:null===(t=s.pager)||void 0===t?void 0:t.total,s.requests,y,v,p]);return(0,a.jsx)(c.v2,{offsetOptions:3,onShow:f,reference:(0,a.jsx)(c.sN,{isSubMenu:!0,icon:(0,a.jsx)(o.J,{variant:"addToPlaylist"}),children:(0,a.jsx)(r.Z,{id:"playlist-actions.add-track-to-playlist"})}),children:(0,a.jsx)("div",{className:N().root,children:j})})}),S=(0,n.Pi)(e=>{var t,i,n,v;let{track:_,reference:C,onOpenChange:x,open:y,placement:f,returnFocus:b}=e,{settings:h,currentTrackInfo:g,experiments:j,modals:{trackModal:N}}=(0,m.oR)(),T=(0,u.SB)(_),S=(0,u.KX)(_),E=(0,d.SB)(_.mainAlbum),L="".concat(m.aU.TRACK,"-").concat(_.id),A=h.layout===m.t8.Mobile,{href:I}=(0,m.qK)(_.url),{canRemoveTrackFromPlaylist:P,removeTrackFromPlaylist:R}=p(),{isPlaying:M,togglePlay:B}=(0,m.Qh)({seeds:null!==(v=null==_?void 0:_.seeds)&&void 0!==v?v:[],pageIdForFrom:m.Rh.RADIO,blockIdForFrom:L}),V=(0,l.useCallback)(()=>{M||B()},[M,B]),U=(0,l.useCallback)(()=>{var e;g.setTrack({id:_.id,albumId:(null===(e=_.mainAlbum)||void 0===e?void 0:e.id)||null,isUGC:_.isUGC||null}),N.open()},[g,_.id,_.isUGC,null===(t=_.mainAlbum)||void 0===t?void 0:t.id,N]);(0,m.ZP)(y);let G=null===(i=_.mainAlbum)||void 0===i?void 0:i.isPodcast,O=!_.isUGC&&!G,w=j.checkExperiment(m.pe.WebNextTrackAboutModal,"on")&&!A;return(0,a.jsxs)(c.v2,{reference:C,isMobile:A,title:_.title,description:_.artistsNames,placement:f,offsetOptions:10,open:y,onOpenChange:x,returnFocus:b,children:[!G&&(0,a.jsx)(k.xZ,{onClick:T,isLiked:_.isLiked}),O&&(0,a.jsx)(k.GQ,{onClick:V,variant:"track",disabled:!_.isAvailable}),!G&&(0,a.jsx)(k.ZL,{onClick:S,isDisliked:_.isDisliked}),!A&&(0,a.jsx)(D,{track:_}),(0,a.jsx)(k.zq,{disabled:_.isUGC||_.trackSource===s.zu.OWN_REPLACED_TO_UGC,shareLink:I,entityVariant:"track",entityTitle:_.title}),G&&E&&(0,a.jsx)(k.qq,{onClick:E,isLiked:null===(n=_.mainAlbum)||void 0===n?void 0:n.isLiked}),P&&(0,a.jsx)(c.sN,{onClick:R,icon:(0,a.jsx)(o.J,{variant:"bucket"}),children:(0,a.jsx)(r.Z,{id:"playlist-actions.remove-from-playlist"})}),w&&(0,a.jsx)(c.sN,{onClick:U,icon:(0,a.jsx)(o.J,{variant:"info"}),children:(0,a.jsx)(r.Z,{id:"track-modal.title"})})]})})},84563:function(e,t,i){"use strict";i.d(t,{f:function(){return v}});var a=i(8759),n=i(35338),l=i(33423),r=i(99616),s=i(65244),o=i(96213),c=i(5674),d=i(44285),u=i(5658),m=i(56805),k=i.n(m);let v=(0,l.Pi)(e=>{let{className:t,track:i,meta:l,chart:m,controls:v,playButtonCellRender:_,playContextParams:p,withLightning:C,...x}=e,{formatMessage:y}=(0,s.Z)(),{ref:f,intersectionPropertyId:b}=(0,c.Vf)(),{sonataState:{status:h}}=(0,c.oR)(),{isPlaying:g,isCurrent:j,togglePlay:N,restartPlay:T}=(0,c.qm)({playContextParams:p,entityId:i.albumId?"".concat(i.id,":").concat(i.albumId):i.id,sonataStatus:h}),D=(0,u.useTrackDisclaimer)({track:i,callback:N}),{sendPlaySearchFeedback:S}=(0,c.sA)(),[E,L]=(0,r.useState)(!1),A=(0,r.useCallback)(()=>{E||g||(L(!0),null==S||S()),D()},[D,g,E,S]),I=(0,r.useCallback)(()=>{g?T():A()},[g,T,A]),P=(0,r.useCallback)(e=>{2===e.detail?I():(0,o.m)(e,k().ripple)},[I]),R=null==_?void 0:_({onPlayButtonClick:A,isPlaying:g,isCurrent:j}),M=(0,r.useMemo)(()=>{var e;if(!i.isAvailable)return"".concat(y({id:"extra-explicit.play-unavailable"})," ").concat(i.artistsNames," ").concat(i.title);let t=C?y({id:"entity-names.popular-among-users"}):"";return"".concat(i.artistsNames," ").concat(i.title," ").concat(null!==(e=i.version)&&void 0!==e?e:""," ").concat(t)},[y,i.artistsNames,i.isAvailable,i.title,i.version,C]);return(0,a.jsxs)(d.Md,{ref:f,"aria-label":M,"data-intersection-property-id":b,onClick:P,className:(0,n.W)(k().root,{[k().root_disabled]:!i.isAvailable},t),...x,children:[m,R,l,v]})})},84270:function(e,t,i){"use strict";i.r(t),i.d(t,{TrackCard:function(){return N}});var a=i(8759),n=i(35338),l=i(33423),r=i(99616),s=i(65244),o=i(2814),c=i(454),d=i(57413),u=i(34603),m=i(15527),k=i(14077),v=i(14581),_=i(96437),p=i(1918),C=i(81446),x=i(43310),y=i(5674),f=i(44285),b=i(5658),h=i(50429),g=i(27462),j=i.n(g);let N=(0,l.Pi)(e=>{let{className:t,children:i,track:l,contentLinesCount:g,overrideContextType:N}=e,T=(0,y.x5)(),{formatMessage:D}=(0,s.Z)(),[S,E]=(0,r.useState)(!1),[L,A]=(0,r.useState)(!1),[I,P]=(0,r.useState)(!1),{sendLikeSearchFeedback:R,sendPlaySearchFeedback:M}=(0,y.sA)(),B=(0,x.SB)(l),{sonataState:{status:V}}=(0,y.oR)(),[U,G]=(0,r.useState)(!1),O=(0,r.useMemo)(()=>{var e;let t=D({id:"entity-names.track-name"},{trackName:l.title}),i=l.isLiked?D({id:"entity-names.has-your-like"}):"";return"".concat(t," ").concat(null!==(e=l.version)&&void 0!==e?e:""," ").concat(i)},[D,l.title,l.isLiked,l.version]),w=l.albumId?"".concat(l.id,":").concat(l.albumId):l.id,W=l.albumId&&l.trackSource===u.zu.OWN&&l.isAvailable,{isPlaying:z,togglePlay:F}=(0,y.qm)({playContextParams:{contextData:{type:d.Ak.Various,meta:{id:w},from:T,overrideContextType:N},queueParams:{index:0},loadContextMeta:!0},entityId:w,sonataStatus:V}),Z=(0,b.useTrackDisclaimer)({track:l}),K=(0,b.useTrackDisclaimer)({track:l,callback:F}),H=(0,r.useCallback)(e=>{Z(e)},[Z]),J=(0,r.useCallback)(()=>{S||z||(E(!0),null==M||M()),K()},[z,S,M,K]),Y=(0,r.useCallback)(()=>{L||l.isLiked||(A(!0),null==R||R()),B()},[B,L,R,l.isLiked]),$=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),q=(0,r.useCallback)(()=>{P(!I),G(!I)},[I]),X=(0,r.useMemo)(()=>{var e;return(0,a.jsxs)(p.Caption,{className:(0,n.W)(j().titleContainer,{[j().titleContainer_withVersion]:l.version}),variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,children:[W?(0,a.jsx)(f.rU,{"aria-label":"".concat(l.title," ").concat(null!==(e=l.version)&&void 0!==e?e:""),className:j().titleLink,href:"/album/".concat(l.albumId),onClick:H,children:l.title}):(0,a.jsx)(p.Caption,{className:j().title,variant:"span",onClick:H,children:l.title}),l.version&&(0,a.jsx)(p.Caption,{className:j().version,variant:"span",children:" ".concat(l.version)})]})},[l.title,l.version,W,H,l.albumId]),Q=(0,r.useMemo)(()=>{var e;return W?(0,a.jsx)(f.rU,{href:"/album/".concat(l.albumId),onClick:H,children:"".concat(l.title," ").concat(null!==(e=l.version)&&void 0!==e?e:"")}):null},[l.title,l.version,l.albumId,W,H]),ee=(0,r.useMemo)(()=>(0,a.jsx)(h.TrackContextMenu,{placement:"bottom",track:l,onOpenChange:q,open:I,returnFocus:!1,reference:(0,a.jsx)(m.z,{onClick:$,className:(0,n.W)(j().menuButton,j().control),"aria-label":D({id:"interface-actions.context-menu"}),icon:(0,a.jsx)(v.J,{size:"xxs",variant:"more"}),size:"s",radius:"round",...(0,c.BA)(c.bG.track.TRACK_CONTEXT_MENU_BUTTON)})}),[D,$,q,I,l]),et=(0,r.useMemo)(()=>{if(l.isAvailable)return(0,a.jsx)(k.kk,{isVisible:I||U,className:j().controls,labelText:(0,a.jsx)(o.Z,{id:"entity-names.track"}),playControl:(0,a.jsx)(f.JM,{className:(0,n.W)(j().playButton,j().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",isPlaying:z,onClick:J}),likeControl:(0,a.jsx)(f.dJ,{className:(0,n.W)(j().likeButton,j().control),isLiked:l.isLiked,onClick:Y,variant:"default",size:"s",iconSize:"xxs"}),menuControl:ee})},[ee,Y,J,I,U,z,l.isAvailable,l.isLiked]),ei=(0,r.useMemo)(()=>(0,a.jsx)(_.Paper,{className:j().cover,radius:"l",withShadow:!0,onClick:H,children:(0,a.jsxs)("div",{className:j().coverBlock,children:[(0,a.jsx)(f.BE,{className:j().image,src:l.coverUri,size:200,fit:"cover",alt:O,withAvatarReplace:!0,isAvailable:l.isAvailable,"aria-hidden":!0}),et]})}),[et,H,l.coverUri,l.isAvailable,O]);return(0,a.jsx)(k.m7,{className:(0,n.W)(j().root,t),"aria-label":O,explicitMark:l.trackExplicitMark,title:X,srTitle:Q,contentLinesCount:g,view:ei,description:(0,a.jsx)(C.jO,{className:j().artists,artists:l.artists,lineClamp:1,linkClassName:j().artistLink,captionSize:"s",withLink:!l.isUGC}),children:i})})},48765:function(e,t,i){"use strict";i.r(t),i.d(t,{TrackAlbum:function(){return x}});var a=i(8759),n=i(33423),l=i(99616),r=i(454),s=i(59741),o=i(81360),c=i(35338),d=i(1918),u=i(44285),m=i(38993),k=i.n(m);let v=(0,n.Pi)(e=>{let{className:t,track:i,position:n,onPlayButtonClick:l,isPlaying:r,isCurrent:s}=e;return(0,a.jsxs)("div",{className:(0,c.W)(t,k().root,{[k().root_disabled]:!i.isAvailable,[k().root_playing]:r,[k().root_disliked]:i.isDisliked,[k().root_current]:s}),children:[i.isAvailable&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Up,{className:k().playingAnimation}),(0,a.jsx)(u.JM,{variant:"filled",className:k().playButton,iconClassName:k().playButtonIcon,isPlaying:r,onClick:l,iconSize:"xs"})]}),n&&(0,a.jsx)(d.Caption,{variant:"div",className:k().position,weight:"normal",type:"entity",size:"m",children:n})]})});var _=i(84563),p=i(31040),C=i.n(p);let x=(0,n.Pi)(e=>{let{track:t,albumArtists:i,position:n,playContextParams:c,withLightning:d}=e,u=(0,l.useCallback)(e=>(0,a.jsx)(v,{track:t,position:n,className:C().playButtonCell,...e}),[t,n]);return(0,a.jsx)(_.f,{track:t,withLightning:d,meta:(0,a.jsx)(o.TrackMeta,{albumArtists:i,track:t}),playButtonCellRender:u,controls:(0,a.jsx)(s.ControlsBar,{withLightning:d,track:t,className:C().controlsBarCell}),playContextParams:c,...(0,r.BA)(r.bG.track.TRACK_ALBUM)})})},63402:function(e,t,i){"use strict";i.r(t),i.d(t,{TrackChart:function(){return v}});var a=i(8759),n=i(33423),l=i(99616),r=i(454),s=i(16121),o=i(44285),c=i(59741),d=i(81360),u=i(84563),m=i(72734),k=i.n(m);let v=(0,n.Pi)(e=>{var t,i;let{track:n,playContextParams:m}=e,v=(0,l.useCallback)(e=>(0,a.jsx)(o.Df,{isAvailable:n.isAvailable,isDisliked:n.isDisliked,coverUri:n.coverUri,title:n.title,className:k().playButtonCell,...e}),[n]);return(0,a.jsx)(u.f,{track:n,meta:(0,a.jsx)(d.TrackMeta,{track:n}),chart:(0,a.jsx)(s.kL,{className:k().chartCell,progress:null===(t=n.chart)||void 0===t?void 0:t.progress,position:null===(i=n.chart)||void 0===i?void 0:i.position,isDisliked:n.isDisliked,isDisabled:!n.isAvailable}),playButtonCellRender:v,controls:(0,a.jsx)(c.ControlsBar,{track:n,className:k().controlsBarCell}),playContextParams:m,...(0,r.BA)(r.bG.track.TRACK_CHART)})})},8425:function(e,t,i){"use strict";i.r(t),i.d(t,{TrackPlaylist:function(){return k}});var a=i(8759),n=i(33423),l=i(99616),r=i(454),s=i(44285),o=i(59741),c=i(81360),d=i(84563),u=i(7525),m=i.n(u);let k=(0,n.Pi)(e=>{let{track:t,playContextParams:i,hasDuplicatesBefore:n,shouldCheckSelfIndex:u=!0,className:k=""}=e,v=(0,l.useCallback)(e=>(0,a.jsx)(s.Df,{isAvailable:t.isAvailable,isDisliked:t.isDisliked,coverUri:t.coverUri,title:t.title,className:m().playButtonCell,...e}),[t]);return(0,a.jsx)(d.f,{className:k,track:t,meta:(0,a.jsx)(c.TrackMeta,{track:t}),playButtonCellRender:v,hasDuplicatesBefore:n,controls:(0,a.jsx)(o.ControlsBar,{track:t,className:m().controlsBarCell}),playContextParams:i,shouldCheckSelfIndex:u,...(0,r.BA)(r.bG.track.TRACK_PLAYLIST)})})},60362:function(e,t,i){"use strict";i.r(t),i.d(t,{TrackPlaylistAddition:function(){return _}});var a=i(8759),n=i(33423),l=i(99616),r=i(65244),s=i(454),o=i(15527),c=i(14581),d=i(44285),u=i(81360),m=i(84563),k=i(96580),v=i.n(k);let _=(0,n.Pi)(e=>{let{className:t,track:i,playContextParams:n,hasDuplicatesBefore:k,shouldCheckSelfIndex:_=!0,onClick:p}=e,{formatMessage:C}=(0,r.Z)(),x=(0,l.useCallback)(e=>(0,a.jsx)(d.Df,{isAvailable:i.isAvailable,isDisliked:i.isDisliked,coverUri:i.coverUri,title:i.title,className:v().playButtonCell,...e}),[i]),y=(0,l.useCallback)(()=>{null==p||p(i)},[i,p]),f=(0,l.useMemo)(()=>(0,a.jsx)("div",{className:v().controls,children:(0,a.jsx)(o.z,{className:v().button,variant:"text",size:"xs",radius:"xxxl","aria-label":C({id:"interface-actions.add-track-to-playlist"}),onClick:y,icon:(0,a.jsx)(c.J,{size:"xxs",variant:"add"})})}),[C,y]);return(0,a.jsx)(m.f,{className:t,track:i,meta:(0,a.jsx)(u.TrackMeta,{track:i}),playButtonCellRender:x,hasDuplicatesBefore:k,controls:f,playContextParams:n,shouldCheckSelfIndex:_,...(0,s.BA)(s.bG.track.TRACK_PLAYLIST_ADDITION)})})},17734:function(e,t,i){"use strict";i.r(t),i.d(t,{TrackPodcast:function(){return k}});var a=i(8759),n=i(33423),l=i(99616),r=i(454),s=i(44285),o=i(59741),c=i(19708),d=i(84563),u=i(39206),m=i.n(u);let k=(0,n.Pi)(e=>{let{track:t,playContextParams:i,hasDuplicatesBefore:n,shouldCheckSelfIndex:u=!0,withPodcastName:k=!1}=e,v=(0,l.useCallback)(e=>(0,a.jsx)(s.Df,{isAvailable:t.isAvailable,isDisliked:t.isDisliked,coverUri:t.coverUri,title:t.title,className:m().playButtonCell,...e}),[t]);return(0,a.jsx)(d.f,{track:t,meta:(0,a.jsx)(c.PodcastMeta,{track:t,withPodcastName:k}),playButtonCellRender:v,hasDuplicatesBefore:n,controls:(0,a.jsx)(o.ControlsBar,{track:t,className:m().controlsBarCell}),playContextParams:i,shouldCheckSelfIndex:u,...(0,r.BA)(r.bG.track.TRACK_PODCAST)})})},77263:function(e){e.exports={root:"Disclaimer_root___gYw4",container:"Disclaimer_container__Tnsjy",title:"Disclaimer_title__9wHWb",text:"Disclaimer_text__bg6L1",link:"Disclaimer_link__iGciq",buttons:"Disclaimer_buttons__5idgM",button:"Disclaimer_button__OmGNo",shimmer:"Disclaimer_shimmer__vg_D2"}},13327:function(e){e.exports={root:"DisclaimerModal_root__sidbk",content:"DisclaimerModal_content___tRvp"}},85204:function(e){e.exports={message:"NotificationDislike_message__R2jfZ",text:"NotificationDislike_text__xmrnn",cover:"NotificationDislike_cover__bvqFM",image:"NotificationDislike_image__h0_EO"}},59781:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"ControlsBar_root__5HK2B",item:"ControlsBar_item__I_p99",contextMenu:"ControlsBar_contextMenu__8AFkQ",contextMenu_visible:"ControlsBar_contextMenu_visible__PYW8h",contextMenuWrapper:"ControlsBar_contextMenuWrapper__NHkn_",explicitMark:"ControlsBar_explicitMark__w9l80",lightning:"ControlsBar_lightning__GBl7O",icons:"ControlsBar_icons__yXi8q",duration:"ControlsBar_duration__RawSk",duration_hidden:"ControlsBar_duration_hidden__szTkk",controls:"ControlsBar_controls__3nXlz",dislikeIcon:"ControlsBar_dislikeIcon__ENXh_",controls_disabled:"ControlsBar_controls_disabled__5KRgJ",controls_disliked:"ControlsBar_controls_disliked__BT2of",likeIcon:"ControlsBar_likeIcon__mrNiz",popover:"ControlsBar_popover__WrYMt"}},73473:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",artistCaption:"Meta_artistCaption__JESZi",link:"Meta_link__IFDBA",albumTitle:"Meta_albumTitle__mHeOs",root:"Meta_root__R8n1h",root_withSecondaryColor:"Meta_root_withSecondaryColor___uENY",root_disabled:"Meta_root_disabled__Dpx_M",albumLink:"Meta_albumLink__gASh6",artists:"Meta_artists__VnR52",explicitMark:"Meta_explicitMark__ocnCV",title:"Meta_title__GGBnH",titleContainer:"Meta_titleContainer__gDuXr",version:"Meta_version__c2sHU",root_disliked:"Meta_root_disliked__DrZ7_",text:"Meta_text__Y5uYH",metaContainer:"Meta_metaContainer__7i2dp",titleContainer_withVersion:"Meta_titleContainer_withVersion__n7MdY"}},70434:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",explicitMark:"PodcastMeta_explicitMark__IstkP",dateWithName:"PodcastMeta_dateWithName__cKy0o",podcastName:"PodcastMeta_podcastName__iQeNK",soonDate:"PodcastMeta_soonDate__zGuG9",dateDisabled:"PodcastMeta_dateDisabled__DxjtJ",dateDisliked:"PodcastMeta_dateDisliked__95MlL"}},38993:function(e){e.exports={card_root:"HorizontalCardContainer_root__YoAAP",root:"PlayButtonWithPosition_root__H5FYg",playButton:"PlayButtonWithPosition_playButton__7cfDQ",playButtonIcon:"PlayButtonWithPosition_playButtonIcon___cLAL",playingAnimation:"PlayButtonWithPosition_playingAnimation__Hy5rC",position:"PlayButtonWithPosition_position__wk3OT",root_current:"PlayButtonWithPosition_root_current__FCDLJ",root_playing:"PlayButtonWithPosition_root_playing__RpnYU",root_disliked:"PlayButtonWithPosition_root_disliked__NIZzA",root_disabled:"PlayButtonWithPosition_root_disabled__PMV24"}},77124:function(e){e.exports={root:"ContextSubMenuAddToPlaylist_root__ZGm6z",content:"ContextSubMenuAddToPlaylist_content__isTx4",virtualScroll:"ContextSubMenuAddToPlaylist_virtualScroll__SJG3e",important:"ContextSubMenuAddToPlaylist_important__OUL53",shimmer:"ContextSubMenuAddToPlaylist_shimmer__uQHAL"}},56805:function(e){e.exports={root:"Track_root__dbDjD",root_disabled:"Track_root_disabled__53T42",ripple:"Track_ripple__f8iBh"}},27462:function(e){e.exports={root:"TrackCard_root__kIpe1",controls:"TrackCard_controls__E7Y3L",cover:"TrackCard_cover__tkVPB",coverBlock:"TrackCard_coverBlock__WdvvQ",image:"TrackCard_image__KsOFF",artists:"TrackCard_artists__wH48n",artistLink:"TrackCard_artistLink__aqLl7",titleContainer:"TrackCard_titleContainer__YCcZk",titleContainer_withVersion:"TrackCard_titleContainer_withVersion__fTRGu",title:"TrackCard_title__BVLuv",titleLink:"TrackCard_titleLink__NtPhm",version:"TrackCard_version__7iPuj",playButton:"TrackCard_playButton__ukJDd",likeButton:"TrackCard_likeButton__Hejrk",menuButton:"TrackCard_menuButton__XtYLf",control:"TrackCard_control___huPc"}},31040:function(e){e.exports={playButtonCell:"TrackAlbum_playButtonCell__pLJte",controlsBarCell:"TrackAlbum_controlsBarCell__XUUCc"}},72734:function(e){e.exports={playButtonCell:"TrackChart_playButtonCell__cvY7u",controlsBarCell:"TrackChart_controlsBarCell__Xd5pn",chartCell:"TrackChart_chartCell__33_al"}},7525:function(e){e.exports={playButtonCell:"TrackPlaylist_playButtonCell__Q6YT_",controlsBarCell:"TrackPlaylist_controlsBarCell__6clda"}},96580:function(e){e.exports={playButtonCell:"TrackPlaylistAddition_playButtonCell__Ocnhq",controls:"TrackPlaylistAddition_controls__S346Y",button:"TrackPlaylistAddition_button__fsY9k"}},39206:function(e){e.exports={playButtonCell:"TrackPodcast_playButtonCell___b_gp",controlsBarCell:"TrackPodcast_controlsBarCell__dwTYj"}},96213:function(e,t,i){"use strict";i.d(t,{m:function(){return n}});var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.createRipple=void 0,a.createRipple=function(e,t,i){let a=i??e.currentTarget,n=document.createElement("span"),l=Math.max(a.clientWidth,a.clientHeight),r=l/2,s=a.getBoundingClientRect(),o=0===e.clientX?Math.round(s.width/2):e.clientX-s.left,c=0===e.clientY?Math.round(s.height/2):e.clientY-s.top;n.style.width=`${l}px`,n.style.height=`${l}px`,n.style.left=0===e.clientX?"0px":`${o-r}px`,n.style.top=`${c-r}px`,n.classList.add(t);let d=a.getElementsByClassName(t)[0];d&&d.remove(),a.insertBefore(n,a.firstChild)},a.__esModule;var n=a.createRipple}}]);