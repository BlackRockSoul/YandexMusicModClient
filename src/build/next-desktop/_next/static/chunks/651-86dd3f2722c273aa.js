"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[651],{30651:function(e,t,a){a.d(t,{rT:function(){return r.GenreAlbumsPage},eq:function(){return s.GenreArtistsPage},a0:function(){return l.GenrePage},Kx:function(){return y},Fe:function(){return n.GenrePlaylistsPage}});var l=a(72376),r=a(72683),s=a(58936),n=a(85694);a(75244);var u=a(96555),i=a(96431),o=a(96911),g=a(20210),d=a(81446),m=a(84133),S=a(21774),N=a(58362);let E=u.V5.model("GenreAlbumsPage",{loadingState:u.V5.enumeration(Object.values(m.Gu)),pager:u.V5.maybeNull(N.Vn),alreadyRequestedPages:u.V5.map(u.V5.number),pendingPages:u.V5.map(u.V5.number),requests:u.V5.maybeNull(u.V5.number),errorStatusCode:u.V5.maybeNull(u.V5.number),fullTitle:u.V5.maybeNull(u.V5.string),items:u.V5.array(u.V5.maybeNull(o.ug))}).views(e=>({get isNotFound(){var t;let a=e.loadingState===m.Gu.RESOLVE&&(null===(t=e.pager)||void 0===t?void 0:t.total)===0,l=e.errorStatusCode===i.CN.NOT_FOUND||e.errorStatusCode===i.CN.BAD_REQUEST;return e.loadingState===m.Gu.REJECT&&l||a},get isSomethingWrong(){return e.loadingState===m.Gu.REJECT&&!this.isNotFound}})).actions(e=>{let t={getData:(0,u.ls)(function*(t){let{metatagId:a,page:l=0,pageSize:r=20}=t,{metatagsResource:s,logger:n}=(0,u.dU)(e);if(!(e.loadingState===m.Gu.PENDING&&e.pendingPages.has("".concat(l))||e.alreadyRequestedPages.has("".concat(l)))){"number"==typeof l&&e.alreadyRequestedPages.set("".concat(l),l);try{var o;e.loadingState=m.Gu.PENDING,e.pendingPages.set("".concat(l),l);let t=yield s.getMetatagAlbums({id:a,offset:l,limit:r});e.fullTitle=t.title.fullTitle;let n={page:l,perPage:r,total:t.pager.total};0===e.items.length&&(e.items=(0,u.pj)(Array.from({length:n.total},()=>null)));let i=t.albums.map(S.N);(0,m.AG)({items:e.items,mappedRawItems:i,page:l,pageSize:r}),e.pager=n,e.requests=(null!==(o=e.requests)&&void 0!==o?o:0)+1,e.loadingState!==m.Gu.IDLE&&(e.loadingState=m.Gu.RESOLVE)}catch(t){("string"==typeof t||t instanceof Error)&&n.error(t),t instanceof i.du&&(t.statusCode===i.CN.NOT_FOUND||t.statusCode===i.CN.BAD_REQUEST)&&(e.errorStatusCode=i.CN.NOT_FOUND),e.loadingState!==m.Gu.IDLE&&(e.loadingState=m.Gu.REJECT)}finally{e.pendingPages.delete("".concat(l))}}}),reset(){e.loadingState=m.Gu.IDLE,e.pendingPages.clear(),e.pager=null,e.alreadyRequestedPages.clear(),e.errorStatusCode=null,e.items=(0,u.pj)([])}};return t}),p=u.V5.model("GenreArtistsPage",{loadingState:u.V5.enumeration(Object.values(m.Gu)),pager:u.V5.maybeNull(N.Vn),alreadyRequestedPages:u.V5.map(u.V5.number),pendingPages:u.V5.map(u.V5.number),requests:u.V5.maybeNull(u.V5.number),errorStatusCode:u.V5.maybeNull(u.V5.number),fullTitle:u.V5.maybeNull(u.V5.string),items:u.V5.array(u.V5.maybeNull(d.Go))}).views(e=>({get isNotFound(){var t;let a=e.loadingState===m.Gu.RESOLVE&&(null===(t=e.pager)||void 0===t?void 0:t.total)===0,l=e.errorStatusCode===i.CN.NOT_FOUND||e.errorStatusCode===i.CN.BAD_REQUEST;return e.loadingState===m.Gu.REJECT&&l||a},get isSomethingWrong(){return e.loadingState===m.Gu.REJECT&&!this.isNotFound}})).actions(e=>{let t={getData:(0,u.ls)(function*(t){let{metatagId:a,page:l=0,pageSize:r=20}=t,{metatagsResource:s,logger:n}=(0,u.dU)(e);if(!(e.loadingState===m.Gu.PENDING&&e.pendingPages.has("".concat(l))||e.alreadyRequestedPages.has("".concat(l)))){"number"==typeof l&&e.alreadyRequestedPages.set("".concat(l),l);try{var o;e.loadingState=m.Gu.PENDING,e.pendingPages.set("".concat(l),l);let t=yield s.getMetatagArtists({id:a,offset:l,limit:r,period:"week"});e.fullTitle=t.title.fullTitle;let n={page:l,perPage:r,total:t.pager.total};0===e.items.length&&(e.items=(0,u.pj)(Array.from({length:n.total},()=>null)));let i=t.artists.map(e=>(0,d.d)(e.artist));(0,m.AG)({items:e.items,mappedRawItems:i,page:l,pageSize:r}),e.pager=n,e.requests=(null!==(o=e.requests)&&void 0!==o?o:0)+1,e.loadingState!==m.Gu.IDLE&&(e.loadingState=m.Gu.RESOLVE)}catch(t){("string"==typeof t||t instanceof Error)&&n.error(t),t instanceof i.du&&(t.statusCode===i.CN.NOT_FOUND||t.statusCode===i.CN.BAD_REQUEST)&&(e.errorStatusCode=i.CN.NOT_FOUND),e.loadingState!==m.Gu.IDLE&&(e.loadingState=m.Gu.REJECT)}finally{e.pendingPages.delete("".concat(l))}}}),reset(){e.loadingState=m.Gu.IDLE,e.pendingPages.clear(),e.pager=null,e.alreadyRequestedPages.clear(),e.errorStatusCode=null,e.items=(0,u.pj)([])}};return t});var G=a(3515);let c=u.V5.model("GenrePlaylistsPage",{loadingState:u.V5.enumeration(Object.values(m.Gu)),pager:u.V5.maybeNull(N.Vn),alreadyRequestedPages:u.V5.map(u.V5.number),pendingPages:u.V5.map(u.V5.number),requests:u.V5.maybeNull(u.V5.number),errorStatusCode:u.V5.maybeNull(u.V5.number),fullTitle:u.V5.maybeNull(u.V5.string),items:u.V5.array(u.V5.maybeNull(G.Cd))}).views(e=>({get isNotFound(){var t;let a=e.loadingState===m.Gu.RESOLVE&&(null===(t=e.pager)||void 0===t?void 0:t.total)===0,l=e.errorStatusCode===i.CN.NOT_FOUND||e.errorStatusCode===i.CN.BAD_REQUEST;return e.loadingState===m.Gu.REJECT&&l||a},get isSomethingWrong(){return!this.isNotFound&&e.loadingState===m.Gu.REJECT&&0===e.alreadyRequestedPages.size}})).actions(e=>{let t={getData:(0,u.ls)(function*(t){let{metatagId:a,page:l=0,pageSize:r=20}=t,{metatagsResource:s,logger:n}=(0,u.dU)(e);if(!(e.loadingState===m.Gu.PENDING&&e.pendingPages.has("".concat(l))||e.alreadyRequestedPages.has("".concat(l)))){"number"==typeof l&&e.alreadyRequestedPages.set("".concat(l),l);try{var o;e.loadingState=m.Gu.PENDING,e.pendingPages.set("".concat(l),l);let t=yield s.getMetatagPlaylists({id:a,offset:l,limit:r,withLikesCount:!0});e.fullTitle=t.title.fullTitle;let n={page:l,perPage:r,total:t.pager.total};0===e.items.length&&(e.items=(0,u.pj)(Array.from({length:n.total},()=>null)));let i=t.playlists.map(G.PV);(0,m.AG)({items:e.items,mappedRawItems:i,page:l,pageSize:r}),e.pager=n,e.requests=(null!==(o=e.requests)&&void 0!==o?o:0)+1,e.loadingState!==m.Gu.IDLE&&(e.loadingState=m.Gu.RESOLVE)}catch(t){!(t instanceof i.eY)&&(t instanceof Error||"string"==typeof t)&&n.error(t),e.alreadyRequestedPages.delete("".concat(l)),e.loadingState!==m.Gu.IDLE&&(e.loadingState=m.Gu.REJECT)}finally{e.pendingPages.delete("".concat(l))}}}),reset(){e.loadingState=m.Gu.IDLE,e.pendingPages.clear(),e.pager=null,e.alreadyRequestedPages.clear(),e.errorStatusCode=null,e.items=(0,u.pj)([])}};return t}),y=u.V5.model("GenrePage",{id:u.V5.maybeNull(u.V5.string),errorStatusCode:u.V5.maybeNull(u.V5.number),loadingState:u.V5.enumeration(Object.values(m.Gu)),fullTitle:u.V5.maybeNull(u.V5.string),artists:u.V5.array(d.Go),albums:u.V5.array(o.ug),playlists:u.V5.array(g.d2),albumsSubpage:E,artistsSubpage:p,playlistsSubpage:c}).views(e=>({get isLoading(){return e.loadingState===m.Gu.IDLE||e.loadingState===m.Gu.PENDING},get hasAlbums(){return e.loadingState===m.Gu.IDLE||e.loadingState===m.Gu.PENDING||e.albums.length>0},get hasArtists(){return e.loadingState===m.Gu.IDLE||e.loadingState===m.Gu.PENDING||e.artists.length>0},get hasPlaylists(){return e.loadingState===m.Gu.IDLE||e.loadingState===m.Gu.PENDING||e.playlists.length>0},get isNotFound(){let t=e.loadingState===m.Gu.RESOLVE&&!this.hasAlbums&&!this.hasArtists&&!this.hasPlaylists,a=e.errorStatusCode===i.CN.NOT_FOUND||e.errorStatusCode===i.CN.BAD_REQUEST;return e.loadingState===m.Gu.REJECT&&a||t}})).actions(e=>{let t={getData:(0,u.ls)(function*(t){let{id:a}=t,{metatagsResource:l,logger:r}=(0,u.dU)(e);if(e.loadingState!==m.Gu.PENDING)try{e.loadingState=m.Gu.PENDING;let t=yield l.getMetatagById({id:a});e.id=t.id,e.fullTitle=t.title.fullTitle,e.artists=(0,u.pj)(t.artists.map(d.d)),e.albums=(0,u.pj)(t.albums.map(o.ym)),e.playlists=(0,u.pj)(t.playlists.map(g.Q9)),e.loadingState!==m.Gu.IDLE&&(e.loadingState=m.Gu.RESOLVE)}catch(t){("string"==typeof t||t instanceof Error)&&r.error(t),t instanceof i.du&&(t.statusCode===i.CN.NOT_FOUND||t.statusCode===i.CN.BAD_REQUEST)&&(e.errorStatusCode=i.CN.NOT_FOUND),e.loadingState!==m.Gu.IDLE&&(e.loadingState=m.Gu.REJECT)}}),reset(){e.loadingState=m.Gu.IDLE,e.fullTitle=null,e.artists=(0,u.pj)([]),e.albums=(0,u.pj)([]),e.playlists=(0,u.pj)([])}};return t})}}]);