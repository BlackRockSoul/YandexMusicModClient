(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[210],{20210:function(e,t,i){"use strict";i.d(t,{vY:function(){return l.EmptyPlaylistBlock},ZL:function(){return n.PlaylistCard},Nn:function(){return k},d2:function(){return u},VD:function(){return s.PlaylistsCarousel},RE:function(){return x},Q9:function(){return v},VB:function(){return _}});var n=i(9612),s=i(54865),l=i(19320),a=i(96555),r=i(81446),o=i(3515);let u=o.Cd.props({artists:a.V5.maybe(a.V5.array(r.Go))});var c=i(84133),d=i(58362),p=i(36019);let m=a.V5.model("PlaylistOwner",{uid:a.V5.number,login:a.V5.string,name:a.V5.string,sex:a.V5.enumeration(Object.values(p.oF)),verified:a.V5.boolean}),y=a.V5.model("PlaylistOwner",{userInfo:a.V5.maybeNull(m),caseForms:a.V5.maybeNull(d.S2)}),k=o.Cd.props({owner:a.V5.maybe(m),modified:a.V5.string,description:a.V5.maybe(a.V5.string),madeFor:a.V5.maybeNull(y)}).views(e=>({get seeds(){var t;return["playlist:".concat(null===(t=e.owner)||void 0===t?void 0:t.login,"_").concat(e.kind)]}})).actions(e=>{let t={changeDescription:(0,a.ls)(function*(t){if(!(0,a.fh)(e))return c.SL.ERROR;if(e.description===t)return c.SL.OK;if(t.length>o.Zn)return c.SL.ERROR;let{usersResource:i,logger:n}=(0,a.dU)(e);if(e.canUserChange){let s=e.description;e.description=t;try{let n=yield i.changePlaylistDescription({description:t,userId:e.uid,playlistKind:e.kind});return e.description=n.description,c.SL.OK}catch(t){e.description=s,(t instanceof Error||"string"==typeof t)&&n.error(t)}}return c.SL.ERROR}),changePlaylistCover:(0,a.ls)(function*(t){if(!(0,a.fh)(e))return c.SL.ERROR;let{usersResource:i,logger:n}=(0,a.dU)(e);try{return yield i.uploadPlaylistCover({userId:e.uid,formData:t,playlistKind:e.kind}),c.SL.OK}catch(e){(e instanceof Error||"string"==typeof e)&&n.error(e)}return c.SL.ERROR})};return t}),C=e=>({uid:e.uid,login:e.login,name:e.name,sex:e.sex,verified:e.verified}),f=e=>(0,a.pj)({userInfo:e.userInfo?C(e.userInfo):null,caseForms:e.caseForms?(0,c.GA)(e.caseForms):null}),v=e=>(0,a.pj)({...(0,o.PV)(e),owner:e.owner?C(e.owner):void 0,description:e.description,modified:e.modified,madeFor:e.madeFor?f(e.madeFor):null}),_=e=>{var t,i;return(0,a.pj)({...(0,o.PV)(e),artists:null!==(i=null==e?void 0:null===(t=e.artists)||void 0===t?void 0:t.map(r.d))&&void 0!==i?i:[]})},x=e=>{var t,i;let{playlist:n,generatedPlaylistType:s,likesCount:l}=e;return(0,a.pj)({isAvailable:null===(i=n.available)||void 0===i||i,uuid:n.playlistUuid,title:n.title,uid:n.uid,kind:n.kind,coverUri:null===(t=n.cover)||void 0===t?void 0:t.uri,generatedPlaylistType:s,likesCount:l})}},19320:function(e,t,i){"use strict";i.r(t),i.d(t,{EmptyPlaylistBlock:function(){return d}});var n=i(8759),s=i(35338),l=i(99616),a=i(2814),r=i(14581),o=i(1918),u=i(61710),c=i.n(u);let d=e=>{let{className:t,isEmptySearch:i}=e,u=(0,l.useMemo)(()=>i?(0,n.jsx)(a.Z,{id:"search-results.not-found-title"}):(0,n.jsx)(a.Z,{id:"error-messages.empty-collection-playlist-title"}),[i]),d=(0,l.useMemo)(()=>i?(0,n.jsx)(a.Z,{id:"search-results.not-found-description"}):(0,n.jsx)(a.Z,{id:"error-messages.empty-collection-playlist-description"}),[i]);return(0,n.jsxs)("div",{className:(0,s.W)(c().root,t),children:[(0,n.jsx)("div",{className:c().iconBackground,children:(0,n.jsx)(r.J,{variant:"search",size:"l",className:c().icon})}),(0,n.jsx)(o.Heading,{variant:"h3",size:"xs",className:c().title,children:u}),(0,n.jsx)(o.Caption,{variant:"span",size:"l",className:c().subtitle,children:d})]})}},9612:function(e,t,i){"use strict";i.r(t),i.d(t,{PlaylistCard:function(){return b}});var n=i(8759),s=i(35338),l=i(33423),a=i(99616),r=i(65244),o=i(86742),u=i(71440),c=i(15527),d=i(14077),p=i(14581),m=i(96437),y=i(1918),k=i(53433),C=i(81446),f=i(3515),v=i(84133),_=i(44285);let x=e=>{let{formatMessage:t}=(0,r.Z)();return(0,a.useMemo)(()=>{let i="";e.isLiked&&!e.actualLikesCount?i=t({id:"entity-names.has-your-like"}):"number"==typeof e.actualLikesCount&&(i=e.actualLikesCount>0?t({id:"entity-names.likes-counter"},{counter:e.actualLikesCount}):t({id:"entity-names.likes-counter-empty"}));let n=t({id:"entity-names.playlist-name"},{playlistName:e.title});return"".concat(n," ").concat(i)},[t,e])};var P=i(52317);let h=(0,l.Pi)(e=>{let{playlist:t,reference:i,onOpenChange:s,open:l,returnFocus:a}=e,{settings:r,experiments:o}=(0,v.oR)(),u=(0,f.SB)(t),c=(0,f.BV)(t),d=r.layout===v.t8.Mobile,p=o.checkExperiment(v.pe.WebPins,"on")&&!d;return(0,v.ZP)(l),(0,n.jsxs)(P.v2,{title:t.title,onOpenChange:s,open:l,offsetOptions:10,reference:i,isMobile:d,returnFocus:a,children:[p&&(0,n.jsx)(_.Zd,{onClick:c,isPinned:t.isPinned}),!t.isFavouritePlaylist&&(0,n.jsx)(_.xZ,{onClick:u,isLiked:t.isLiked})]})});var L=i(4082),j=i.n(L);let b=(0,l.Pi)(e=>{let{className:t,playlist:i,children:l,contentLinesCount:P,customDescription:L}=e,{ref:b,intersectionPropertyId:B}=(0,v.Vf)(),g=(0,v.x5)(),{formatMessage:N}=(0,r.Z)(),{sendLikeSearchFeedback:R,sendNavigateSearchFeedback:w,sendPlaySearchFeedback:E}=(0,v.sA)(),[V,S]=(0,a.useState)(!1),[z,A]=(0,a.useState)(!1),[M,O]=(0,a.useState)(!1),F=x(i),U=(0,f.SB)(i),W=(0,f.BV)(i),I=(0,v.zx)(),Z=(0,v.s0)(i.url),{sonataState:{status:T},experiments:D}=(0,v.oR)(),[H,K]=(0,a.useState)(!1),{isPlaying:Y,togglePlay:G}=(0,v.qm)({playContextParams:{contextData:{type:u.Ak.Playlist,meta:{id:i.id,uuid:i.uuid},from:g},loadContextMeta:!0},sonataStatus:T}),J=(0,a.useCallback)(()=>{I({to:o.qU.PlaylistScreen}),null==w||w()},[I,w]),q=(0,a.useCallback)(()=>{J(),Z()},[J,Z]),Q=(0,a.useCallback)(()=>{V||Y||(S(!0),null==E||E()),G()},[Y,V,E,G]),X=(0,a.useCallback)(()=>{z||i.isLiked||(A(!0),null==R||R()),U()},[U,z,i.isLiked,R]),$=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),ee=(0,a.useCallback)(()=>{O(!M),K(!M)},[M]),et=(0,a.useMemo)(()=>{var e;return L?(0,n.jsx)(y.Caption,{variant:"span",type:"entity",size:"s",weight:"medium",lineClamp:2,children:L}):(null===(e=i.artists)||void 0===e?void 0:e.length)?(0,n.jsx)(C.jO,{className:j().artists,artists:i.artists,lineClamp:1,linkClassName:j().artistLink,captionSize:"s"}):void 0},[i.artists,L]),ei=(0,a.useMemo)(()=>{if(D.checkExperiment(v.pe.WebPins,"on"))return(0,n.jsx)(h,{playlist:i,onOpenChange:ee,open:M,returnFocus:!1,reference:(0,n.jsx)(c.z,{onClick:$,className:(0,s.W)(j().menuButton,j().control),"aria-label":N({id:"interface-actions.context-menu"}),icon:(0,n.jsx)(p.J,{size:"xxs",variant:"more"}),size:"s",radius:"round",...(0,k.BA)(k.bG.playlist.PLAYLIST_CONTEXT_MENU_BUTTON)})})},[D,N,$,ee,M,i]),en=(0,a.useMemo)(()=>{if(!i.isFavouritePlaylist)return(0,n.jsx)(_.dJ,{className:(0,s.W)(j().likeButton,{[j().likeButton_withContextMenu]:D.checkExperiment(v.pe.WebPins,"on")},j().control),isLiked:i.isLiked,onClick:X,variant:"default",size:"s",iconSize:"xxs"})},[D,X,i.isFavouritePlaylist,i.isLiked]),es=(0,a.useMemo)(()=>{if(D.checkExperiment(v.pe.WebPins,"on"))return(0,n.jsx)(_.RT,{onClick:W,isPinned:i.isPinned,className:(0,s.W)(j().pinButton,j().control),withRipple:!1})},[D,W,i.isPinned]),el=(0,a.useMemo)(()=>(0,n.jsx)(m.Paper,{className:j().cover,radius:"s",withShadow:!0,...(0,k.BA)(k.bG.playlist.PLAYLIST_CARD),children:(0,n.jsxs)("div",{className:j().coverBlock,onClick:q,children:[(0,n.jsx)(_.BE,{className:j().image,src:i.coverUri,size:200,fit:"cover",alt:F,withAvatarReplace:!0,"aria-hidden":!0}),(0,n.jsx)(d.kk,{isVisible:M||H,className:j().controls,playControl:(0,n.jsx)(_.JM,{className:(0,s.W)(j().playButton,j().control),buttonVariant:"default",withHover:!1,iconSize:"xl",variant:"filled",onClick:Q,isPlaying:Y,disabled:!i.isAvailable}),likeControl:en,menuControl:ei,pinControl:es})]})}),[i.coverUri,i.isAvailable,q,F,M,H,Q,Y,en,ei,es]),ea=!!i.actualLikesCount&&!i.isLikesCountHidden;return(0,n.jsxs)(d.m7,{ref:b,"aria-label":F,className:(0,s.W)(j().root,t),title:(0,n.jsx)(y.Caption,{variant:"div",type:"entity",size:"s",weight:"medium",lineClamp:2,children:(0,n.jsx)(_.rU,{className:j().titleLink,href:i.url,onClick:J,children:i.title})}),"data-intersection-property-id":B,contentLinesCount:P,view:el,description:et,...(0,k.BA)(k.bG.playlist.PLAYLIST_ITEM),children:[ea&&(0,n.jsx)(_.DB,{ariaLabel:N({id:"entity-names.likes-counter"},{counter:i.actualLikesCount}),likesCount:i.actualLikesCount,isLiked:i.isLiked,handleLikeClick:U}),l]})})},54865:function(e,t,i){"use strict";i.r(t),i.d(t,{PlaylistsCarousel:function(){return o}});var n=i(8759),s=i(99616),l=i(44285),a=i(9612);let r=e=>{let{forwardRef:t,title:i,description:s,playlists:r,isLoading:o,containerClassName:u,className:c,headerClassName:d,viewAllActionLink:p}=e;return(0,n.jsx)(l.HY,{className:c,headerClassName:d,containerClassName:u,isLoading:o,ref:t,title:i,description:s,viewAllActionLink:p,children:null==r?void 0:r.map(e=>(0,n.jsx)(a.PlaylistCard,{playlist:e,contentLinesCount:3},e.key))})},o=(0,s.forwardRef)((e,t)=>(0,n.jsx)(r,{forwardRef:t,...e}))},61710:function(e){e.exports={root:"EmptyPlaylistBlock_root__wpA0j",iconBackground:"EmptyPlaylistBlock_iconBackground__pnUlz",title:"EmptyPlaylistBlock_title__pQQLf",subtitle:"EmptyPlaylistBlock_subtitle__P4Q7x"}},4082:function(e){e.exports={root:"PlaylistCard_root__i3pR4",controls:"PlaylistCard_controls__Ej8Rz",cover:"PlaylistCard_cover__tpK5L",coverBlock:"PlaylistCard_coverBlock__1slsN",image:"PlaylistCard_image__Li6oy",titleLink:"PlaylistCard_titleLink__H8qEc",artists:"PlaylistCard_artists__HtVIF",artistLink:"PlaylistCard_artistLink__jx3KB",playButton:"PlaylistCard_playButton__eaduk",likeButton_withContextMenu:"PlaylistCard_likeButton_withContextMenu__CHuuc",likeButton:"PlaylistCard_likeButton__RYXJz",menuButton:"PlaylistCard_menuButton__jFcWr",pinButton:"PlaylistCard_pinButton__jhWnL",control:"PlaylistCard_control__73YUq"}}}]);